(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Wa(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Uf={exports:{}},Ca={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function LT(){if(t_)return Ca;t_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var h in o)h!=="key"&&(c[h]=o[h])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Ca.Fragment=e,Ca.jsx=n,Ca.jsxs=n,Ca}var n_;function UT(){return n_||(n_=1,Uf.exports=LT()),Uf.exports}var E=UT(),jf={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function jT(){if(i_)return me;i_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function T(y){return y===null||typeof y!="object"?null:(y=b&&y[b]||y["@@iterator"],typeof y=="function"?y:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,U={};function L(y,k,G){this.props=y,this.context=k,this.refs=U,this.updater=G||O}L.prototype.isReactComponent={},L.prototype.setState=function(y,k){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,k,"setState")},L.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function $(){}$.prototype=L.prototype;function F(y,k,G){this.props=y,this.context=k,this.refs=U,this.updater=G||O}var Q=F.prototype=new $;Q.constructor=F,N(Q,L.prototype),Q.isPureReactComponent=!0;var ne=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},_e=Object.prototype.hasOwnProperty;function ge(y,k,G,q,W,ae){return G=ae.ref,{$$typeof:r,type:y,key:k,ref:G!==void 0?G:null,props:ae}}function he(y,k){return ge(y.type,k,void 0,void 0,void 0,y.props)}function je(y){return typeof y=="object"&&y!==null&&y.$$typeof===r}function tt(y){var k={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(G){return k[G]})}var at=/\/+/g;function Re(y,k){return typeof y=="object"&&y!==null&&y.key!=null?tt(""+y.key):k.toString(36)}function Ke(){}function le(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(Ke,Ke):(y.status="pending",y.then(function(k){y.status==="pending"&&(y.status="fulfilled",y.value=k)},function(k){y.status==="pending"&&(y.status="rejected",y.reason=k)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function xe(y,k,G,q,W){var ae=typeof y;(ae==="undefined"||ae==="boolean")&&(y=null);var B=!1;if(y===null)B=!0;else switch(ae){case"bigint":case"string":case"number":B=!0;break;case"object":switch(y.$$typeof){case r:case e:B=!0;break;case _:return B=y._init,xe(B(y._payload),k,G,q,W)}}if(B)return W=W(y),B=q===""?"."+Re(y,0):q,ne(W)?(G="",B!=null&&(G=B.replace(at,"$&/")+"/"),xe(W,k,G,"",function(K){return K})):W!=null&&(je(W)&&(W=he(W,G+(W.key==null||y&&y.key===W.key?"":(""+W.key).replace(at,"$&/")+"/")+B)),k.push(W)),1;B=0;var se=q===""?".":q+":";if(ne(y))for(var I=0;I<y.length;I++)q=y[I],ae=se+Re(q,I),B+=xe(q,k,G,ae,W);else if(I=T(y),typeof I=="function")for(y=I.call(y),I=0;!(q=y.next()).done;)q=q.value,ae=se+Re(q,I++),B+=xe(q,k,G,ae,W);else if(ae==="object"){if(typeof y.then=="function")return xe(le(y),k,G,q,W);throw k=String(y),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return B}function M(y,k,G){if(y==null)return y;var q=[],W=0;return xe(y,q,"","",function(ae){return k.call(G,ae,W++)}),q}function V(y){if(y._status===-1){var k=y._result;k=k(),k.then(function(G){(y._status===0||y._status===-1)&&(y._status=1,y._result=G)},function(G){(y._status===0||y._status===-1)&&(y._status=2,y._result=G)}),y._status===-1&&(y._status=0,y._result=k)}if(y._status===1)return y._result.default;throw y._result}var ie=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)};function De(){}return me.Children={map:M,forEach:function(y,k,G){M(y,function(){k.apply(this,arguments)},G)},count:function(y){var k=0;return M(y,function(){k++}),k},toArray:function(y){return M(y,function(k){return k})||[]},only:function(y){if(!je(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},me.Component=L,me.Fragment=n,me.Profiler=o,me.PureComponent=F,me.StrictMode=s,me.Suspense=p,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,me.__COMPILER_RUNTIME={__proto__:null,c:function(y){return Z.H.useMemoCache(y)}},me.cache=function(y){return function(){return y.apply(null,arguments)}},me.cloneElement=function(y,k,G){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var q=N({},y.props),W=y.key,ae=void 0;if(k!=null)for(B in k.ref!==void 0&&(ae=void 0),k.key!==void 0&&(W=""+k.key),k)!_e.call(k,B)||B==="key"||B==="__self"||B==="__source"||B==="ref"&&k.ref===void 0||(q[B]=k[B]);var B=arguments.length-2;if(B===1)q.children=G;else if(1<B){for(var se=Array(B),I=0;I<B;I++)se[I]=arguments[I+2];q.children=se}return ge(y.type,W,void 0,void 0,ae,q)},me.createContext=function(y){return y={$$typeof:d,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:c,_context:y},y},me.createElement=function(y,k,G){var q,W={},ae=null;if(k!=null)for(q in k.key!==void 0&&(ae=""+k.key),k)_e.call(k,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(W[q]=k[q]);var B=arguments.length-2;if(B===1)W.children=G;else if(1<B){for(var se=Array(B),I=0;I<B;I++)se[I]=arguments[I+2];W.children=se}if(y&&y.defaultProps)for(q in B=y.defaultProps,B)W[q]===void 0&&(W[q]=B[q]);return ge(y,ae,void 0,void 0,null,W)},me.createRef=function(){return{current:null}},me.forwardRef=function(y){return{$$typeof:h,render:y}},me.isValidElement=je,me.lazy=function(y){return{$$typeof:_,_payload:{_status:-1,_result:y},_init:V}},me.memo=function(y,k){return{$$typeof:m,type:y,compare:k===void 0?null:k}},me.startTransition=function(y){var k=Z.T,G={};Z.T=G;try{var q=y(),W=Z.S;W!==null&&W(G,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(De,ie)}catch(ae){ie(ae)}finally{Z.T=k}},me.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},me.use=function(y){return Z.H.use(y)},me.useActionState=function(y,k,G){return Z.H.useActionState(y,k,G)},me.useCallback=function(y,k){return Z.H.useCallback(y,k)},me.useContext=function(y){return Z.H.useContext(y)},me.useDebugValue=function(){},me.useDeferredValue=function(y,k){return Z.H.useDeferredValue(y,k)},me.useEffect=function(y,k,G){var q=Z.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(y,k)},me.useId=function(){return Z.H.useId()},me.useImperativeHandle=function(y,k,G){return Z.H.useImperativeHandle(y,k,G)},me.useInsertionEffect=function(y,k){return Z.H.useInsertionEffect(y,k)},me.useLayoutEffect=function(y,k){return Z.H.useLayoutEffect(y,k)},me.useMemo=function(y,k){return Z.H.useMemo(y,k)},me.useOptimistic=function(y,k){return Z.H.useOptimistic(y,k)},me.useReducer=function(y,k,G){return Z.H.useReducer(y,k,G)},me.useRef=function(y){return Z.H.useRef(y)},me.useState=function(y){return Z.H.useState(y)},me.useSyncExternalStore=function(y,k,G){return Z.H.useSyncExternalStore(y,k,G)},me.useTransition=function(){return Z.H.useTransition()},me.version="19.1.0",me}var r_;function Jd(){return r_||(r_=1,jf.exports=jT()),jf.exports}var z=Jd();const X=Wa(z);var Pf={exports:{}},wa={},zf={exports:{}},Hf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function PT(){return s_||(s_=1,function(r){function e(M,V){var ie=M.length;M.push(V);e:for(;0<ie;){var De=ie-1>>>1,y=M[De];if(0<o(y,V))M[De]=V,M[ie]=y,ie=De;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var V=M[0],ie=M.pop();if(ie!==V){M[0]=ie;e:for(var De=0,y=M.length,k=y>>>1;De<k;){var G=2*(De+1)-1,q=M[G],W=G+1,ae=M[W];if(0>o(q,ie))W<y&&0>o(ae,q)?(M[De]=ae,M[W]=ie,De=W):(M[De]=q,M[G]=ie,De=G);else if(W<y&&0>o(ae,ie))M[De]=ae,M[W]=ie,De=W;else break e}}return V}function o(M,V){var ie=M.sortIndex-V.sortIndex;return ie!==0?ie:M.id-V.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();r.unstable_now=function(){return d.now()-h}}var p=[],m=[],_=1,b=null,T=3,O=!1,N=!1,U=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ne(M){for(var V=n(m);V!==null;){if(V.callback===null)s(m);else if(V.startTime<=M)s(m),V.sortIndex=V.expirationTime,e(p,V);else break;V=n(m)}}function Z(M){if(U=!1,ne(M),!N)if(n(p)!==null)N=!0,_e||(_e=!0,Re());else{var V=n(m);V!==null&&xe(Z,V.startTime-M)}}var _e=!1,ge=-1,he=5,je=-1;function tt(){return L?!0:!(r.unstable_now()-je<he)}function at(){if(L=!1,_e){var M=r.unstable_now();je=M;var V=!0;try{e:{N=!1,U&&(U=!1,F(ge),ge=-1),O=!0;var ie=T;try{t:{for(ne(M),b=n(p);b!==null&&!(b.expirationTime>M&&tt());){var De=b.callback;if(typeof De=="function"){b.callback=null,T=b.priorityLevel;var y=De(b.expirationTime<=M);if(M=r.unstable_now(),typeof y=="function"){b.callback=y,ne(M),V=!0;break t}b===n(p)&&s(p),ne(M)}else s(p);b=n(p)}if(b!==null)V=!0;else{var k=n(m);k!==null&&xe(Z,k.startTime-M),V=!1}}break e}finally{b=null,T=ie,O=!1}V=void 0}}finally{V?Re():_e=!1}}}var Re;if(typeof Q=="function")Re=function(){Q(at)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,le=Ke.port2;Ke.port1.onmessage=at,Re=function(){le.postMessage(null)}}else Re=function(){$(at,0)};function xe(M,V){ge=$(function(){M(r.unstable_now())},V)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(M){switch(T){case 1:case 2:case 3:var V=3;break;default:V=T}var ie=T;T=V;try{return M()}finally{T=ie}},r.unstable_requestPaint=function(){L=!0},r.unstable_runWithPriority=function(M,V){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ie=T;T=M;try{return V()}finally{T=ie}},r.unstable_scheduleCallback=function(M,V,ie){var De=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?De+ie:De):ie=De,M){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=ie+y,M={id:_++,callback:V,priorityLevel:M,startTime:ie,expirationTime:y,sortIndex:-1},ie>De?(M.sortIndex=ie,e(m,M),n(p)===null&&M===n(m)&&(U?(F(ge),ge=-1):U=!0,xe(Z,ie-De))):(M.sortIndex=y,e(p,M),N||O||(N=!0,_e||(_e=!0,Re()))),M},r.unstable_shouldYield=tt,r.unstable_wrapCallback=function(M){var V=T;return function(){var ie=T;T=V;try{return M.apply(this,arguments)}finally{T=ie}}}}(Hf)),Hf}var a_;function zT(){return a_||(a_=1,zf.exports=PT()),zf.exports}var Bf={exports:{}},It={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function HT(){if(o_)return It;o_=1;var r=Jd();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,m,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:m,implementation:_}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return It.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,It.createPortal=function(p,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return c(p,m,null,_)},It.flushSync=function(p){var m=d.T,_=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=m,s.p=_,s.d.f()}},It.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},It.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},It.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var _=m.as,b=h(_,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,O=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:O}):_==="script"&&s.d.X(p,{crossOrigin:b,integrity:T,fetchPriority:O,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},It.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},It.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,b=h(_,m.crossOrigin);s.d.L(p,_,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},It.preloadModule=function(p,m){if(typeof p=="string")if(m){var _=h(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},It.requestFormReset=function(p){s.d.r(p)},It.unstable_batchedUpdates=function(p,m){return p(m)},It.useFormState=function(p,m,_){return d.H.useFormState(p,m,_)},It.useFormStatus=function(){return d.H.useHostTransitionStatus()},It.version="19.1.0",It}var l_;function Uy(){if(l_)return Bf.exports;l_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bf.exports=HT(),Bf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function BT(){if(c_)return wa;c_=1;var r=zT(),e=Jd(),n=Uy();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function h(t){if(c(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var u=a.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===a)return h(u),t;if(f===l)return h(u),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=u,l=f;else{for(var g=!1,v=u.child;v;){if(v===a){g=!0,a=u,l=f;break}if(v===l){g=!0,l=u,a=f;break}v=v.sibling}if(!g){for(v=f.child;v;){if(v===a){g=!0,a=f,l=u;break}if(v===l){g=!0,l=f,a=u;break}v=v.sibling}if(!g)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function m(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=m(t),i!==null)return i;t=t.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),je=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),at=Symbol.iterator;function Re(t){return t===null||typeof t!="object"?null:(t=at&&t[at]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ke?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case N:return"Fragment";case L:return"Profiler";case U:return"StrictMode";case Z:return"Suspense";case _e:return"SuspenseList";case je:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case Q:return(t.displayName||"Context")+".Provider";case F:return(t._context.displayName||"Context")+".Consumer";case ne:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ge:return i=t.displayName||null,i!==null?i:le(t.type)||"Memo";case he:i=t._payload,t=t._init;try{return le(t(i))}catch{}}return null}var xe=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},De=[],y=-1;function k(t){return{current:t}}function G(t){0>y||(t.current=De[y],De[y]=null,y--)}function q(t,i){y++,De[y]=t.current,t.current=i}var W=k(null),ae=k(null),B=k(null),se=k(null);function I(t,i){switch(q(B,i),q(ae,t),q(W,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Nv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Nv(i),t=Av(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(W),q(W,t)}function K(){G(W),G(ae),G(B)}function J(t){t.memoizedState!==null&&q(se,t);var i=W.current,a=Av(i,t.type);i!==a&&(q(ae,t),q(W,a))}function be(t){ae.current===t&&(G(W),G(ae)),se.current===t&&(G(se),ya._currentValue=ie)}var Le=Object.prototype.hasOwnProperty,Pe=r.unstable_scheduleCallback,ve=r.unstable_cancelCallback,ot=r.unstable_shouldYield,Dt=r.unstable_requestPaint,Je=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Nt=r.unstable_ImmediatePriority,Ct=r.unstable_UserBlockingPriority,lt=r.unstable_NormalPriority,_r=r.unstable_LowPriority,Os=r.unstable_IdlePriority,vE=r.log,_E=r.unstable_setDisableYieldValue,Rs=null,Yt=null;function ni(t){if(typeof vE=="function"&&_E(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Rs,t)}catch{}}var $t=Math.clz32?Math.clz32:EE,yE=Math.log,bE=Math.LN2;function EE(t){return t>>>=0,t===0?32:31-(yE(t)/bE|0)|0}var lo=256,co=4194304;function qi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function uo(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var u=0,f=t.suspendedLanes,g=t.pingedLanes;t=t.warmLanes;var v=l&134217727;return v!==0?(l=v&~f,l!==0?u=qi(l):(g&=v,g!==0?u=qi(g):a||(a=v&~t,a!==0&&(u=qi(a))))):(v=l&~f,v!==0?u=qi(v):g!==0?u=qi(g):a||(a=l&~t,a!==0&&(u=qi(a)))),u===0?0:i!==0&&i!==u&&(i&f)===0&&(f=u&-u,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:u}function Ds(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function SE(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dp(){var t=lo;return lo<<=1,(lo&4194048)===0&&(lo=256),t}function hp(){var t=co;return co<<=1,(co&62914560)===0&&(co=4194304),t}function Cc(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ns(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function TE(t,i,a,l,u,f){var g=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var v=t.entanglements,S=t.expirationTimes,D=t.hiddenUpdates;for(a=g&~a;0<a;){var j=31-$t(a),H=1<<j;v[j]=0,S[j]=-1;var A=D[j];if(A!==null)for(D[j]=null,j=0;j<A.length;j++){var x=A[j];x!==null&&(x.lane&=-536870913)}a&=~H}l!==0&&pp(t,l,0),f!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=f&~(g&~i))}function pp(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-$t(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function gp(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-$t(a),u=1<<l;u&i|t[l]&i&&(t[l]|=i),a&=~u}}function wc(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Oc(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mp(){var t=V.p;return t!==0?t:(t=window.event,t===void 0?32:Wv(t.type))}function CE(t,i){var a=V.p;try{return V.p=t,i()}finally{V.p=a}}var ii=Math.random().toString(36).slice(2),At="__reactFiber$"+ii,jt="__reactProps$"+ii,yr="__reactContainer$"+ii,Rc="__reactEvents$"+ii,wE="__reactListeners$"+ii,OE="__reactHandles$"+ii,vp="__reactResources$"+ii,As="__reactMarker$"+ii;function Dc(t){delete t[At],delete t[jt],delete t[Rc],delete t[wE],delete t[OE]}function br(t){var i=t[At];if(i)return i;for(var a=t.parentNode;a;){if(i=a[yr]||a[At]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=kv(t);t!==null;){if(a=t[At])return a;t=kv(t)}return i}t=a,a=t.parentNode}return null}function Er(t){if(t=t[At]||t[yr]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function xs(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Sr(t){var i=t[vp];return i||(i=t[vp]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function vt(t){t[As]=!0}var _p=new Set,yp={};function Gi(t,i){Tr(t,i),Tr(t+"Capture",i)}function Tr(t,i){for(yp[t]=i,t=0;t<i.length;t++)_p.add(i[t])}var RE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bp={},Ep={};function DE(t){return Le.call(Ep,t)?!0:Le.call(bp,t)?!1:RE.test(t)?Ep[t]=!0:(bp[t]=!0,!1)}function fo(t,i,a){if(DE(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ho(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function xn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Nc,Sp;function Cr(t){if(Nc===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Nc=i&&i[1]||"",Sp=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nc+t+Sp}var Ac=!1;function xc(t,i){if(!t||Ac)return"";Ac=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(x){var A=x}Reflect.construct(t,[],H)}else{try{H.call()}catch(x){A=x}t.call(H.prototype)}}else{try{throw Error()}catch(x){A=x}(H=t())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(x){if(x&&A&&typeof x.stack=="string")return[x.stack,A.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),g=f[0],v=f[1];if(g&&v){var S=g.split(`
`),D=v.split(`
`);for(u=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;if(l===S.length||u===D.length)for(l=S.length-1,u=D.length-1;1<=l&&0<=u&&S[l]!==D[u];)u--;for(;1<=l&&0<=u;l--,u--)if(S[l]!==D[u]){if(l!==1||u!==1)do if(l--,u--,0>u||S[l]!==D[u]){var j=`
`+S[l].replace(" at new "," at ");return t.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",t.displayName)),j}while(1<=l&&0<=u);break}}}finally{Ac=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Cr(a):""}function NE(t){switch(t.tag){case 26:case 27:case 5:return Cr(t.type);case 16:return Cr("Lazy");case 13:return Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 15:return xc(t.type,!1);case 11:return xc(t.type.render,!1);case 1:return xc(t.type,!0);case 31:return Cr("Activity");default:return""}}function Tp(t){try{var i="";do i+=NE(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cp(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function AE(t){var i=Cp(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return u.call(this)},set:function(g){l=""+g,f.call(this,g)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function po(t){t._valueTracker||(t._valueTracker=AE(t))}function wp(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Cp(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function go(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var xE=/[\n"\\]/g;function tn(t){return t.replace(xE,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ic(t,i,a,l,u,f,g,v){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),i!=null?g==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+en(i)):t.value!==""+en(i)&&(t.value=""+en(i)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),i!=null?Mc(t,g,en(i)):a!=null?Mc(t,g,en(a)):l!=null&&t.removeAttribute("value"),u==null&&f!=null&&(t.defaultChecked=!!f),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.name=""+en(v):t.removeAttribute("name")}function Op(t,i,a,l,u,f,g,v){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+en(a):"",i=i!=null?""+en(i):a,v||i===t.value||(t.value=i),t.defaultValue=i}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=v?t.checked:!!l,t.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g)}function Mc(t,i,a){i==="number"&&go(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function wr(t,i,a,l){if(t=t.options,i){i={};for(var u=0;u<a.length;u++)i["$"+a[u]]=!0;for(a=0;a<t.length;a++)u=i.hasOwnProperty("$"+t[a].value),t[a].selected!==u&&(t[a].selected=u),u&&l&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),i=null,u=0;u<t.length;u++){if(t[u].value===a){t[u].selected=!0,l&&(t[u].defaultSelected=!0);return}i!==null||t[u].disabled||(i=t[u])}i!==null&&(i.selected=!0)}}function Rp(t,i,a){if(i!=null&&(i=""+en(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+en(a):""}function Dp(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(xe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=en(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Or(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var IE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Np(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||IE.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Ap(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var u in i)l=i[u],i.hasOwnProperty(u)&&a[u]!==l&&Np(t,u,l)}else for(var f in i)i.hasOwnProperty(f)&&Np(t,f,i[f])}function kc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ME=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(t){return kE.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Lc=null;function Uc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rr=null,Dr=null;function xp(t){var i=Er(t);if(i&&(t=i.stateNode)){var a=t[jt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ic(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+tn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var u=l[jt]||null;if(!u)throw Error(s(90));Ic(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&wp(l)}break e;case"textarea":Rp(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&wr(t,!!a.multiple,i,!1)}}}var jc=!1;function Ip(t,i,a){if(jc)return t(i,a);jc=!0;try{var l=t(i);return l}finally{if(jc=!1,(Rr!==null||Dr!==null)&&(tl(),Rr&&(i=Rr,t=Dr,Dr=Rr=null,xp(i),t)))for(i=0;i<t.length;i++)xp(t[i])}}function Is(t,i){var a=t.stateNode;if(a===null)return null;var l=a[jt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pc=!1;if(In)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Pc=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Pc=!1}var ri=null,zc=null,vo=null;function Mp(){if(vo)return vo;var t,i=zc,a=i.length,l,u="value"in ri?ri.value:ri.textContent,f=u.length;for(t=0;t<a&&i[t]===u[t];t++);var g=a-t;for(l=1;l<=g&&i[a-l]===u[f-l];l++);return vo=u.slice(t,1<l?1-l:void 0)}function _o(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function yo(){return!0}function kp(){return!1}function Pt(t){function i(a,l,u,f,g){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(a=t[v],this[v]=a?a(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?yo:kp,this.isPropagationStopped=kp,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),i}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=Pt(Vi),ks=_({},Vi,{view:0,detail:0}),LE=Pt(ks),Hc,Bc,Ls,Eo=_({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ls&&(Ls&&t.type==="mousemove"?(Hc=t.screenX-Ls.screenX,Bc=t.screenY-Ls.screenY):Bc=Hc=0,Ls=t),Hc)},movementY:function(t){return"movementY"in t?t.movementY:Bc}}),Lp=Pt(Eo),UE=_({},Eo,{dataTransfer:0}),jE=Pt(UE),PE=_({},ks,{relatedTarget:0}),qc=Pt(PE),zE=_({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),HE=Pt(zE),BE=_({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qE=Pt(BE),GE=_({},Vi,{data:0}),Up=Pt(GE),VE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$E={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FE(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=$E[t])?!!i[t]:!1}function Gc(){return FE}var QE=_({},ks,{key:function(t){if(t.key){var i=VE[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=_o(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(t){return t.type==="keypress"?_o(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_o(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WE=Pt(QE),XE=_({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jp=Pt(XE),KE=_({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),ZE=Pt(KE),JE=_({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),eS=Pt(JE),tS=_({},Eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nS=Pt(tS),iS=_({},Vi,{newState:0,oldState:0}),rS=Pt(iS),sS=[9,13,27,32],Vc=In&&"CompositionEvent"in window,Us=null;In&&"documentMode"in document&&(Us=document.documentMode);var aS=In&&"TextEvent"in window&&!Us,Pp=In&&(!Vc||Us&&8<Us&&11>=Us),zp=" ",Hp=!1;function Bp(t,i){switch(t){case"keyup":return sS.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nr=!1;function oS(t,i){switch(t){case"compositionend":return qp(i);case"keypress":return i.which!==32?null:(Hp=!0,zp);case"textInput":return t=i.data,t===zp&&Hp?null:t;default:return null}}function lS(t,i){if(Nr)return t==="compositionend"||!Vc&&Bp(t,i)?(t=Mp(),vo=zc=ri=null,Nr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pp&&i.locale!=="ko"?null:i.data;default:return null}}var cS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!cS[t.type]:i==="textarea"}function Vp(t,i,a,l){Rr?Dr?Dr.push(l):Dr=[l]:Rr=l,i=ol(i,"onChange"),0<i.length&&(a=new bo("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var js=null,Ps=null;function uS(t){Cv(t,0)}function So(t){var i=xs(t);if(wp(i))return t}function Yp(t,i){if(t==="change")return i}var $p=!1;if(In){var Yc;if(In){var $c="oninput"in document;if(!$c){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),$c=typeof Fp.oninput=="function"}Yc=$c}else Yc=!1;$p=Yc&&(!document.documentMode||9<document.documentMode)}function Qp(){js&&(js.detachEvent("onpropertychange",Wp),Ps=js=null)}function Wp(t){if(t.propertyName==="value"&&So(Ps)){var i=[];Vp(i,Ps,t,Uc(t)),Ip(uS,i)}}function fS(t,i,a){t==="focusin"?(Qp(),js=i,Ps=a,js.attachEvent("onpropertychange",Wp)):t==="focusout"&&Qp()}function dS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return So(Ps)}function hS(t,i){if(t==="click")return So(i)}function pS(t,i){if(t==="input"||t==="change")return So(i)}function gS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Ft=typeof Object.is=="function"?Object.is:gS;function zs(t,i){if(Ft(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!Le.call(i,u)||!Ft(t[u],i[u]))return!1}return!0}function Xp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kp(t,i){var a=Xp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xp(a)}}function Zp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Zp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Jp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=go(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=go(t.document)}return i}function Fc(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var mS=In&&"documentMode"in document&&11>=document.documentMode,Ar=null,Qc=null,Hs=null,Wc=!1;function eg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wc||Ar==null||Ar!==go(l)||(l=Ar,"selectionStart"in l&&Fc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Hs&&zs(Hs,l)||(Hs=l,l=ol(Qc,"onSelect"),0<l.length&&(i=new bo("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ar)))}function Yi(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var xr={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionrun:Yi("Transition","TransitionRun"),transitionstart:Yi("Transition","TransitionStart"),transitioncancel:Yi("Transition","TransitionCancel"),transitionend:Yi("Transition","TransitionEnd")},Xc={},tg={};In&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function $i(t){if(Xc[t])return Xc[t];if(!xr[t])return t;var i=xr[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in tg)return Xc[t]=i[a];return t}var ng=$i("animationend"),ig=$i("animationiteration"),rg=$i("animationstart"),vS=$i("transitionrun"),_S=$i("transitionstart"),yS=$i("transitioncancel"),sg=$i("transitionend"),ag=new Map,Kc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kc.push("scrollEnd");function hn(t,i){ag.set(t,i),Gi(i,[t])}var og=new WeakMap;function nn(t,i){if(typeof t=="object"&&t!==null){var a=og.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Tp(i)},og.set(t,i),i)}return{value:t,source:i,stack:Tp(i)}}var rn=[],Ir=0,Zc=0;function To(){for(var t=Ir,i=Zc=Ir=0;i<t;){var a=rn[i];rn[i++]=null;var l=rn[i];rn[i++]=null;var u=rn[i];rn[i++]=null;var f=rn[i];if(rn[i++]=null,l!==null&&u!==null){var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}f!==0&&lg(a,u,f)}}function Co(t,i,a,l){rn[Ir++]=t,rn[Ir++]=i,rn[Ir++]=a,rn[Ir++]=l,Zc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Jc(t,i,a,l){return Co(t,i,a,l),wo(t)}function Mr(t,i){return Co(t,null,null,i),wo(t)}function lg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var u=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(u=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,u&&i!==null&&(u=31-$t(a),t=f.hiddenUpdates,l=t[u],l===null?t[u]=[i]:l.push(i),i.lane=a|536870912),f):null}function wo(t){if(50<fa)throw fa=0,af=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var kr={};function bS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,i,a,l){return new bS(t,i,a,l)}function eu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mn(t,i){var a=t.alternate;return a===null?(a=Qt(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function cg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Oo(t,i,a,l,u,f){var g=0;if(l=t,typeof t=="function")eu(t)&&(g=1);else if(typeof t=="string")g=ST(t,a,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case je:return t=Qt(31,a,i,u),t.elementType=je,t.lanes=f,t;case N:return Fi(a.children,u,f,i);case U:g=8,u|=24;break;case L:return t=Qt(12,a,i,u|2),t.elementType=L,t.lanes=f,t;case Z:return t=Qt(13,a,i,u),t.elementType=Z,t.lanes=f,t;case _e:return t=Qt(19,a,i,u),t.elementType=_e,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:case Q:g=10;break e;case F:g=9;break e;case ne:g=11;break e;case ge:g=14;break e;case he:g=16,l=null;break e}g=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Qt(g,a,i,u),i.elementType=t,i.type=l,i.lanes=f,i}function Fi(t,i,a,l){return t=Qt(7,t,l,i),t.lanes=a,t}function tu(t,i,a){return t=Qt(6,t,null,i),t.lanes=a,t}function nu(t,i,a){return i=Qt(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Lr=[],Ur=0,Ro=null,Do=0,sn=[],an=0,Qi=null,kn=1,Ln="";function Wi(t,i){Lr[Ur++]=Do,Lr[Ur++]=Ro,Ro=t,Do=i}function ug(t,i,a){sn[an++]=kn,sn[an++]=Ln,sn[an++]=Qi,Qi=t;var l=kn;t=Ln;var u=32-$t(l)-1;l&=~(1<<u),a+=1;var f=32-$t(i)+u;if(30<f){var g=u-u%5;f=(l&(1<<g)-1).toString(32),l>>=g,u-=g,kn=1<<32-$t(i)+u|a<<u|l,Ln=f+t}else kn=1<<f|a<<u|l,Ln=t}function iu(t){t.return!==null&&(Wi(t,1),ug(t,1,0))}function ru(t){for(;t===Ro;)Ro=Lr[--Ur],Lr[Ur]=null,Do=Lr[--Ur],Lr[Ur]=null;for(;t===Qi;)Qi=sn[--an],sn[an]=null,Ln=sn[--an],sn[an]=null,kn=sn[--an],sn[an]=null}var kt=null,it=null,Ue=!1,Xi=null,Tn=!1,su=Error(s(519));function Ki(t){var i=Error(s(418,""));throw Gs(nn(i,t)),su}function fg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[At]=t,i[jt]=l,a){case"dialog":we("cancel",i),we("close",i);break;case"iframe":case"object":case"embed":we("load",i);break;case"video":case"audio":for(a=0;a<ha.length;a++)we(ha[a],i);break;case"source":we("error",i);break;case"img":case"image":case"link":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"input":we("invalid",i),Op(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),po(i);break;case"select":we("invalid",i);break;case"textarea":we("invalid",i),Dp(i,l.value,l.defaultValue,l.children),po(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Dv(i.textContent,a)?(l.popover!=null&&(we("beforetoggle",i),we("toggle",i)),l.onScroll!=null&&we("scroll",i),l.onScrollEnd!=null&&we("scrollend",i),l.onClick!=null&&(i.onclick=ll),i=!0):i=!1,i||Ki(t)}function dg(t){for(kt=t.return;kt;)switch(kt.tag){case 5:case 13:Tn=!1;return;case 27:case 3:Tn=!0;return;default:kt=kt.return}}function Bs(t){if(t!==kt)return!1;if(!Ue)return dg(t),Ue=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Sf(t.type,t.memoizedProps)),a=!a),a&&it&&Ki(t),dg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){it=gn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}it=null}}else i===27?(i=it,bi(t.type)?(t=Of,Of=null,it=t):it=i):it=kt?gn(t.stateNode.nextSibling):null;return!0}function qs(){it=kt=null,Ue=!1}function hg(){var t=Xi;return t!==null&&(Bt===null?Bt=t:Bt.push.apply(Bt,t),Xi=null),t}function Gs(t){Xi===null?Xi=[t]:Xi.push(t)}var au=k(null),Zi=null,Un=null;function si(t,i,a){q(au,i._currentValue),i._currentValue=a}function jn(t){t._currentValue=au.current,G(au)}function ou(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function lu(t,i,a,l){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){var g=u.child;f=f.firstContext;e:for(;f!==null;){var v=f;f=u;for(var S=0;S<i.length;S++)if(v.context===i[S]){f.lanes|=a,v=f.alternate,v!==null&&(v.lanes|=a),ou(f.return,a,t),l||(g=null);break e}f=v.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(s(341));g.lanes|=a,f=g.alternate,f!==null&&(f.lanes|=a),ou(g,a,t),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===t){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function Vs(t,i,a,l){t=null;for(var u=i,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var v=u.type;Ft(u.pendingProps.value,g.value)||(t!==null?t.push(v):t=[v])}}else if(u===se.current){if(g=u.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(ya):t=[ya])}u=u.return}t!==null&&lu(i,t,a,l),i.flags|=262144}function No(t){for(t=t.firstContext;t!==null;){if(!Ft(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ji(t){Zi=t,Un=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function xt(t){return pg(Zi,t)}function Ao(t,i){return Zi===null&&Ji(t),pg(t,i)}function pg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Un===null){if(t===null)throw Error(s(308));Un=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Un=Un.next=i;return a}var ES=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},SS=r.unstable_scheduleCallback,TS=r.unstable_NormalPriority,ht={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cu(){return{controller:new ES,data:new Map,refCount:0}}function Ys(t){t.refCount--,t.refCount===0&&SS(TS,function(){t.controller.abort()})}var $s=null,uu=0,jr=0,Pr=null;function CS(t,i){if($s===null){var a=$s=[];uu=0,jr=hf(),Pr={status:"pending",value:void 0,then:function(l){a.push(l)}}}return uu++,i.then(gg,gg),i}function gg(){if(--uu===0&&$s!==null){Pr!==null&&(Pr.status="fulfilled");var t=$s;$s=null,jr=0,Pr=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function wS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var u=0;u<a.length;u++)(0,a[u])(i)},function(u){for(l.status="rejected",l.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),l}var mg=M.S;M.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&CS(t,i),mg!==null&&mg(t,i)};var er=k(null);function fu(){var t=er.current;return t!==null?t:We.pooledCache}function xo(t,i){i===null?q(er,er.current):q(er,i.pool)}function vg(){var t=fu();return t===null?null:{parent:ht._currentValue,pool:t}}var Fs=Error(s(460)),_g=Error(s(474)),Io=Error(s(542)),du={then:function(){}};function yg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Mo(){}function bg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Mo,Mo),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Sg(t),t;default:if(typeof i.status=="string")i.then(Mo,Mo);else{if(t=We,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var u=i;u.status="fulfilled",u.value=l}},function(l){if(i.status==="pending"){var u=i;u.status="rejected",u.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Sg(t),t}throw Qs=i,Fs}}var Qs=null;function Eg(){if(Qs===null)throw Error(s(459));var t=Qs;return Qs=null,t}function Sg(t){if(t===Fs||t===Io)throw Error(s(483))}var ai=!1;function hu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function oi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function li(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ze&2)!==0){var u=l.pending;return u===null?i.next=i:(i.next=u.next,u.next=i),l.pending=i,i=wo(t),lg(t,null,a),i}return Co(t,l,i,a),wo(t)}function Ws(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,gp(t,a)}}function gu(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?u=f=g:f=f.next=g,a=a.next}while(a!==null);f===null?u=f=i:f=f.next=i}else u=f=i;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var mu=!1;function Xs(){if(mu){var t=Pr;if(t!==null)throw t}}function Ks(t,i,a,l){mu=!1;var u=t.updateQueue;ai=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var S=v,D=S.next;S.next=null,g===null?f=D:g.next=D,g=S;var j=t.alternate;j!==null&&(j=j.updateQueue,v=j.lastBaseUpdate,v!==g&&(v===null?j.firstBaseUpdate=D:v.next=D,j.lastBaseUpdate=S))}if(f!==null){var H=u.baseState;g=0,j=D=S=null,v=f;do{var A=v.lane&-536870913,x=A!==v.lane;if(x?(Ie&A)===A:(l&A)===A){A!==0&&A===jr&&(mu=!0),j!==null&&(j=j.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var fe=t,oe=v;A=i;var Ve=a;switch(oe.tag){case 1:if(fe=oe.payload,typeof fe=="function"){H=fe.call(Ve,H,A);break e}H=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=oe.payload,A=typeof fe=="function"?fe.call(Ve,H,A):fe,A==null)break e;H=_({},H,A);break e;case 2:ai=!0}}A=v.callback,A!==null&&(t.flags|=64,x&&(t.flags|=8192),x=u.callbacks,x===null?u.callbacks=[A]:x.push(A))}else x={lane:A,tag:v.tag,payload:v.payload,callback:v.callback,next:null},j===null?(D=j=x,S=H):j=j.next=x,g|=A;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;x=v,v=x.next,x.next=null,u.lastBaseUpdate=x,u.shared.pending=null}}while(!0);j===null&&(S=H),u.baseState=S,u.firstBaseUpdate=D,u.lastBaseUpdate=j,f===null&&(u.shared.lanes=0),mi|=g,t.lanes=g,t.memoizedState=H}}function Tg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Cg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Tg(a[t],i)}var zr=k(null),ko=k(0);function wg(t,i){t=Vn,q(ko,t),q(zr,i),Vn=t|i.baseLanes}function vu(){q(ko,Vn),q(zr,zr.current)}function _u(){Vn=ko.current,G(zr),G(ko)}var ci=0,ye=null,qe=null,ft=null,Lo=!1,Hr=!1,tr=!1,Uo=0,Zs=0,Br=null,OS=0;function ct(){throw Error(s(321))}function yu(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Ft(t[a],i[a]))return!1;return!0}function bu(t,i,a,l,u,f){return ci=f,ye=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=t===null||t.memoizedState===null?lm:cm,tr=!1,f=a(l,u),tr=!1,Hr&&(f=Rg(i,a,l,u)),Og(t),f}function Og(t){M.H=qo;var i=qe!==null&&qe.next!==null;if(ci=0,ft=qe=ye=null,Lo=!1,Zs=0,Br=null,i)throw Error(s(300));t===null||_t||(t=t.dependencies,t!==null&&No(t)&&(_t=!0))}function Rg(t,i,a,l){ye=t;var u=0;do{if(Hr&&(Br=null),Zs=0,Hr=!1,25<=u)throw Error(s(301));if(u+=1,ft=qe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}M.H=MS,f=i(a,l)}while(Hr);return f}function RS(){var t=M.H,i=t.useState()[0];return i=typeof i.then=="function"?Js(i):i,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(ye.flags|=1024),i}function Eu(){var t=Uo!==0;return Uo=0,t}function Su(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Tu(t){if(Lo){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Lo=!1}ci=0,ft=qe=ye=null,Hr=!1,Zs=Uo=0,Br=null}function zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?ye.memoizedState=ft=t:ft=ft.next=t,ft}function dt(){if(qe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var i=ft===null?ye.memoizedState:ft.next;if(i!==null)ft=i,qe=t;else{if(t===null)throw ye.alternate===null?Error(s(467)):Error(s(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},ft===null?ye.memoizedState=ft=t:ft=ft.next=t}return ft}function Cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Js(t){var i=Zs;return Zs+=1,Br===null&&(Br=[]),t=bg(Br,t,i),i=ye,(ft===null?i.memoizedState:ft.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?lm:cm),t}function jo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Js(t);if(t.$$typeof===Q)return xt(t)}throw Error(s(438,String(t)))}function wu(t){var i=null,a=ye.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=ye.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(u){return u.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Cu(),ye.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=tt;return i.index++,a}function Pn(t,i){return typeof i=="function"?i(t):i}function Po(t){var i=dt();return Ou(i,qe,t)}function Ou(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var u=t.baseQueue,f=l.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}i.baseQueue=u=f,l.pending=null}if(f=t.baseState,u===null)t.memoizedState=f;else{i=u.next;var v=g=null,S=null,D=i,j=!1;do{var H=D.lane&-536870913;if(H!==D.lane?(Ie&H)===H:(ci&H)===H){var A=D.revertLane;if(A===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),H===jr&&(j=!0);else if((ci&A)===A){D=D.next,A===jr&&(j=!0);continue}else H={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},S===null?(v=S=H,g=f):S=S.next=H,ye.lanes|=A,mi|=A;H=D.action,tr&&a(f,H),f=D.hasEagerState?D.eagerState:a(f,H)}else A={lane:H,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},S===null?(v=S=A,g=f):S=S.next=A,ye.lanes|=H,mi|=H;D=D.next}while(D!==null&&D!==i);if(S===null?g=f:S.next=v,!Ft(f,t.memoizedState)&&(_t=!0,j&&(a=Pr,a!==null)))throw a;t.memoizedState=f,t.baseState=g,t.baseQueue=S,l.lastRenderedState=f}return u===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ru(t){var i=dt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,u=a.pending,f=i.memoizedState;if(u!==null){a.pending=null;var g=u=u.next;do f=t(f,g.action),g=g.next;while(g!==u);Ft(f,i.memoizedState)||(_t=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function Dg(t,i,a){var l=ye,u=dt(),f=Ue;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var g=!Ft((qe||u).memoizedState,a);g&&(u.memoizedState=a,_t=!0),u=u.queue;var v=xg.bind(null,l,u,t);if(ea(2048,8,v,[t]),u.getSnapshot!==i||g||ft!==null&&ft.memoizedState.tag&1){if(l.flags|=2048,qr(9,zo(),Ag.bind(null,l,u,a,i),null),We===null)throw Error(s(349));f||(ci&124)!==0||Ng(l,i,a)}return a}function Ng(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=ye.updateQueue,i===null?(i=Cu(),ye.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Ag(t,i,a,l){i.value=a,i.getSnapshot=l,Ig(i)&&Mg(t)}function xg(t,i,a){return a(function(){Ig(i)&&Mg(t)})}function Ig(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Ft(t,a)}catch{return!0}}function Mg(t){var i=Mr(t,2);i!==null&&Jt(i,t,2)}function Du(t){var i=zt();if(typeof t=="function"){var a=t;if(t=a(),tr){ni(!0);try{a()}finally{ni(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:t},i}function kg(t,i,a,l){return t.baseState=a,Ou(t,qe,typeof l=="function"?l:Pn)}function DS(t,i,a,l,u){if(Bo(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};M.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,Lg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Lg(t,i){var a=i.action,l=i.payload,u=t.state;if(i.isTransition){var f=M.T,g={};M.T=g;try{var v=a(u,l),S=M.S;S!==null&&S(g,v),Ug(t,i,v)}catch(D){Nu(t,i,D)}finally{M.T=f}}else try{f=a(u,l),Ug(t,i,f)}catch(D){Nu(t,i,D)}}function Ug(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){jg(t,i,l)},function(l){return Nu(t,i,l)}):jg(t,i,a)}function jg(t,i,a){i.status="fulfilled",i.value=a,Pg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Lg(t,a)))}function Nu(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Pg(i),i=i.next;while(i!==l)}t.action=null}function Pg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function zg(t,i){return i}function Hg(t,i){if(Ue){var a=We.formState;if(a!==null){e:{var l=ye;if(Ue){if(it){t:{for(var u=it,f=Tn;u.nodeType!==8;){if(!f){u=null;break t}if(u=gn(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){it=gn(u.nextSibling),l=u.data==="F!";break e}}Ki(l)}l=!1}l&&(i=a[0])}}return a=zt(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:i},a.queue=l,a=sm.bind(null,ye,l),l.dispatch=a,l=Du(!1),f=ku.bind(null,ye,!1,l.queue),l=zt(),u={state:i,dispatch:null,action:t,pending:null},l.queue=u,a=DS.bind(null,ye,u,f,a),u.dispatch=a,l.memoizedState=t,[i,a,!1]}function Bg(t){var i=dt();return qg(i,qe,t)}function qg(t,i,a){if(i=Ou(t,i,zg)[0],t=Po(Pn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Js(i)}catch(g){throw g===Fs?Io:g}else l=i;i=dt();var u=i.queue,f=u.dispatch;return a!==i.memoizedState&&(ye.flags|=2048,qr(9,zo(),NS.bind(null,u,a),null)),[l,f,t]}function NS(t,i){t.action=i}function Gg(t){var i=dt(),a=qe;if(a!==null)return qg(i,a,t);dt(),i=i.memoizedState,a=dt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function qr(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=ye.updateQueue,i===null&&(i=Cu(),ye.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function zo(){return{destroy:void 0,resource:void 0}}function Vg(){return dt().memoizedState}function Ho(t,i,a,l){var u=zt();l=l===void 0?null:l,ye.flags|=t,u.memoizedState=qr(1|i,zo(),a,l)}function ea(t,i,a,l){var u=dt();l=l===void 0?null:l;var f=u.memoizedState.inst;qe!==null&&l!==null&&yu(l,qe.memoizedState.deps)?u.memoizedState=qr(i,f,a,l):(ye.flags|=t,u.memoizedState=qr(1|i,f,a,l))}function Yg(t,i){Ho(8390656,8,t,i)}function $g(t,i){ea(2048,8,t,i)}function Fg(t,i){return ea(4,2,t,i)}function Qg(t,i){return ea(4,4,t,i)}function Wg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Xg(t,i,a){a=a!=null?a.concat([t]):null,ea(4,4,Wg.bind(null,i,t),a)}function Au(){}function Kg(t,i){var a=dt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&yu(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Zg(t,i){var a=dt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&yu(i,l[1]))return l[0];if(l=t(),tr){ni(!0);try{t()}finally{ni(!1)}}return a.memoizedState=[l,i],l}function xu(t,i,a){return a===void 0||(ci&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=tv(),ye.lanes|=t,mi|=t,a)}function Jg(t,i,a,l){return Ft(a,i)?a:zr.current!==null?(t=xu(t,a,l),Ft(t,i)||(_t=!0),t):(ci&42)===0?(_t=!0,t.memoizedState=a):(t=tv(),ye.lanes|=t,mi|=t,i)}function em(t,i,a,l,u){var f=V.p;V.p=f!==0&&8>f?f:8;var g=M.T,v={};M.T=v,ku(t,!1,i,a);try{var S=u(),D=M.S;if(D!==null&&D(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var j=wS(S,l);ta(t,i,j,Zt(t))}else ta(t,i,l,Zt(t))}catch(H){ta(t,i,{then:function(){},status:"rejected",reason:H},Zt())}finally{V.p=f,M.T=g}}function AS(){}function Iu(t,i,a,l){if(t.tag!==5)throw Error(s(476));var u=tm(t).queue;em(t,u,i,ie,a===null?AS:function(){return nm(t),a(l)})}function tm(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:ie},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function nm(t){var i=tm(t).next.queue;ta(t,i,{},Zt())}function Mu(){return xt(ya)}function im(){return dt().memoizedState}function rm(){return dt().memoizedState}function xS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Zt();t=oi(a);var l=li(i,t,a);l!==null&&(Jt(l,i,a),Ws(l,i,a)),i={cache:cu()},t.payload=i;return}i=i.return}}function IS(t,i,a){var l=Zt();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bo(t)?am(i,a):(a=Jc(t,i,a,l),a!==null&&(Jt(a,t,l),om(a,i,l)))}function sm(t,i,a){var l=Zt();ta(t,i,a,l)}function ta(t,i,a,l){var u={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bo(t))am(i,u);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var g=i.lastRenderedState,v=f(g,a);if(u.hasEagerState=!0,u.eagerState=v,Ft(v,g))return Co(t,i,u,0),We===null&&To(),!1}catch{}finally{}if(a=Jc(t,i,u,l),a!==null)return Jt(a,t,l),om(a,i,l),!0}return!1}function ku(t,i,a,l){if(l={lane:2,revertLane:hf(),action:l,hasEagerState:!1,eagerState:null,next:null},Bo(t)){if(i)throw Error(s(479))}else i=Jc(t,a,l,2),i!==null&&Jt(i,t,2)}function Bo(t){var i=t.alternate;return t===ye||i!==null&&i===ye}function am(t,i){Hr=Lo=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function om(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,gp(t,a)}}var qo={readContext:xt,use:jo,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct},lm={readContext:xt,use:jo,useCallback:function(t,i){return zt().memoizedState=[t,i===void 0?null:i],t},useContext:xt,useEffect:Yg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Ho(4194308,4,Wg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Ho(4194308,4,t,i)},useInsertionEffect:function(t,i){Ho(4,2,t,i)},useMemo:function(t,i){var a=zt();i=i===void 0?null:i;var l=t();if(tr){ni(!0);try{t()}finally{ni(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=zt();if(a!==void 0){var u=a(i);if(tr){ni(!0);try{a(i)}finally{ni(!1)}}}else u=i;return l.memoizedState=l.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},l.queue=t,t=t.dispatch=IS.bind(null,ye,t),[l.memoizedState,t]},useRef:function(t){var i=zt();return t={current:t},i.memoizedState=t},useState:function(t){t=Du(t);var i=t.queue,a=sm.bind(null,ye,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Au,useDeferredValue:function(t,i){var a=zt();return xu(a,t,i)},useTransition:function(){var t=Du(!1);return t=em.bind(null,ye,t.queue,!0,!1),zt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=ye,u=zt();if(Ue){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),We===null)throw Error(s(349));(Ie&124)!==0||Ng(l,i,a)}u.memoizedState=a;var f={value:a,getSnapshot:i};return u.queue=f,Yg(xg.bind(null,l,f,t),[t]),l.flags|=2048,qr(9,zo(),Ag.bind(null,l,f,a,i),null),a},useId:function(){var t=zt(),i=We.identifierPrefix;if(Ue){var a=Ln,l=kn;a=(l&~(1<<32-$t(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Uo++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=OS++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Mu,useFormState:Hg,useActionState:Hg,useOptimistic:function(t){var i=zt();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ku.bind(null,ye,!0,a),a.dispatch=i,[t,i]},useMemoCache:wu,useCacheRefresh:function(){return zt().memoizedState=xS.bind(null,ye)}},cm={readContext:xt,use:jo,useCallback:Kg,useContext:xt,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Fg,useLayoutEffect:Qg,useMemo:Zg,useReducer:Po,useRef:Vg,useState:function(){return Po(Pn)},useDebugValue:Au,useDeferredValue:function(t,i){var a=dt();return Jg(a,qe.memoizedState,t,i)},useTransition:function(){var t=Po(Pn)[0],i=dt().memoizedState;return[typeof t=="boolean"?t:Js(t),i]},useSyncExternalStore:Dg,useId:im,useHostTransitionStatus:Mu,useFormState:Bg,useActionState:Bg,useOptimistic:function(t,i){var a=dt();return kg(a,qe,t,i)},useMemoCache:wu,useCacheRefresh:rm},MS={readContext:xt,use:jo,useCallback:Kg,useContext:xt,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Fg,useLayoutEffect:Qg,useMemo:Zg,useReducer:Ru,useRef:Vg,useState:function(){return Ru(Pn)},useDebugValue:Au,useDeferredValue:function(t,i){var a=dt();return qe===null?xu(a,t,i):Jg(a,qe.memoizedState,t,i)},useTransition:function(){var t=Ru(Pn)[0],i=dt().memoizedState;return[typeof t=="boolean"?t:Js(t),i]},useSyncExternalStore:Dg,useId:im,useHostTransitionStatus:Mu,useFormState:Gg,useActionState:Gg,useOptimistic:function(t,i){var a=dt();return qe!==null?kg(a,qe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:wu,useCacheRefresh:rm},Gr=null,na=0;function Go(t){var i=na;return na+=1,Gr===null&&(Gr=[]),bg(Gr,t,i)}function ia(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Vo(t,i){throw i.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function um(t){var i=t._init;return i(t._payload)}function fm(t){function i(w,C){if(t){var R=w.deletions;R===null?(w.deletions=[C],w.flags|=16):R.push(C)}}function a(w,C){if(!t)return null;for(;C!==null;)i(w,C),C=C.sibling;return null}function l(w){for(var C=new Map;w!==null;)w.key!==null?C.set(w.key,w):C.set(w.index,w),w=w.sibling;return C}function u(w,C){return w=Mn(w,C),w.index=0,w.sibling=null,w}function f(w,C,R){return w.index=R,t?(R=w.alternate,R!==null?(R=R.index,R<C?(w.flags|=67108866,C):R):(w.flags|=67108866,C)):(w.flags|=1048576,C)}function g(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function v(w,C,R,P){return C===null||C.tag!==6?(C=tu(R,w.mode,P),C.return=w,C):(C=u(C,R),C.return=w,C)}function S(w,C,R,P){var ee=R.type;return ee===N?j(w,C,R.props.children,P,R.key):C!==null&&(C.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===he&&um(ee)===C.type)?(C=u(C,R.props),ia(C,R),C.return=w,C):(C=Oo(R.type,R.key,R.props,null,w.mode,P),ia(C,R),C.return=w,C)}function D(w,C,R,P){return C===null||C.tag!==4||C.stateNode.containerInfo!==R.containerInfo||C.stateNode.implementation!==R.implementation?(C=nu(R,w.mode,P),C.return=w,C):(C=u(C,R.children||[]),C.return=w,C)}function j(w,C,R,P,ee){return C===null||C.tag!==7?(C=Fi(R,w.mode,P,ee),C.return=w,C):(C=u(C,R),C.return=w,C)}function H(w,C,R){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=tu(""+C,w.mode,R),C.return=w,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case T:return R=Oo(C.type,C.key,C.props,null,w.mode,R),ia(R,C),R.return=w,R;case O:return C=nu(C,w.mode,R),C.return=w,C;case he:var P=C._init;return C=P(C._payload),H(w,C,R)}if(xe(C)||Re(C))return C=Fi(C,w.mode,R,null),C.return=w,C;if(typeof C.then=="function")return H(w,Go(C),R);if(C.$$typeof===Q)return H(w,Ao(w,C),R);Vo(w,C)}return null}function A(w,C,R,P){var ee=C!==null?C.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ee!==null?null:v(w,C,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return R.key===ee?S(w,C,R,P):null;case O:return R.key===ee?D(w,C,R,P):null;case he:return ee=R._init,R=ee(R._payload),A(w,C,R,P)}if(xe(R)||Re(R))return ee!==null?null:j(w,C,R,P,null);if(typeof R.then=="function")return A(w,C,Go(R),P);if(R.$$typeof===Q)return A(w,C,Ao(w,R),P);Vo(w,R)}return null}function x(w,C,R,P,ee){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return w=w.get(R)||null,v(C,w,""+P,ee);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case T:return w=w.get(P.key===null?R:P.key)||null,S(C,w,P,ee);case O:return w=w.get(P.key===null?R:P.key)||null,D(C,w,P,ee);case he:var Ee=P._init;return P=Ee(P._payload),x(w,C,R,P,ee)}if(xe(P)||Re(P))return w=w.get(R)||null,j(C,w,P,ee,null);if(typeof P.then=="function")return x(w,C,R,Go(P),ee);if(P.$$typeof===Q)return x(w,C,R,Ao(C,P),ee);Vo(C,P)}return null}function fe(w,C,R,P){for(var ee=null,Ee=null,re=C,ce=C=0,bt=null;re!==null&&ce<R.length;ce++){re.index>ce?(bt=re,re=null):bt=re.sibling;var Me=A(w,re,R[ce],P);if(Me===null){re===null&&(re=bt);break}t&&re&&Me.alternate===null&&i(w,re),C=f(Me,C,ce),Ee===null?ee=Me:Ee.sibling=Me,Ee=Me,re=bt}if(ce===R.length)return a(w,re),Ue&&Wi(w,ce),ee;if(re===null){for(;ce<R.length;ce++)re=H(w,R[ce],P),re!==null&&(C=f(re,C,ce),Ee===null?ee=re:Ee.sibling=re,Ee=re);return Ue&&Wi(w,ce),ee}for(re=l(re);ce<R.length;ce++)bt=x(re,w,ce,R[ce],P),bt!==null&&(t&&bt.alternate!==null&&re.delete(bt.key===null?ce:bt.key),C=f(bt,C,ce),Ee===null?ee=bt:Ee.sibling=bt,Ee=bt);return t&&re.forEach(function(wi){return i(w,wi)}),Ue&&Wi(w,ce),ee}function oe(w,C,R,P){if(R==null)throw Error(s(151));for(var ee=null,Ee=null,re=C,ce=C=0,bt=null,Me=R.next();re!==null&&!Me.done;ce++,Me=R.next()){re.index>ce?(bt=re,re=null):bt=re.sibling;var wi=A(w,re,Me.value,P);if(wi===null){re===null&&(re=bt);break}t&&re&&wi.alternate===null&&i(w,re),C=f(wi,C,ce),Ee===null?ee=wi:Ee.sibling=wi,Ee=wi,re=bt}if(Me.done)return a(w,re),Ue&&Wi(w,ce),ee;if(re===null){for(;!Me.done;ce++,Me=R.next())Me=H(w,Me.value,P),Me!==null&&(C=f(Me,C,ce),Ee===null?ee=Me:Ee.sibling=Me,Ee=Me);return Ue&&Wi(w,ce),ee}for(re=l(re);!Me.done;ce++,Me=R.next())Me=x(re,w,ce,Me.value,P),Me!==null&&(t&&Me.alternate!==null&&re.delete(Me.key===null?ce:Me.key),C=f(Me,C,ce),Ee===null?ee=Me:Ee.sibling=Me,Ee=Me);return t&&re.forEach(function(kT){return i(w,kT)}),Ue&&Wi(w,ce),ee}function Ve(w,C,R,P){if(typeof R=="object"&&R!==null&&R.type===N&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case T:e:{for(var ee=R.key;C!==null;){if(C.key===ee){if(ee=R.type,ee===N){if(C.tag===7){a(w,C.sibling),P=u(C,R.props.children),P.return=w,w=P;break e}}else if(C.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===he&&um(ee)===C.type){a(w,C.sibling),P=u(C,R.props),ia(P,R),P.return=w,w=P;break e}a(w,C);break}else i(w,C);C=C.sibling}R.type===N?(P=Fi(R.props.children,w.mode,P,R.key),P.return=w,w=P):(P=Oo(R.type,R.key,R.props,null,w.mode,P),ia(P,R),P.return=w,w=P)}return g(w);case O:e:{for(ee=R.key;C!==null;){if(C.key===ee)if(C.tag===4&&C.stateNode.containerInfo===R.containerInfo&&C.stateNode.implementation===R.implementation){a(w,C.sibling),P=u(C,R.children||[]),P.return=w,w=P;break e}else{a(w,C);break}else i(w,C);C=C.sibling}P=nu(R,w.mode,P),P.return=w,w=P}return g(w);case he:return ee=R._init,R=ee(R._payload),Ve(w,C,R,P)}if(xe(R))return fe(w,C,R,P);if(Re(R)){if(ee=Re(R),typeof ee!="function")throw Error(s(150));return R=ee.call(R),oe(w,C,R,P)}if(typeof R.then=="function")return Ve(w,C,Go(R),P);if(R.$$typeof===Q)return Ve(w,C,Ao(w,R),P);Vo(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,C!==null&&C.tag===6?(a(w,C.sibling),P=u(C,R),P.return=w,w=P):(a(w,C),P=tu(R,w.mode,P),P.return=w,w=P),g(w)):a(w,C)}return function(w,C,R,P){try{na=0;var ee=Ve(w,C,R,P);return Gr=null,ee}catch(re){if(re===Fs||re===Io)throw re;var Ee=Qt(29,re,null,w.mode);return Ee.lanes=P,Ee.return=w,Ee}finally{}}}var Vr=fm(!0),dm=fm(!1),on=k(null),Cn=null;function ui(t){var i=t.alternate;q(pt,pt.current&1),q(on,t),Cn===null&&(i===null||zr.current!==null||i.memoizedState!==null)&&(Cn=t)}function hm(t){if(t.tag===22){if(q(pt,pt.current),q(on,t),Cn===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Cn=t)}}else fi()}function fi(){q(pt,pt.current),q(on,on.current)}function zn(t){G(on),Cn===t&&(Cn=null),G(pt)}var pt=k(0);function Yo(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||wf(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Lu(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:_({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Uu={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Zt(),u=oi(l);u.payload=i,a!=null&&(u.callback=a),i=li(t,u,l),i!==null&&(Jt(i,t,l),Ws(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Zt(),u=oi(l);u.tag=1,u.payload=i,a!=null&&(u.callback=a),i=li(t,u,l),i!==null&&(Jt(i,t,l),Ws(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Zt(),l=oi(a);l.tag=2,i!=null&&(l.callback=i),i=li(t,l,a),i!==null&&(Jt(i,t,a),Ws(i,t,a))}};function pm(t,i,a,l,u,f,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,g):i.prototype&&i.prototype.isPureReactComponent?!zs(a,l)||!zs(u,f):!0}function gm(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Uu.enqueueReplaceState(i,i.state,null)}function nr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=_({},a));for(var u in t)a[u]===void 0&&(a[u]=t[u])}return a}var $o=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function mm(t){$o(t)}function vm(t){console.error(t)}function _m(t){$o(t)}function Fo(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function ym(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function ju(t,i,a){return a=oi(a),a.tag=3,a.payload={element:null},a.callback=function(){Fo(t,i)},a}function bm(t){return t=oi(t),t.tag=3,t}function Em(t,i,a,l){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var f=l.value;t.payload=function(){return u(f)},t.callback=function(){ym(i,a,l)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){ym(i,a,l),typeof u!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function kS(t,i,a,l,u){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Vs(i,a,u,!0),a=on.current,a!==null){switch(a.tag){case 13:return Cn===null?lf():a.alternate===null&&rt===0&&(rt=3),a.flags&=-257,a.flags|=65536,a.lanes=u,l===du?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),uf(t,l,u)),!1;case 22:return a.flags|=65536,l===du?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),uf(t,l,u)),!1}throw Error(s(435,a.tag))}return uf(t,l,u),lf(),!1}if(Ue)return i=on.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=u,l!==su&&(t=Error(s(422),{cause:l}),Gs(nn(t,a)))):(l!==su&&(i=Error(s(423),{cause:l}),Gs(nn(i,a))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,l=nn(l,a),u=ju(t.stateNode,l,u),gu(t,u),rt!==4&&(rt=2)),!1;var f=Error(s(520),{cause:l});if(f=nn(f,a),ua===null?ua=[f]:ua.push(f),rt!==4&&(rt=2),i===null)return!0;l=nn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=u&-u,a.lanes|=t,t=ju(a.stateNode,l,t),gu(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(vi===null||!vi.has(f))))return a.flags|=65536,u&=-u,a.lanes|=u,u=bm(u),Em(u,t,a,l),gu(a,u),!1}a=a.return}while(a!==null);return!1}var Sm=Error(s(461)),_t=!1;function wt(t,i,a,l){i.child=t===null?dm(i,null,a,l):Vr(i,t.child,a,l)}function Tm(t,i,a,l,u){a=a.render;var f=i.ref;if("ref"in l){var g={};for(var v in l)v!=="ref"&&(g[v]=l[v])}else g=l;return Ji(i),l=bu(t,i,a,g,f,u),v=Eu(),t!==null&&!_t?(Su(t,i,u),Hn(t,i,u)):(Ue&&v&&iu(i),i.flags|=1,wt(t,i,l,u),i.child)}function Cm(t,i,a,l,u){if(t===null){var f=a.type;return typeof f=="function"&&!eu(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,wm(t,i,f,l,u)):(t=Oo(a.type,null,l,i,i.mode,u),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Yu(t,u)){var g=f.memoizedProps;if(a=a.compare,a=a!==null?a:zs,a(g,l)&&t.ref===i.ref)return Hn(t,i,u)}return i.flags|=1,t=Mn(f,l),t.ref=i.ref,t.return=i,i.child=t}function wm(t,i,a,l,u){if(t!==null){var f=t.memoizedProps;if(zs(f,l)&&t.ref===i.ref)if(_t=!1,i.pendingProps=l=f,Yu(t,u))(t.flags&131072)!==0&&(_t=!0);else return i.lanes=t.lanes,Hn(t,i,u)}return Pu(t,i,a,l,u)}function Om(t,i,a){var l=i.pendingProps,u=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(u=i.child=t.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return Rm(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&xo(i,f!==null?f.cachePool:null),f!==null?wg(i,f):vu(),hm(i);else return i.lanes=i.childLanes=536870912,Rm(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(xo(i,f.cachePool),wg(i,f),fi(),i.memoizedState=null):(t!==null&&xo(i,null),vu(),fi());return wt(t,i,u,a),i.child}function Rm(t,i,a,l){var u=fu();return u=u===null?null:{parent:ht._currentValue,pool:u},i.memoizedState={baseLanes:a,cachePool:u},t!==null&&xo(i,null),vu(),hm(i),t!==null&&Vs(t,i,l,!0),null}function Qo(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Pu(t,i,a,l,u){return Ji(i),a=bu(t,i,a,l,void 0,u),l=Eu(),t!==null&&!_t?(Su(t,i,u),Hn(t,i,u)):(Ue&&l&&iu(i),i.flags|=1,wt(t,i,a,u),i.child)}function Dm(t,i,a,l,u,f){return Ji(i),i.updateQueue=null,a=Rg(i,l,a,u),Og(t),l=Eu(),t!==null&&!_t?(Su(t,i,f),Hn(t,i,f)):(Ue&&l&&iu(i),i.flags|=1,wt(t,i,a,f),i.child)}function Nm(t,i,a,l,u){if(Ji(i),i.stateNode===null){var f=kr,g=a.contextType;typeof g=="object"&&g!==null&&(f=xt(g)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Uu,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},hu(i),g=a.contextType,f.context=typeof g=="object"&&g!==null?xt(g):kr,f.state=i.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Lu(i,a,g,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&Uu.enqueueReplaceState(f,f.state,null),Ks(i,l,f,u),Xs(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var v=i.memoizedProps,S=nr(a,v);f.props=S;var D=f.context,j=a.contextType;g=kr,typeof j=="object"&&j!==null&&(g=xt(j));var H=a.getDerivedStateFromProps;j=typeof H=="function"||typeof f.getSnapshotBeforeUpdate=="function",v=i.pendingProps!==v,j||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v||D!==g)&&gm(i,f,l,g),ai=!1;var A=i.memoizedState;f.state=A,Ks(i,l,f,u),Xs(),D=i.memoizedState,v||A!==D||ai?(typeof H=="function"&&(Lu(i,a,H,l),D=i.memoizedState),(S=ai||pm(i,a,S,l,A,D,g))?(j||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=D),f.props=l,f.state=D,f.context=g,l=S):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,pu(t,i),g=i.memoizedProps,j=nr(a,g),f.props=j,H=i.pendingProps,A=f.context,D=a.contextType,S=kr,typeof D=="object"&&D!==null&&(S=xt(D)),v=a.getDerivedStateFromProps,(D=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==H||A!==S)&&gm(i,f,l,S),ai=!1,A=i.memoizedState,f.state=A,Ks(i,l,f,u),Xs();var x=i.memoizedState;g!==H||A!==x||ai||t!==null&&t.dependencies!==null&&No(t.dependencies)?(typeof v=="function"&&(Lu(i,a,v,l),x=i.memoizedState),(j=ai||pm(i,a,j,l,A,x,S)||t!==null&&t.dependencies!==null&&No(t.dependencies))?(D||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,x,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,x,S)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=x),f.props=l,f.state=x,f.context=S,l=j):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&A===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Qo(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=Vr(i,t.child,null,u),i.child=Vr(i,null,a,u)):wt(t,i,a,u),i.memoizedState=f.state,t=i.child):t=Hn(t,i,u),t}function Am(t,i,a,l){return qs(),i.flags|=256,wt(t,i,a,l),i.child}var zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hu(t){return{baseLanes:t,cachePool:vg()}}function Bu(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ln),t}function xm(t,i,a){var l=i.pendingProps,u=!1,f=(i.flags&128)!==0,g;if((g=f)||(g=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),g&&(u=!0,i.flags&=-129),g=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ue){if(u?ui(i):fi(),Ue){var v=it,S;if(S=v){e:{for(S=v,v=Tn;S.nodeType!==8;){if(!v){v=null;break e}if(S=gn(S.nextSibling),S===null){v=null;break e}}v=S}v!==null?(i.memoizedState={dehydrated:v,treeContext:Qi!==null?{id:kn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},S=Qt(18,null,null,0),S.stateNode=v,S.return=i,i.child=S,kt=i,it=null,S=!0):S=!1}S||Ki(i)}if(v=i.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return wf(v)?i.lanes=32:i.lanes=536870912,null;zn(i)}return v=l.children,l=l.fallback,u?(fi(),u=i.mode,v=Wo({mode:"hidden",children:v},u),l=Fi(l,u,a,null),v.return=i,l.return=i,v.sibling=l,i.child=v,u=i.child,u.memoizedState=Hu(a),u.childLanes=Bu(t,g,a),i.memoizedState=zu,l):(ui(i),qu(i,v))}if(S=t.memoizedState,S!==null&&(v=S.dehydrated,v!==null)){if(f)i.flags&256?(ui(i),i.flags&=-257,i=Gu(t,i,a)):i.memoizedState!==null?(fi(),i.child=t.child,i.flags|=128,i=null):(fi(),u=l.fallback,v=i.mode,l=Wo({mode:"visible",children:l.children},v),u=Fi(u,v,a,null),u.flags|=2,l.return=i,u.return=i,l.sibling=u,i.child=l,Vr(i,t.child,null,a),l=i.child,l.memoizedState=Hu(a),l.childLanes=Bu(t,g,a),i.memoizedState=zu,i=u);else if(ui(i),wf(v)){if(g=v.nextSibling&&v.nextSibling.dataset,g)var D=g.dgst;g=D,l=Error(s(419)),l.stack="",l.digest=g,Gs({value:l,source:null,stack:null}),i=Gu(t,i,a)}else if(_t||Vs(t,i,a,!1),g=(a&t.childLanes)!==0,_t||g){if(g=We,g!==null&&(l=a&-a,l=(l&42)!==0?1:wc(l),l=(l&(g.suspendedLanes|a))!==0?0:l,l!==0&&l!==S.retryLane))throw S.retryLane=l,Mr(t,l),Jt(g,t,l),Sm;v.data==="$?"||lf(),i=Gu(t,i,a)}else v.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=S.treeContext,it=gn(v.nextSibling),kt=i,Ue=!0,Xi=null,Tn=!1,t!==null&&(sn[an++]=kn,sn[an++]=Ln,sn[an++]=Qi,kn=t.id,Ln=t.overflow,Qi=i),i=qu(i,l.children),i.flags|=4096);return i}return u?(fi(),u=l.fallback,v=i.mode,S=t.child,D=S.sibling,l=Mn(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,D!==null?u=Mn(D,u):(u=Fi(u,v,a,null),u.flags|=2),u.return=i,l.return=i,l.sibling=u,i.child=l,l=u,u=i.child,v=t.child.memoizedState,v===null?v=Hu(a):(S=v.cachePool,S!==null?(D=ht._currentValue,S=S.parent!==D?{parent:D,pool:D}:S):S=vg(),v={baseLanes:v.baseLanes|a,cachePool:S}),u.memoizedState=v,u.childLanes=Bu(t,g,a),i.memoizedState=zu,l):(ui(i),a=t.child,t=a.sibling,a=Mn(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(g=i.deletions,g===null?(i.deletions=[t],i.flags|=16):g.push(t)),i.child=a,i.memoizedState=null,a)}function qu(t,i){return i=Wo({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Wo(t,i){return t=Qt(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Gu(t,i,a){return Vr(i,t.child,null,a),t=qu(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Im(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),ou(t.return,i,a)}function Vu(t,i,a,l,u){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=u)}function Mm(t,i,a){var l=i.pendingProps,u=l.revealOrder,f=l.tail;if(wt(t,i,l.children,a),l=pt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Im(t,a,i);else if(t.tag===19)Im(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(q(pt,l),u){case"forwards":for(a=i.child,u=null;a!==null;)t=a.alternate,t!==null&&Yo(t)===null&&(u=a),a=a.sibling;a=u,a===null?(u=i.child,i.child=null):(u=a.sibling,a.sibling=null),Vu(i,!1,u,a,f);break;case"backwards":for(a=null,u=i.child,i.child=null;u!==null;){if(t=u.alternate,t!==null&&Yo(t)===null){i.child=u;break}t=u.sibling,u.sibling=a,a=u,u=t}Vu(i,!0,a,null,f);break;case"together":Vu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Hn(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),mi|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Vs(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Mn(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Mn(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Yu(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&No(t)))}function LS(t,i,a){switch(i.tag){case 3:I(i,i.stateNode.containerInfo),si(i,ht,t.memoizedState.cache),qs();break;case 27:case 5:J(i);break;case 4:I(i,i.stateNode.containerInfo);break;case 10:si(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ui(i),i.flags|=128,null):(a&i.child.childLanes)!==0?xm(t,i,a):(ui(i),t=Hn(t,i,a),t!==null?t.sibling:null);ui(i);break;case 19:var u=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Vs(t,i,a,!1),l=(a&i.childLanes)!==0),u){if(l)return Mm(t,i,a);i.flags|=128}if(u=i.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),q(pt,pt.current),l)break;return null;case 22:case 23:return i.lanes=0,Om(t,i,a);case 24:si(i,ht,t.memoizedState.cache)}return Hn(t,i,a)}function km(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)_t=!0;else{if(!Yu(t,a)&&(i.flags&128)===0)return _t=!1,LS(t,i,a);_t=(t.flags&131072)!==0}else _t=!1,Ue&&(i.flags&1048576)!==0&&ug(i,Do,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,u=l._init;if(l=u(l._payload),i.type=l,typeof l=="function")eu(l)?(t=nr(l,t),i.tag=1,i=Nm(null,i,l,t,a)):(i.tag=0,i=Pu(null,i,l,t,a));else{if(l!=null){if(u=l.$$typeof,u===ne){i.tag=11,i=Tm(null,i,l,t,a);break e}else if(u===ge){i.tag=14,i=Cm(null,i,l,t,a);break e}}throw i=le(l)||l,Error(s(306,i,""))}}return i;case 0:return Pu(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,u=nr(l,i.pendingProps),Nm(t,i,l,u,a);case 3:e:{if(I(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;u=f.element,pu(t,i),Ks(i,l,null,a);var g=i.memoizedState;if(l=g.cache,si(i,ht,l),l!==f.cache&&lu(i,[ht],a,!0),Xs(),l=g.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:g.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Am(t,i,l,a);break e}else if(l!==u){u=nn(Error(s(424)),i),Gs(u),i=Am(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(it=gn(t.firstChild),kt=i,Ue=!0,Xi=null,Tn=!0,a=dm(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qs(),l===u){i=Hn(t,i,a);break e}wt(t,i,l,a)}i=i.child}return i;case 26:return Qo(t,i),t===null?(a=Pv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ue||(a=i.type,t=i.pendingProps,l=cl(B.current).createElement(a),l[At]=i,l[jt]=t,Rt(l,a,t),vt(l),i.stateNode=l):i.memoizedState=Pv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return J(i),t===null&&Ue&&(l=i.stateNode=Lv(i.type,i.pendingProps,B.current),kt=i,Tn=!0,u=it,bi(i.type)?(Of=u,it=gn(l.firstChild)):it=u),wt(t,i,i.pendingProps.children,a),Qo(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ue&&((u=l=it)&&(l=cT(l,i.type,i.pendingProps,Tn),l!==null?(i.stateNode=l,kt=i,it=gn(l.firstChild),Tn=!1,u=!0):u=!1),u||Ki(i)),J(i),u=i.type,f=i.pendingProps,g=t!==null?t.memoizedProps:null,l=f.children,Sf(u,f)?l=null:g!==null&&Sf(u,g)&&(i.flags|=32),i.memoizedState!==null&&(u=bu(t,i,RS,null,null,a),ya._currentValue=u),Qo(t,i),wt(t,i,l,a),i.child;case 6:return t===null&&Ue&&((t=a=it)&&(a=uT(a,i.pendingProps,Tn),a!==null?(i.stateNode=a,kt=i,it=null,t=!0):t=!1),t||Ki(i)),null;case 13:return xm(t,i,a);case 4:return I(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Vr(i,null,l,a):wt(t,i,l,a),i.child;case 11:return Tm(t,i,i.type,i.pendingProps,a);case 7:return wt(t,i,i.pendingProps,a),i.child;case 8:return wt(t,i,i.pendingProps.children,a),i.child;case 12:return wt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,si(i,i.type,l.value),wt(t,i,l.children,a),i.child;case 9:return u=i.type._context,l=i.pendingProps.children,Ji(i),u=xt(u),l=l(u),i.flags|=1,wt(t,i,l,a),i.child;case 14:return Cm(t,i,i.type,i.pendingProps,a);case 15:return wm(t,i,i.type,i.pendingProps,a);case 19:return Mm(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Wo(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Mn(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Om(t,i,a);case 24:return Ji(i),l=xt(ht),t===null?(u=fu(),u===null&&(u=We,f=cu(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=a),u=f),i.memoizedState={parent:l,cache:u},hu(i),si(i,ht,u)):((t.lanes&a)!==0&&(pu(t,i),Ks(i,null,null,a),Xs()),u=t.memoizedState,f=i.memoizedState,u.parent!==l?(u={parent:l,cache:l},i.memoizedState=u,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=u),si(i,ht,l)):(l=f.cache,si(i,ht,l),l!==u.cache&&lu(i,[ht],a,!0))),wt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Bn(t){t.flags|=4}function Lm(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Gv(i)){if(i=on.current,i!==null&&((Ie&4194048)===Ie?Cn!==null:(Ie&62914560)!==Ie&&(Ie&536870912)===0||i!==Cn))throw Qs=du,_g;t.flags|=8192}}function Xo(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?hp():536870912,t.lanes|=i,Qr|=i)}function ra(t,i){if(!Ue)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function nt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var u=t.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function US(t,i,a){var l=i.pendingProps;switch(ru(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(i),null;case 1:return nt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),jn(ht),K(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Bs(i)?Bn(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hg())),nt(i),null;case 26:return a=i.memoizedState,t===null?(Bn(i),a!==null?(nt(i),Lm(i,a)):(nt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Bn(i),nt(i),Lm(i,a)):(nt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Bn(i),nt(i),i.flags&=-16777217),null;case 27:be(i),a=B.current;var u=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Bn(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return nt(i),null}t=W.current,Bs(i)?fg(i):(t=Lv(u,l,a),i.stateNode=t,Bn(i))}return nt(i),null;case 5:if(be(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Bn(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return nt(i),null}if(t=W.current,Bs(i))fg(i);else{switch(u=cl(B.current),t){case 1:t=u.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=u.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?u.createElement("select",{is:l.is}):u.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?u.createElement(a,{is:l.is}):u.createElement(a)}}t[At]=i,t[jt]=l;e:for(u=i.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break e;for(;u.sibling===null;){if(u.return===null||u.return===i)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i.stateNode=t;e:switch(Rt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Bn(i)}}return nt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Bn(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=B.current,Bs(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,u=kt,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}t[At]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dv(t.nodeValue,a)),t||Ki(i)}else t=cl(t).createTextNode(l),t[At]=i,i.stateNode=t}return nt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=Bs(i),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(s(318));if(u=i.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[At]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;nt(i),u=!1}else u=hg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return i.flags&256?(zn(i),i):(zn(i),null)}if(zn(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Xo(i,i.updateQueue),nt(i),null;case 4:return K(),t===null&&vf(i.stateNode.containerInfo),nt(i),null;case 10:return jn(i.type),nt(i),null;case 19:if(G(pt),u=i.memoizedState,u===null)return nt(i),null;if(l=(i.flags&128)!==0,f=u.rendering,f===null)if(l)ra(u,!1);else{if(rt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Yo(t),f!==null){for(i.flags|=128,ra(u,!1),t=f.updateQueue,i.updateQueue=t,Xo(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)cg(a,t),a=a.sibling;return q(pt,pt.current&1|2),i.child}t=t.sibling}u.tail!==null&&Je()>Jo&&(i.flags|=128,l=!0,ra(u,!1),i.lanes=4194304)}else{if(!l)if(t=Yo(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Xo(i,t),ra(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Ue)return nt(i),null}else 2*Je()-u.renderingStartTime>Jo&&a!==536870912&&(i.flags|=128,l=!0,ra(u,!1),i.lanes=4194304);u.isBackwards?(f.sibling=i.child,i.child=f):(t=u.last,t!==null?t.sibling=f:i.child=f,u.last=f)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Je(),i.sibling=null,t=pt.current,q(pt,l?t&1|2:t&1),i):(nt(i),null);case 22:case 23:return zn(i),_u(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(nt(i),i.subtreeFlags&6&&(i.flags|=8192)):nt(i),a=i.updateQueue,a!==null&&Xo(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&G(er),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),jn(ht),nt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function jS(t,i){switch(ru(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return jn(ht),K(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return be(i),null;case 13:if(zn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));qs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return G(pt),null;case 4:return K(),null;case 10:return jn(i.type),null;case 22:case 23:return zn(i),_u(),t!==null&&G(er),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return jn(ht),null;case 25:return null;default:return null}}function Um(t,i){switch(ru(i),i.tag){case 3:jn(ht),K();break;case 26:case 27:case 5:be(i);break;case 4:K();break;case 13:zn(i);break;case 19:G(pt);break;case 10:jn(i.type);break;case 22:case 23:zn(i),_u(),t!==null&&G(er);break;case 24:jn(ht)}}function sa(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var u=l.next;a=u;do{if((a.tag&t)===t){l=void 0;var f=a.create,g=a.inst;l=f(),g.destroy=l}a=a.next}while(a!==u)}}catch(v){$e(i,i.return,v)}}function di(t,i,a){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&t)===t){var g=l.inst,v=g.destroy;if(v!==void 0){g.destroy=void 0,u=i;var S=a,D=v;try{D()}catch(j){$e(u,S,j)}}}l=l.next}while(l!==f)}}catch(j){$e(i,i.return,j)}}function jm(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Cg(i,a)}catch(l){$e(t,t.return,l)}}}function Pm(t,i,a){a.props=nr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){$e(t,i,l)}}function aa(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(u){$e(t,i,u)}}function wn(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(u){$e(t,i,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){$e(t,i,u)}else a.current=null}function zm(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(u){$e(t,t.return,u)}}function $u(t,i,a){try{var l=t.stateNode;rT(l,t.type,a,i),l[jt]=i}catch(u){$e(t,t.return,u)}}function Hm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&bi(t.type)||t.tag===4}function Fu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&bi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ll));else if(l!==4&&(l===27&&bi(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Qu(t,i,a),t=t.sibling;t!==null;)Qu(t,i,a),t=t.sibling}function Ko(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&bi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ko(t,i,a),t=t.sibling;t!==null;)Ko(t,i,a),t=t.sibling}function Bm(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,u=i.attributes;u.length;)i.removeAttributeNode(u[0]);Rt(i,l,a),i[At]=t,i[jt]=a}catch(f){$e(t,t.return,f)}}var qn=!1,ut=!1,Wu=!1,qm=typeof WeakSet=="function"?WeakSet:Set,yt=null;function PS(t,i){if(t=t.containerInfo,bf=gl,t=Jp(t),Fc(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var g=0,v=-1,S=-1,D=0,j=0,H=t,A=null;t:for(;;){for(var x;H!==a||u!==0&&H.nodeType!==3||(v=g+u),H!==f||l!==0&&H.nodeType!==3||(S=g+l),H.nodeType===3&&(g+=H.nodeValue.length),(x=H.firstChild)!==null;)A=H,H=x;for(;;){if(H===t)break t;if(A===a&&++D===u&&(v=g),A===f&&++j===l&&(S=g),(x=H.nextSibling)!==null)break;H=A,A=H.parentNode}H=x}a=v===-1||S===-1?null:{start:v,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ef={focusedElem:t,selectionRange:a},gl=!1,yt=i;yt!==null;)if(i=yt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,yt=t;else for(;yt!==null;){switch(i=yt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,u=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var fe=nr(a.type,u,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(fe,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(oe){$e(a,a.return,oe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Cf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,yt=t;break}yt=i.return}}function Gm(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:hi(t,a),l&4&&sa(5,a);break;case 1:if(hi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(g){$e(a,a.return,g)}else{var u=nr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(u,i,t.__reactInternalSnapshotBeforeUpdate)}catch(g){$e(a,a.return,g)}}l&64&&jm(a),l&512&&aa(a,a.return);break;case 3:if(hi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Cg(t,i)}catch(g){$e(a,a.return,g)}}break;case 27:i===null&&l&4&&Bm(a);case 26:case 5:hi(t,a),i===null&&l&4&&zm(a),l&512&&aa(a,a.return);break;case 12:hi(t,a);break;case 13:hi(t,a),l&4&&$m(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=FS.bind(null,a),fT(t,a))));break;case 22:if(l=a.memoizedState!==null||qn,!l){i=i!==null&&i.memoizedState!==null||ut,u=qn;var f=ut;qn=l,(ut=i)&&!f?pi(t,a,(a.subtreeFlags&8772)!==0):hi(t,a),qn=u,ut=f}break;case 30:break;default:hi(t,a)}}function Vm(t){var i=t.alternate;i!==null&&(t.alternate=null,Vm(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Dc(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var et=null,Ht=!1;function Gn(t,i,a){for(a=a.child;a!==null;)Ym(t,i,a),a=a.sibling}function Ym(t,i,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Rs,a)}catch{}switch(a.tag){case 26:ut||wn(a,i),Gn(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ut||wn(a,i);var l=et,u=Ht;bi(a.type)&&(et=a.stateNode,Ht=!1),Gn(t,i,a),ga(a.stateNode),et=l,Ht=u;break;case 5:ut||wn(a,i);case 6:if(l=et,u=Ht,et=null,Gn(t,i,a),et=l,Ht=u,et!==null)if(Ht)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(a.stateNode)}catch(f){$e(a,i,f)}else try{et.removeChild(a.stateNode)}catch(f){$e(a,i,f)}break;case 18:et!==null&&(Ht?(t=et,Mv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ta(t)):Mv(et,a.stateNode));break;case 4:l=et,u=Ht,et=a.stateNode.containerInfo,Ht=!0,Gn(t,i,a),et=l,Ht=u;break;case 0:case 11:case 14:case 15:ut||di(2,a,i),ut||di(4,a,i),Gn(t,i,a);break;case 1:ut||(wn(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Pm(a,i,l)),Gn(t,i,a);break;case 21:Gn(t,i,a);break;case 22:ut=(l=ut)||a.memoizedState!==null,Gn(t,i,a),ut=l;break;default:Gn(t,i,a)}}function $m(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ta(t)}catch(a){$e(i,i.return,a)}}function zS(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new qm),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new qm),i;default:throw Error(s(435,t.tag))}}function Xu(t,i){var a=zS(t);i.forEach(function(l){var u=QS.bind(null,t,l);a.has(l)||(a.add(l),l.then(u,u))})}function Wt(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l],f=t,g=i,v=g;e:for(;v!==null;){switch(v.tag){case 27:if(bi(v.type)){et=v.stateNode,Ht=!1;break e}break;case 5:et=v.stateNode,Ht=!1;break e;case 3:case 4:et=v.stateNode.containerInfo,Ht=!0;break e}v=v.return}if(et===null)throw Error(s(160));Ym(f,g,u),et=null,Ht=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Fm(i,t),i=i.sibling}var pn=null;function Fm(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Wt(i,t),Xt(t),l&4&&(di(3,t,t.return),sa(3,t),di(5,t,t.return));break;case 1:Wt(i,t),Xt(t),l&512&&(ut||a===null||wn(a,a.return)),l&64&&qn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var u=pn;if(Wt(i,t),Xt(t),l&512&&(ut||a===null||wn(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":f=u.getElementsByTagName("title")[0],(!f||f[As]||f[At]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(l),u.head.insertBefore(f,u.querySelector("head > title"))),Rt(f,l,a),f[At]=t,vt(f),l=f;break e;case"link":var g=Bv("link","href",u).get(l+(a.href||""));if(g){for(var v=0;v<g.length;v++)if(f=g[v],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(v,1);break t}}f=u.createElement(l),Rt(f,l,a),u.head.appendChild(f);break;case"meta":if(g=Bv("meta","content",u).get(l+(a.content||""))){for(v=0;v<g.length;v++)if(f=g[v],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(v,1);break t}}f=u.createElement(l),Rt(f,l,a),u.head.appendChild(f);break;default:throw Error(s(468,l))}f[At]=t,vt(f),l=f}t.stateNode=l}else qv(u,t.type,t.stateNode);else t.stateNode=Hv(u,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?qv(u,t.type,t.stateNode):Hv(u,l,t.memoizedProps)):l===null&&t.stateNode!==null&&$u(t,t.memoizedProps,a.memoizedProps)}break;case 27:Wt(i,t),Xt(t),l&512&&(ut||a===null||wn(a,a.return)),a!==null&&l&4&&$u(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Wt(i,t),Xt(t),l&512&&(ut||a===null||wn(a,a.return)),t.flags&32){u=t.stateNode;try{Or(u,"")}catch(x){$e(t,t.return,x)}}l&4&&t.stateNode!=null&&(u=t.memoizedProps,$u(t,u,a!==null?a.memoizedProps:u)),l&1024&&(Wu=!0);break;case 6:if(Wt(i,t),Xt(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(x){$e(t,t.return,x)}}break;case 3:if(dl=null,u=pn,pn=ul(i.containerInfo),Wt(i,t),pn=u,Xt(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ta(i.containerInfo)}catch(x){$e(t,t.return,x)}Wu&&(Wu=!1,Qm(t));break;case 4:l=pn,pn=ul(t.stateNode.containerInfo),Wt(i,t),Xt(t),pn=l;break;case 12:Wt(i,t),Xt(t);break;case 13:Wt(i,t),Xt(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(nf=Je()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Xu(t,l)));break;case 22:u=t.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,D=qn,j=ut;if(qn=D||u,ut=j||S,Wt(i,t),ut=j,qn=D,Xt(t),l&8192)e:for(i=t.stateNode,i._visibility=u?i._visibility&-2:i._visibility|1,u&&(a===null||S||qn||ut||ir(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){S=a=i;try{if(f=S.stateNode,u)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{v=S.stateNode;var H=S.memoizedProps.style,A=H!=null&&H.hasOwnProperty("display")?H.display:null;v.style.display=A==null||typeof A=="boolean"?"":(""+A).trim()}}catch(x){$e(S,S.return,x)}}}else if(i.tag===6){if(a===null){S=i;try{S.stateNode.nodeValue=u?"":S.memoizedProps}catch(x){$e(S,S.return,x)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Xu(t,a))));break;case 19:Wt(i,t),Xt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Xu(t,l)));break;case 30:break;case 21:break;default:Wt(i,t),Xt(t)}}function Xt(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Hm(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var u=a.stateNode,f=Fu(t);Ko(t,f,u);break;case 5:var g=a.stateNode;a.flags&32&&(Or(g,""),a.flags&=-33);var v=Fu(t);Ko(t,v,g);break;case 3:case 4:var S=a.stateNode.containerInfo,D=Fu(t);Qu(t,D,S);break;default:throw Error(s(161))}}catch(j){$e(t,t.return,j)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Qm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Qm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function hi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Gm(t,i.alternate,i),i=i.sibling}function ir(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:di(4,i,i.return),ir(i);break;case 1:wn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Pm(i,i.return,a),ir(i);break;case 27:ga(i.stateNode);case 26:case 5:wn(i,i.return),ir(i);break;case 22:i.memoizedState===null&&ir(i);break;case 30:ir(i);break;default:ir(i)}t=t.sibling}}function pi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,u=t,f=i,g=f.flags;switch(f.tag){case 0:case 11:case 15:pi(u,f,a),sa(4,f);break;case 1:if(pi(u,f,a),l=f,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(D){$e(l,l.return,D)}if(l=f,u=l.updateQueue,u!==null){var v=l.stateNode;try{var S=u.shared.hiddenCallbacks;if(S!==null)for(u.shared.hiddenCallbacks=null,u=0;u<S.length;u++)Tg(S[u],v)}catch(D){$e(l,l.return,D)}}a&&g&64&&jm(f),aa(f,f.return);break;case 27:Bm(f);case 26:case 5:pi(u,f,a),a&&l===null&&g&4&&zm(f),aa(f,f.return);break;case 12:pi(u,f,a);break;case 13:pi(u,f,a),a&&g&4&&$m(u,f);break;case 22:f.memoizedState===null&&pi(u,f,a),aa(f,f.return);break;case 30:break;default:pi(u,f,a)}i=i.sibling}}function Ku(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ys(a))}function Zu(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ys(t))}function On(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Wm(t,i,a,l),i=i.sibling}function Wm(t,i,a,l){var u=i.flags;switch(i.tag){case 0:case 11:case 15:On(t,i,a,l),u&2048&&sa(9,i);break;case 1:On(t,i,a,l);break;case 3:On(t,i,a,l),u&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ys(t)));break;case 12:if(u&2048){On(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,g=f.id,v=f.onPostCommit;typeof v=="function"&&v(g,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){$e(i,i.return,S)}}else On(t,i,a,l);break;case 13:On(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,g=i.alternate,i.memoizedState!==null?f._visibility&2?On(t,i,a,l):oa(t,i):f._visibility&2?On(t,i,a,l):(f._visibility|=2,Yr(t,i,a,l,(i.subtreeFlags&10256)!==0)),u&2048&&Ku(g,i);break;case 24:On(t,i,a,l),u&2048&&Zu(i.alternate,i);break;default:On(t,i,a,l)}}function Yr(t,i,a,l,u){for(u=u&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,g=i,v=a,S=l,D=g.flags;switch(g.tag){case 0:case 11:case 15:Yr(f,g,v,S,u),sa(8,g);break;case 23:break;case 22:var j=g.stateNode;g.memoizedState!==null?j._visibility&2?Yr(f,g,v,S,u):oa(f,g):(j._visibility|=2,Yr(f,g,v,S,u)),u&&D&2048&&Ku(g.alternate,g);break;case 24:Yr(f,g,v,S,u),u&&D&2048&&Zu(g.alternate,g);break;default:Yr(f,g,v,S,u)}i=i.sibling}}function oa(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,u=l.flags;switch(l.tag){case 22:oa(a,l),u&2048&&Ku(l.alternate,l);break;case 24:oa(a,l),u&2048&&Zu(l.alternate,l);break;default:oa(a,l)}i=i.sibling}}var la=8192;function $r(t){if(t.subtreeFlags&la)for(t=t.child;t!==null;)Xm(t),t=t.sibling}function Xm(t){switch(t.tag){case 26:$r(t),t.flags&la&&t.memoizedState!==null&&CT(pn,t.memoizedState,t.memoizedProps);break;case 5:$r(t);break;case 3:case 4:var i=pn;pn=ul(t.stateNode.containerInfo),$r(t),pn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=la,la=16777216,$r(t),la=i):$r(t));break;default:$r(t)}}function Km(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ca(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];yt=l,Jm(l,t)}Km(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zm(t),t=t.sibling}function Zm(t){switch(t.tag){case 0:case 11:case 15:ca(t),t.flags&2048&&di(9,t,t.return);break;case 3:ca(t);break;case 12:ca(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Zo(t)):ca(t);break;default:ca(t)}}function Zo(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];yt=l,Jm(l,t)}Km(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:di(8,i,i.return),Zo(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Zo(i));break;default:Zo(i)}t=t.sibling}}function Jm(t,i){for(;yt!==null;){var a=yt;switch(a.tag){case 0:case 11:case 15:di(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ys(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,yt=l;else e:for(a=t;yt!==null;){l=yt;var u=l.sibling,f=l.return;if(Vm(l),l===a){yt=null;break e}if(u!==null){u.return=f,yt=u;break e}yt=f}}}var HS={getCacheForType:function(t){var i=xt(ht),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},BS=typeof WeakMap=="function"?WeakMap:Map,ze=0,We=null,Ce=null,Ie=0,He=0,Kt=null,gi=!1,Fr=!1,Ju=!1,Vn=0,rt=0,mi=0,rr=0,ef=0,ln=0,Qr=0,ua=null,Bt=null,tf=!1,nf=0,Jo=1/0,el=null,vi=null,Ot=0,_i=null,Wr=null,Xr=0,rf=0,sf=null,ev=null,fa=0,af=null;function Zt(){if((ze&2)!==0&&Ie!==0)return Ie&-Ie;if(M.T!==null){var t=jr;return t!==0?t:hf()}return mp()}function tv(){ln===0&&(ln=(Ie&536870912)===0||Ue?dp():536870912);var t=on.current;return t!==null&&(t.flags|=32),ln}function Jt(t,i,a){(t===We&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(Kr(t,0),yi(t,Ie,ln,!1)),Ns(t,a),((ze&2)===0||t!==We)&&(t===We&&((ze&2)===0&&(rr|=a),rt===4&&yi(t,Ie,ln,!1)),Rn(t))}function nv(t,i,a){if((ze&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Ds(t,i),u=l?VS(t,i):cf(t,i,!0),f=l;do{if(u===0){Fr&&!l&&yi(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!qS(a)){u=cf(t,i,!1),f=!1;continue}if(u===2){if(f=i,t.errorRecoveryDisabledLanes&f)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){i=g;e:{var v=t;u=ua;var S=v.current.memoizedState.isDehydrated;if(S&&(Kr(v,g).flags|=256),g=cf(v,g,!1),g!==2){if(Ju&&!S){v.errorRecoveryDisabledLanes|=f,rr|=f,u=4;break e}f=Bt,Bt=u,f!==null&&(Bt===null?Bt=f:Bt.push.apply(Bt,f))}u=g}if(f=!1,u!==2)continue}}if(u===1){Kr(t,0),yi(t,i,0,!0);break}e:{switch(l=t,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:yi(l,i,ln,!gi);break e;case 2:Bt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(u=nf+300-Je(),10<u)){if(yi(l,i,ln,!gi),uo(l,0,!0)!==0)break e;l.timeoutHandle=xv(iv.bind(null,l,a,Bt,el,tf,i,ln,rr,Qr,gi,f,2,-0,0),u);break e}iv(l,a,Bt,el,tf,i,ln,rr,Qr,gi,f,0,-0,0)}}break}while(!0);Rn(t)}function iv(t,i,a,l,u,f,g,v,S,D,j,H,A,x){if(t.timeoutHandle=-1,H=i.subtreeFlags,(H&8192||(H&16785408)===16785408)&&(_a={stylesheets:null,count:0,unsuspend:TT},Xm(i),H=wT(),H!==null)){t.cancelPendingCommit=H(uv.bind(null,t,i,f,a,l,u,g,v,S,j,1,A,x)),yi(t,f,g,!D);return}uv(t,i,f,a,l,u,g,v,S)}function qS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var u=a[l],f=u.getSnapshot;u=u.value;try{if(!Ft(f(),u))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function yi(t,i,a,l){i&=~ef,i&=~rr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var u=i;0<u;){var f=31-$t(u),g=1<<f;l[f]=-1,u&=~g}a!==0&&pp(t,a,i)}function tl(){return(ze&6)===0?(da(0),!1):!0}function of(){if(Ce!==null){if(He===0)var t=Ce.return;else t=Ce,Un=Zi=null,Tu(t),Gr=null,na=0,t=Ce;for(;t!==null;)Um(t.alternate,t),t=t.return;Ce=null}}function Kr(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,aT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),of(),We=t,Ce=a=Mn(t.current,null),Ie=i,He=0,Kt=null,gi=!1,Fr=Ds(t,i),Ju=!1,Qr=ln=ef=rr=mi=rt=0,Bt=ua=null,tf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var u=31-$t(l),f=1<<u;i|=t[u],l&=~f}return Vn=i,To(),a}function rv(t,i){ye=null,M.H=qo,i===Fs||i===Io?(i=Eg(),He=3):i===_g?(i=Eg(),He=4):He=i===Sm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Kt=i,Ce===null&&(rt=1,Fo(t,nn(i,t.current)))}function sv(){var t=M.H;return M.H=qo,t===null?qo:t}function av(){var t=M.A;return M.A=HS,t}function lf(){rt=4,gi||(Ie&4194048)!==Ie&&on.current!==null||(Fr=!0),(mi&134217727)===0&&(rr&134217727)===0||We===null||yi(We,Ie,ln,!1)}function cf(t,i,a){var l=ze;ze|=2;var u=sv(),f=av();(We!==t||Ie!==i)&&(el=null,Kr(t,i)),i=!1;var g=rt;e:do try{if(He!==0&&Ce!==null){var v=Ce,S=Kt;switch(He){case 8:of(),g=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(i=!0);var D=He;if(He=0,Kt=null,Zr(t,v,S,D),a&&Fr){g=0;break e}break;default:D=He,He=0,Kt=null,Zr(t,v,S,D)}}GS(),g=rt;break}catch(j){rv(t,j)}while(!0);return i&&t.shellSuspendCounter++,Un=Zi=null,ze=l,M.H=u,M.A=f,Ce===null&&(We=null,Ie=0,To()),g}function GS(){for(;Ce!==null;)ov(Ce)}function VS(t,i){var a=ze;ze|=2;var l=sv(),u=av();We!==t||Ie!==i?(el=null,Jo=Je()+500,Kr(t,i)):Fr=Ds(t,i);e:do try{if(He!==0&&Ce!==null){i=Ce;var f=Kt;t:switch(He){case 1:He=0,Kt=null,Zr(t,i,f,1);break;case 2:case 9:if(yg(f)){He=0,Kt=null,lv(i);break}i=function(){He!==2&&He!==9||We!==t||(He=7),Rn(t)},f.then(i,i);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:yg(f)?(He=0,Kt=null,lv(i)):(He=0,Kt=null,Zr(t,i,f,7));break;case 5:var g=null;switch(Ce.tag){case 26:g=Ce.memoizedState;case 5:case 27:var v=Ce;if(!g||Gv(g)){He=0,Kt=null;var S=v.sibling;if(S!==null)Ce=S;else{var D=v.return;D!==null?(Ce=D,nl(D)):Ce=null}break t}}He=0,Kt=null,Zr(t,i,f,5);break;case 6:He=0,Kt=null,Zr(t,i,f,6);break;case 8:of(),rt=6;break e;default:throw Error(s(462))}}YS();break}catch(j){rv(t,j)}while(!0);return Un=Zi=null,M.H=l,M.A=u,ze=a,Ce!==null?0:(We=null,Ie=0,To(),rt)}function YS(){for(;Ce!==null&&!ot();)ov(Ce)}function ov(t){var i=km(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,i===null?nl(t):Ce=i}function lv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Dm(a,i,i.pendingProps,i.type,void 0,Ie);break;case 11:i=Dm(a,i,i.pendingProps,i.type.render,i.ref,Ie);break;case 5:Tu(i);default:Um(a,i),i=Ce=cg(i,Vn),i=km(a,i,Vn)}t.memoizedProps=t.pendingProps,i===null?nl(t):Ce=i}function Zr(t,i,a,l){Un=Zi=null,Tu(i),Gr=null,na=0;var u=i.return;try{if(kS(t,u,i,a,Ie)){rt=1,Fo(t,nn(a,t.current)),Ce=null;return}}catch(f){if(u!==null)throw Ce=u,f;rt=1,Fo(t,nn(a,t.current)),Ce=null;return}i.flags&32768?(Ue||l===1?t=!0:Fr||(Ie&536870912)!==0?t=!1:(gi=t=!0,(l===2||l===9||l===3||l===6)&&(l=on.current,l!==null&&l.tag===13&&(l.flags|=16384))),cv(i,t)):nl(i)}function nl(t){var i=t;do{if((i.flags&32768)!==0){cv(i,gi);return}t=i.return;var a=US(i.alternate,i,Vn);if(a!==null){Ce=a;return}if(i=i.sibling,i!==null){Ce=i;return}Ce=i=t}while(i!==null);rt===0&&(rt=5)}function cv(t,i){do{var a=jS(t.alternate,t);if(a!==null){a.flags&=32767,Ce=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=a}while(t!==null);rt=6,Ce=null}function uv(t,i,a,l,u,f,g,v,S){t.cancelPendingCommit=null;do il();while(Ot!==0);if((ze&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Zc,TE(t,a,f,g,v,S),t===We&&(Ce=We=null,Ie=0),Wr=i,_i=t,Xr=a,rf=f,sf=u,ev=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,WS(lt,function(){return gv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,u=V.p,V.p=2,g=ze,ze|=4;try{PS(t,i,a)}finally{ze=g,V.p=u,M.T=l}}Ot=1,fv(),dv(),hv()}}function fv(){if(Ot===1){Ot=0;var t=_i,i=Wr,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var l=V.p;V.p=2;var u=ze;ze|=4;try{Fm(i,t);var f=Ef,g=Jp(t.containerInfo),v=f.focusedElem,S=f.selectionRange;if(g!==v&&v&&v.ownerDocument&&Zp(v.ownerDocument.documentElement,v)){if(S!==null&&Fc(v)){var D=S.start,j=S.end;if(j===void 0&&(j=D),"selectionStart"in v)v.selectionStart=D,v.selectionEnd=Math.min(j,v.value.length);else{var H=v.ownerDocument||document,A=H&&H.defaultView||window;if(A.getSelection){var x=A.getSelection(),fe=v.textContent.length,oe=Math.min(S.start,fe),Ve=S.end===void 0?oe:Math.min(S.end,fe);!x.extend&&oe>Ve&&(g=Ve,Ve=oe,oe=g);var w=Kp(v,oe),C=Kp(v,Ve);if(w&&C&&(x.rangeCount!==1||x.anchorNode!==w.node||x.anchorOffset!==w.offset||x.focusNode!==C.node||x.focusOffset!==C.offset)){var R=H.createRange();R.setStart(w.node,w.offset),x.removeAllRanges(),oe>Ve?(x.addRange(R),x.extend(C.node,C.offset)):(R.setEnd(C.node,C.offset),x.addRange(R))}}}}for(H=[],x=v;x=x.parentNode;)x.nodeType===1&&H.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<H.length;v++){var P=H[v];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}gl=!!bf,Ef=bf=null}finally{ze=u,V.p=l,M.T=a}}t.current=i,Ot=2}}function dv(){if(Ot===2){Ot=0;var t=_i,i=Wr,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var l=V.p;V.p=2;var u=ze;ze|=4;try{Gm(t,i.alternate,i)}finally{ze=u,V.p=l,M.T=a}}Ot=3}}function hv(){if(Ot===4||Ot===3){Ot=0,Dt();var t=_i,i=Wr,a=Xr,l=ev;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ot=5:(Ot=0,Wr=_i=null,pv(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(vi=null),Oc(a),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Rs,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=M.T,u=V.p,V.p=2,M.T=null;try{for(var f=t.onRecoverableError,g=0;g<l.length;g++){var v=l[g];f(v.value,{componentStack:v.stack})}}finally{M.T=i,V.p=u}}(Xr&3)!==0&&il(),Rn(t),u=t.pendingLanes,(a&4194090)!==0&&(u&42)!==0?t===af?fa++:(fa=0,af=t):fa=0,da(0)}}function pv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ys(i)))}function il(t){return fv(),dv(),hv(),gv()}function gv(){if(Ot!==5)return!1;var t=_i,i=rf;rf=0;var a=Oc(Xr),l=M.T,u=V.p;try{V.p=32>a?32:a,M.T=null,a=sf,sf=null;var f=_i,g=Xr;if(Ot=0,Wr=_i=null,Xr=0,(ze&6)!==0)throw Error(s(331));var v=ze;if(ze|=4,Zm(f.current),Wm(f,f.current,g,a),ze=v,da(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Rs,f)}catch{}return!0}finally{V.p=u,M.T=l,pv(t,i)}}function mv(t,i,a){i=nn(a,i),i=ju(t.stateNode,i,2),t=li(t,i,2),t!==null&&(Ns(t,2),Rn(t))}function $e(t,i,a){if(t.tag===3)mv(t,t,a);else for(;i!==null;){if(i.tag===3){mv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vi===null||!vi.has(l))){t=nn(a,t),a=bm(2),l=li(i,a,2),l!==null&&(Em(a,l,i,t),Ns(l,2),Rn(l));break}}i=i.return}}function uf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new BS;var u=new Set;l.set(i,u)}else u=l.get(i),u===void 0&&(u=new Set,l.set(i,u));u.has(a)||(Ju=!0,u.add(a),t=$S.bind(null,t,i,a),i.then(t,t))}function $S(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,We===t&&(Ie&a)===a&&(rt===4||rt===3&&(Ie&62914560)===Ie&&300>Je()-nf?(ze&2)===0&&Kr(t,0):ef|=a,Qr===Ie&&(Qr=0)),Rn(t)}function vv(t,i){i===0&&(i=hp()),t=Mr(t,i),t!==null&&(Ns(t,i),Rn(t))}function FS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),vv(t,a)}function QS(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,u=t.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),vv(t,a)}function WS(t,i){return Pe(t,i)}var rl=null,Jr=null,ff=!1,sl=!1,df=!1,sr=0;function Rn(t){t!==Jr&&t.next===null&&(Jr===null?rl=Jr=t:Jr=Jr.next=t),sl=!0,ff||(ff=!0,KS())}function da(t,i){if(!df&&sl){df=!0;do for(var a=!1,l=rl;l!==null;){if(t!==0){var u=l.pendingLanes;if(u===0)var f=0;else{var g=l.suspendedLanes,v=l.pingedLanes;f=(1<<31-$t(42|t)+1)-1,f&=u&~(g&~v),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ev(l,f))}else f=Ie,f=uo(l,l===We?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ds(l,f)||(a=!0,Ev(l,f));l=l.next}while(a);df=!1}}function XS(){_v()}function _v(){sl=ff=!1;var t=0;sr!==0&&(sT()&&(t=sr),sr=0);for(var i=Je(),a=null,l=rl;l!==null;){var u=l.next,f=yv(l,i);f===0?(l.next=null,a===null?rl=u:a.next=u,u===null&&(Jr=a)):(a=l,(t!==0||(f&3)!==0)&&(sl=!0)),l=u}da(t)}function yv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,u=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var g=31-$t(f),v=1<<g,S=u[g];S===-1?((v&a)===0||(v&l)!==0)&&(u[g]=SE(v,i)):S<=i&&(t.expiredLanes|=v),f&=~v}if(i=We,a=Ie,a=uo(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(He===2||He===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ve(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ds(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ve(l),Oc(a)){case 2:case 8:a=Ct;break;case 32:a=lt;break;case 268435456:a=Os;break;default:a=lt}return l=bv.bind(null,t),a=Pe(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ve(l),t.callbackPriority=2,t.callbackNode=null,2}function bv(t,i){if(Ot!==0&&Ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(il()&&t.callbackNode!==a)return null;var l=Ie;return l=uo(t,t===We?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(nv(t,l,i),yv(t,Je()),t.callbackNode!=null&&t.callbackNode===a?bv.bind(null,t):null)}function Ev(t,i){if(il())return null;nv(t,i,!0)}function KS(){oT(function(){(ze&6)!==0?Pe(Nt,XS):_v()})}function hf(){return sr===0&&(sr=dp()),sr}function Sv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:mo(""+t)}function Tv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function ZS(t,i,a,l,u){if(i==="submit"&&a&&a.stateNode===u){var f=Sv((u[jt]||null).action),g=l.submitter;g&&(i=(i=g[jt]||null)?Sv(i.formAction):g.getAttribute("formAction"),i!==null&&(f=i,g=null));var v=new bo("action","action",null,l,u);t.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sr!==0){var S=g?Tv(u,g):new FormData(u);Iu(a,{pending:!0,data:S,method:u.method,action:f},null,S)}}else typeof f=="function"&&(v.preventDefault(),S=g?Tv(u,g):new FormData(u),Iu(a,{pending:!0,data:S,method:u.method,action:f},f,S))},currentTarget:u}]})}}for(var pf=0;pf<Kc.length;pf++){var gf=Kc[pf],JS=gf.toLowerCase(),eT=gf[0].toUpperCase()+gf.slice(1);hn(JS,"on"+eT)}hn(ng,"onAnimationEnd"),hn(ig,"onAnimationIteration"),hn(rg,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(vS,"onTransitionRun"),hn(_S,"onTransitionStart"),hn(yS,"onTransitionCancel"),hn(sg,"onTransitionEnd"),Tr("onMouseEnter",["mouseout","mouseover"]),Tr("onMouseLeave",["mouseout","mouseover"]),Tr("onPointerEnter",["pointerout","pointerover"]),Tr("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ha));function Cv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],u=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var g=l.length-1;0<=g;g--){var v=l[g],S=v.instance,D=v.currentTarget;if(v=v.listener,S!==f&&u.isPropagationStopped())break e;f=v,u.currentTarget=D;try{f(u)}catch(j){$o(j)}u.currentTarget=null,f=S}else for(g=0;g<l.length;g++){if(v=l[g],S=v.instance,D=v.currentTarget,v=v.listener,S!==f&&u.isPropagationStopped())break e;f=v,u.currentTarget=D;try{f(u)}catch(j){$o(j)}u.currentTarget=null,f=S}}}}function we(t,i){var a=i[Rc];a===void 0&&(a=i[Rc]=new Set);var l=t+"__bubble";a.has(l)||(wv(i,t,2,!1),a.add(l))}function mf(t,i,a){var l=0;i&&(l|=4),wv(a,t,l,i)}var al="_reactListening"+Math.random().toString(36).slice(2);function vf(t){if(!t[al]){t[al]=!0,_p.forEach(function(a){a!=="selectionchange"&&(tT.has(a)||mf(a,!1,t),mf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[al]||(i[al]=!0,mf("selectionchange",!1,i))}}function wv(t,i,a,l){switch(Wv(i)){case 2:var u=DT;break;case 8:u=NT;break;default:u=xf}a=u.bind(null,i,a,t),u=void 0,!Pc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(u=!0),l?u!==void 0?t.addEventListener(i,a,{capture:!0,passive:u}):t.addEventListener(i,a,!0):u!==void 0?t.addEventListener(i,a,{passive:u}):t.addEventListener(i,a,!1)}function _f(t,i,a,l,u){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var v=l.stateNode.containerInfo;if(v===u)break;if(g===4)for(g=l.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;v!==null;){if(g=br(v),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){l=f=g;continue e}v=v.parentNode}}l=l.return}Ip(function(){var D=f,j=Uc(a),H=[];e:{var A=ag.get(t);if(A!==void 0){var x=bo,fe=t;switch(t){case"keypress":if(_o(a)===0)break e;case"keydown":case"keyup":x=WE;break;case"focusin":fe="focus",x=qc;break;case"focusout":fe="blur",x=qc;break;case"beforeblur":case"afterblur":x=qc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ZE;break;case ng:case ig:case rg:x=HE;break;case sg:x=eS;break;case"scroll":case"scrollend":x=LE;break;case"wheel":x=nS;break;case"copy":case"cut":case"paste":x=qE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=jp;break;case"toggle":case"beforetoggle":x=rS}var oe=(i&4)!==0,Ve=!oe&&(t==="scroll"||t==="scrollend"),w=oe?A!==null?A+"Capture":null:A;oe=[];for(var C=D,R;C!==null;){var P=C;if(R=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||R===null||w===null||(P=Is(C,w),P!=null&&oe.push(pa(C,P,R))),Ve)break;C=C.return}0<oe.length&&(A=new x(A,fe,null,a,j),H.push({event:A,listeners:oe}))}}if((i&7)===0){e:{if(A=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",A&&a!==Lc&&(fe=a.relatedTarget||a.fromElement)&&(br(fe)||fe[yr]))break e;if((x||A)&&(A=j.window===j?j:(A=j.ownerDocument)?A.defaultView||A.parentWindow:window,x?(fe=a.relatedTarget||a.toElement,x=D,fe=fe?br(fe):null,fe!==null&&(Ve=c(fe),oe=fe.tag,fe!==Ve||oe!==5&&oe!==27&&oe!==6)&&(fe=null)):(x=null,fe=D),x!==fe)){if(oe=Lp,P="onMouseLeave",w="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(oe=jp,P="onPointerLeave",w="onPointerEnter",C="pointer"),Ve=x==null?A:xs(x),R=fe==null?A:xs(fe),A=new oe(P,C+"leave",x,a,j),A.target=Ve,A.relatedTarget=R,P=null,br(j)===D&&(oe=new oe(w,C+"enter",fe,a,j),oe.target=R,oe.relatedTarget=Ve,P=oe),Ve=P,x&&fe)t:{for(oe=x,w=fe,C=0,R=oe;R;R=es(R))C++;for(R=0,P=w;P;P=es(P))R++;for(;0<C-R;)oe=es(oe),C--;for(;0<R-C;)w=es(w),R--;for(;C--;){if(oe===w||w!==null&&oe===w.alternate)break t;oe=es(oe),w=es(w)}oe=null}else oe=null;x!==null&&Ov(H,A,x,oe,!1),fe!==null&&Ve!==null&&Ov(H,Ve,fe,oe,!0)}}e:{if(A=D?xs(D):window,x=A.nodeName&&A.nodeName.toLowerCase(),x==="select"||x==="input"&&A.type==="file")var ee=Yp;else if(Gp(A))if($p)ee=pS;else{ee=dS;var Ee=fS}else x=A.nodeName,!x||x.toLowerCase()!=="input"||A.type!=="checkbox"&&A.type!=="radio"?D&&kc(D.elementType)&&(ee=Yp):ee=hS;if(ee&&(ee=ee(t,D))){Vp(H,ee,a,j);break e}Ee&&Ee(t,A,D),t==="focusout"&&D&&A.type==="number"&&D.memoizedProps.value!=null&&Mc(A,"number",A.value)}switch(Ee=D?xs(D):window,t){case"focusin":(Gp(Ee)||Ee.contentEditable==="true")&&(Ar=Ee,Qc=D,Hs=null);break;case"focusout":Hs=Qc=Ar=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,eg(H,a,j);break;case"selectionchange":if(mS)break;case"keydown":case"keyup":eg(H,a,j)}var re;if(Vc)e:{switch(t){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else Nr?Bp(t,a)&&(ce="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ce="onCompositionStart");ce&&(Pp&&a.locale!=="ko"&&(Nr||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&Nr&&(re=Mp()):(ri=j,zc="value"in ri?ri.value:ri.textContent,Nr=!0)),Ee=ol(D,ce),0<Ee.length&&(ce=new Up(ce,t,null,a,j),H.push({event:ce,listeners:Ee}),re?ce.data=re:(re=qp(a),re!==null&&(ce.data=re)))),(re=aS?oS(t,a):lS(t,a))&&(ce=ol(D,"onBeforeInput"),0<ce.length&&(Ee=new Up("onBeforeInput","beforeinput",null,a,j),H.push({event:Ee,listeners:ce}),Ee.data=re)),ZS(H,t,D,a,j)}Cv(H,i)})}function pa(t,i,a){return{instance:t,listener:i,currentTarget:a}}function ol(t,i){for(var a=i+"Capture",l=[];t!==null;){var u=t,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Is(t,a),u!=null&&l.unshift(pa(t,u,f)),u=Is(t,i),u!=null&&l.push(pa(t,u,f))),t.tag===3)return l;t=t.return}return[]}function es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ov(t,i,a,l,u){for(var f=i._reactName,g=[];a!==null&&a!==l;){var v=a,S=v.alternate,D=v.stateNode;if(v=v.tag,S!==null&&S===l)break;v!==5&&v!==26&&v!==27||D===null||(S=D,u?(D=Is(a,f),D!=null&&g.unshift(pa(a,D,S))):u||(D=Is(a,f),D!=null&&g.push(pa(a,D,S)))),a=a.return}g.length!==0&&t.push({event:i,listeners:g})}var nT=/\r\n?/g,iT=/\u0000|\uFFFD/g;function Rv(t){return(typeof t=="string"?t:""+t).replace(nT,`
`).replace(iT,"")}function Dv(t,i){return i=Rv(i),Rv(t)===i}function ll(){}function Ge(t,i,a,l,u,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Or(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Or(t,""+l);break;case"className":ho(t,"class",l);break;case"tabIndex":ho(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ho(t,a,l);break;case"style":Ap(t,l,f);break;case"data":if(i!=="object"){ho(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=mo(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Ge(t,i,"name",u.name,u,null),Ge(t,i,"formEncType",u.formEncType,u,null),Ge(t,i,"formMethod",u.formMethod,u,null),Ge(t,i,"formTarget",u.formTarget,u,null)):(Ge(t,i,"encType",u.encType,u,null),Ge(t,i,"method",u.method,u,null),Ge(t,i,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=mo(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ll);break;case"onScroll":l!=null&&we("scroll",t);break;case"onScrollEnd":l!=null&&we("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=mo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":we("beforetoggle",t),we("toggle",t),fo(t,"popover",l);break;case"xlinkActuate":xn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":fo(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ME.get(a)||a,fo(t,a,l))}}function yf(t,i,a,l,u,f){switch(a){case"style":Ap(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Or(t,l):(typeof l=="number"||typeof l=="bigint")&&Or(t,""+l);break;case"onScroll":l!=null&&we("scroll",t);break;case"onScrollEnd":l!=null&&we("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ll);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yp.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),i=a.slice(2,u?a.length-7:void 0),f=t[jt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,u),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,u);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):fo(t,a,l)}}}function Rt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",t),we("load",t);var l=!1,u=!1,f;for(f in a)if(a.hasOwnProperty(f)){var g=a[f];if(g!=null)switch(f){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ge(t,i,f,g,a,null)}}u&&Ge(t,i,"srcSet",a.srcSet,a,null),l&&Ge(t,i,"src",a.src,a,null);return;case"input":we("invalid",t);var v=f=g=u=null,S=null,D=null;for(l in a)if(a.hasOwnProperty(l)){var j=a[l];if(j!=null)switch(l){case"name":u=j;break;case"type":g=j;break;case"checked":S=j;break;case"defaultChecked":D=j;break;case"value":f=j;break;case"defaultValue":v=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:Ge(t,i,l,j,a,null)}}Op(t,f,v,S,D,g,u,!1),po(t);return;case"select":we("invalid",t),l=g=f=null;for(u in a)if(a.hasOwnProperty(u)&&(v=a[u],v!=null))switch(u){case"value":f=v;break;case"defaultValue":g=v;break;case"multiple":l=v;default:Ge(t,i,u,v,a,null)}i=f,a=g,t.multiple=!!l,i!=null?wr(t,!!l,i,!1):a!=null&&wr(t,!!l,a,!0);return;case"textarea":we("invalid",t),f=u=l=null;for(g in a)if(a.hasOwnProperty(g)&&(v=a[g],v!=null))switch(g){case"value":l=v;break;case"defaultValue":u=v;break;case"children":f=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:Ge(t,i,g,v,a,null)}Dp(t,l,u,f),po(t);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(l=a[S],l!=null))switch(S){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ge(t,i,S,l,a,null)}return;case"dialog":we("beforetoggle",t),we("toggle",t),we("cancel",t),we("close",t);break;case"iframe":case"object":we("load",t);break;case"video":case"audio":for(l=0;l<ha.length;l++)we(ha[l],t);break;case"image":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"embed":case"source":case"link":we("error",t),we("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ge(t,i,D,l,a,null)}return;default:if(kc(i)){for(j in a)a.hasOwnProperty(j)&&(l=a[j],l!==void 0&&yf(t,i,j,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Ge(t,i,v,l,a,null))}function rT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,g=null,v=null,S=null,D=null,j=null;for(x in a){var H=a[x];if(a.hasOwnProperty(x)&&H!=null)switch(x){case"checked":break;case"value":break;case"defaultValue":S=H;default:l.hasOwnProperty(x)||Ge(t,i,x,null,l,H)}}for(var A in l){var x=l[A];if(H=a[A],l.hasOwnProperty(A)&&(x!=null||H!=null))switch(A){case"type":f=x;break;case"name":u=x;break;case"checked":D=x;break;case"defaultChecked":j=x;break;case"value":g=x;break;case"defaultValue":v=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(137,i));break;default:x!==H&&Ge(t,i,A,x,l,H)}}Ic(t,g,v,S,D,j,f,u);return;case"select":x=g=v=A=null;for(f in a)if(S=a[f],a.hasOwnProperty(f)&&S!=null)switch(f){case"value":break;case"multiple":x=S;default:l.hasOwnProperty(f)||Ge(t,i,f,null,l,S)}for(u in l)if(f=l[u],S=a[u],l.hasOwnProperty(u)&&(f!=null||S!=null))switch(u){case"value":A=f;break;case"defaultValue":v=f;break;case"multiple":g=f;default:f!==S&&Ge(t,i,u,f,l,S)}i=v,a=g,l=x,A!=null?wr(t,!!a,A,!1):!!l!=!!a&&(i!=null?wr(t,!!a,i,!0):wr(t,!!a,a?[]:"",!1));return;case"textarea":x=A=null;for(v in a)if(u=a[v],a.hasOwnProperty(v)&&u!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ge(t,i,v,null,l,u)}for(g in l)if(u=l[g],f=a[g],l.hasOwnProperty(g)&&(u!=null||f!=null))switch(g){case"value":A=u;break;case"defaultValue":x=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Ge(t,i,g,u,l,f)}Rp(t,A,x);return;case"option":for(var fe in a)if(A=a[fe],a.hasOwnProperty(fe)&&A!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ge(t,i,fe,null,l,A)}for(S in l)if(A=l[S],x=a[S],l.hasOwnProperty(S)&&A!==x&&(A!=null||x!=null))switch(S){case"selected":t.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Ge(t,i,S,A,l,x)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in a)A=a[oe],a.hasOwnProperty(oe)&&A!=null&&!l.hasOwnProperty(oe)&&Ge(t,i,oe,null,l,A);for(D in l)if(A=l[D],x=a[D],l.hasOwnProperty(D)&&A!==x&&(A!=null||x!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(137,i));break;default:Ge(t,i,D,A,l,x)}return;default:if(kc(i)){for(var Ve in a)A=a[Ve],a.hasOwnProperty(Ve)&&A!==void 0&&!l.hasOwnProperty(Ve)&&yf(t,i,Ve,void 0,l,A);for(j in l)A=l[j],x=a[j],!l.hasOwnProperty(j)||A===x||A===void 0&&x===void 0||yf(t,i,j,A,l,x);return}}for(var w in a)A=a[w],a.hasOwnProperty(w)&&A!=null&&!l.hasOwnProperty(w)&&Ge(t,i,w,null,l,A);for(H in l)A=l[H],x=a[H],!l.hasOwnProperty(H)||A===x||A==null&&x==null||Ge(t,i,H,A,l,x)}var bf=null,Ef=null;function cl(t){return t.nodeType===9?t:t.ownerDocument}function Nv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Av(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Sf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Tf=null;function sT(){var t=window.event;return t&&t.type==="popstate"?t===Tf?!1:(Tf=t,!0):(Tf=null,!1)}var xv=typeof setTimeout=="function"?setTimeout:void 0,aT=typeof clearTimeout=="function"?clearTimeout:void 0,Iv=typeof Promise=="function"?Promise:void 0,oT=typeof queueMicrotask=="function"?queueMicrotask:typeof Iv<"u"?function(t){return Iv.resolve(null).then(t).catch(lT)}:xv;function lT(t){setTimeout(function(){throw t})}function bi(t){return t==="head"}function Mv(t,i){var a=i,l=0,u=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var g=t.ownerDocument;if(a&1&&ga(g.documentElement),a&2&&ga(g.body),a&4)for(a=g.head,ga(a),g=a.firstChild;g;){var v=g.nextSibling,S=g.nodeName;g[As]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=v}}if(u===0){t.removeChild(f),Ta(i);return}u--}else a==="$"||a==="$?"||a==="$!"?u++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Ta(i)}function Cf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cf(a),Dc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function cT(t,i,a,l){for(;t.nodeType===1;){var u=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[As])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=gn(t.nextSibling),t===null)break}return null}function uT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=gn(t.nextSibling),t===null))return null;return t}function wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function fT(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function gn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Of=null;function kv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Lv(t,i,a){switch(i=cl(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ga(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Dc(t)}var cn=new Map,Uv=new Set;function ul(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Yn=V.d;V.d={f:dT,r:hT,D:pT,C:gT,L:mT,m:vT,X:yT,S:_T,M:bT};function dT(){var t=Yn.f(),i=tl();return t||i}function hT(t){var i=Er(t);i!==null&&i.tag===5&&i.type==="form"?nm(i):Yn.r(t)}var ts=typeof document>"u"?null:document;function jv(t,i,a){var l=ts;if(l&&typeof i=="string"&&i){var u=tn(i);u='link[rel="'+t+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Uv.has(u)||(Uv.add(u),t={rel:t,crossOrigin:a,href:i},l.querySelector(u)===null&&(i=l.createElement("link"),Rt(i,"link",t),vt(i),l.head.appendChild(i)))}}function pT(t){Yn.D(t),jv("dns-prefetch",t,null)}function gT(t,i){Yn.C(t,i),jv("preconnect",t,i)}function mT(t,i,a){Yn.L(t,i,a);var l=ts;if(l&&t&&i){var u='link[rel="preload"][as="'+tn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+tn(a.imageSizes)+'"]')):u+='[href="'+tn(t)+'"]';var f=u;switch(i){case"style":f=ns(t);break;case"script":f=is(t)}cn.has(f)||(t=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),cn.set(f,t),l.querySelector(u)!==null||i==="style"&&l.querySelector(ma(f))||i==="script"&&l.querySelector(va(f))||(i=l.createElement("link"),Rt(i,"link",t),vt(i),l.head.appendChild(i)))}}function vT(t,i){Yn.m(t,i);var a=ts;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",u='link[rel="modulepreload"][as="'+tn(l)+'"][href="'+tn(t)+'"]',f=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=is(t)}if(!cn.has(f)&&(t=_({rel:"modulepreload",href:t},i),cn.set(f,t),a.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(va(f)))return}l=a.createElement("link"),Rt(l,"link",t),vt(l),a.head.appendChild(l)}}}function _T(t,i,a){Yn.S(t,i,a);var l=ts;if(l&&t){var u=Sr(l).hoistableStyles,f=ns(t);i=i||"default";var g=u.get(f);if(!g){var v={loading:0,preload:null};if(g=l.querySelector(ma(f)))v.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":i},a),(a=cn.get(f))&&Rf(t,a);var S=g=l.createElement("link");vt(S),Rt(S,"link",t),S._p=new Promise(function(D,j){S.onload=D,S.onerror=j}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,fl(g,i,l)}g={type:"stylesheet",instance:g,count:1,state:v},u.set(f,g)}}}function yT(t,i){Yn.X(t,i);var a=ts;if(a&&t){var l=Sr(a).hoistableScripts,u=is(t),f=l.get(u);f||(f=a.querySelector(va(u)),f||(t=_({src:t,async:!0},i),(i=cn.get(u))&&Df(t,i),f=a.createElement("script"),vt(f),Rt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function bT(t,i){Yn.M(t,i);var a=ts;if(a&&t){var l=Sr(a).hoistableScripts,u=is(t),f=l.get(u);f||(f=a.querySelector(va(u)),f||(t=_({src:t,async:!0,type:"module"},i),(i=cn.get(u))&&Df(t,i),f=a.createElement("script"),vt(f),Rt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function Pv(t,i,a,l){var u=(u=B.current)?ul(u):null;if(!u)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ns(a.href),a=Sr(u).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ns(a.href);var f=Sr(u).hoistableStyles,g=f.get(t);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,g),(f=u.querySelector(ma(t)))&&!f._p&&(g.instance=f,g.state.loading=5),cn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},cn.set(t,a),f||ET(u,t,a,g.state))),i&&l===null)throw Error(s(528,""));return g}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=is(a),a=Sr(u).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ns(t){return'href="'+tn(t)+'"'}function ma(t){return'link[rel="stylesheet"]['+t+"]"}function zv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function ET(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Rt(i,"link",a),vt(i),t.head.appendChild(i))}function is(t){return'[src="'+tn(t)+'"]'}function va(t){return"script[async]"+t}function Hv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+tn(a.href)+'"]');if(l)return i.instance=l,vt(l),l;var u=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),vt(l),Rt(l,"style",u),fl(l,a.precedence,t),i.instance=l;case"stylesheet":u=ns(a.href);var f=t.querySelector(ma(u));if(f)return i.state.loading|=4,i.instance=f,vt(f),f;l=zv(a),(u=cn.get(u))&&Rf(l,u),f=(t.ownerDocument||t).createElement("link"),vt(f);var g=f;return g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),Rt(f,"link",l),i.state.loading|=4,fl(f,a.precedence,t),i.instance=f;case"script":return f=is(a.src),(u=t.querySelector(va(f)))?(i.instance=u,vt(u),u):(l=a,(u=cn.get(f))&&(l=_({},a),Df(l,u)),t=t.ownerDocument||t,u=t.createElement("script"),vt(u),Rt(u,"link",l),t.head.appendChild(u),i.instance=u);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,fl(l,a.precedence,t));return i.instance}function fl(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,f=u,g=0;g<l.length;g++){var v=l[g];if(v.dataset.precedence===i)f=v;else if(f!==u)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Rf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Df(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var dl=null;function Bv(t,i,a){if(dl===null){var l=new Map,u=dl=new Map;u.set(a,l)}else u=dl,l=u.get(a),l||(l=new Map,u.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),u=0;u<a.length;u++){var f=a[u];if(!(f[As]||f[At]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(i)||"";g=t+g;var v=l.get(g);v?v.push(f):l.set(g,[f])}}return l}function qv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function ST(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Gv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var _a=null;function TT(){}function CT(t,i,a){if(_a===null)throw Error(s(475));var l=_a;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=ns(a.href),f=t.querySelector(ma(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=hl.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,vt(f);return}f=t.ownerDocument||t,a=zv(a),(u=cn.get(u))&&Rf(a,u),f=f.createElement("link"),vt(f);var g=f;g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),Rt(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=hl.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function wT(){if(_a===null)throw Error(s(475));var t=_a;return t.stylesheets&&t.count===0&&Nf(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Nf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function hl(){if(this.count--,this.count===0){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var pl=null;function Nf(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,pl=new Map,i.forEach(OT,t),pl=null,hl.call(t))}function OT(t,i){if(!(i.state.loading&4)){var a=pl.get(t);if(a)var l=a.get(null);else{a=new Map,pl.set(t,a);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var g=u[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),l=g)}l&&a.set(null,l)}u=i.instance,g=u.getAttribute("data-precedence"),f=a.get(g)||l,f===l&&a.set(null,u),a.set(g,u),this.count++,l=hl.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),f?f.parentNode.insertBefore(u,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),i.state.loading|=4}}var ya={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function RT(t,i,a,l,u,f,g,v){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.hiddenUpdates=Cc(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Vv(t,i,a,l,u,f,g,v,S,D,j,H){return t=new RT(t,i,a,g,v,S,D,H),i=1,f===!0&&(i|=24),f=Qt(3,null,null,i),t.current=f,f.stateNode=t,i=cu(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},hu(f),t}function Yv(t){return t?(t=kr,t):kr}function $v(t,i,a,l,u,f){u=Yv(u),l.context===null?l.context=u:l.pendingContext=u,l=oi(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=li(t,l,i),a!==null&&(Jt(a,t,i),Ws(a,t,i))}function Fv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Af(t,i){Fv(t,i),(t=t.alternate)&&Fv(t,i)}function Qv(t){if(t.tag===13){var i=Mr(t,67108864);i!==null&&Jt(i,t,67108864),Af(t,67108864)}}var gl=!0;function DT(t,i,a,l){var u=M.T;M.T=null;var f=V.p;try{V.p=2,xf(t,i,a,l)}finally{V.p=f,M.T=u}}function NT(t,i,a,l){var u=M.T;M.T=null;var f=V.p;try{V.p=8,xf(t,i,a,l)}finally{V.p=f,M.T=u}}function xf(t,i,a,l){if(gl){var u=If(l);if(u===null)_f(t,i,l,ml,a),Xv(t,l);else if(xT(u,t,i,a,l))l.stopPropagation();else if(Xv(t,l),i&4&&-1<AT.indexOf(t)){for(;u!==null;){var f=Er(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=qi(f.pendingLanes);if(g!==0){var v=f;for(v.pendingLanes|=2,v.entangledLanes|=2;g;){var S=1<<31-$t(g);v.entanglements[1]|=S,g&=~S}Rn(f),(ze&6)===0&&(Jo=Je()+500,da(0))}}break;case 13:v=Mr(f,2),v!==null&&Jt(v,f,2),tl(),Af(f,2)}if(f=If(l),f===null&&_f(t,i,l,ml,a),f===u)break;u=f}u!==null&&l.stopPropagation()}else _f(t,i,l,null,a)}}function If(t){return t=Uc(t),Mf(t)}var ml=null;function Mf(t){if(ml=null,t=br(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return ml=t,null}function Wv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case Nt:return 2;case Ct:return 8;case lt:case _r:return 32;case Os:return 268435456;default:return 32}default:return 32}}var kf=!1,Ei=null,Si=null,Ti=null,ba=new Map,Ea=new Map,Ci=[],AT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xv(t,i){switch(t){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":ba.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(i.pointerId)}}function Sa(t,i,a,l,u,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},i!==null&&(i=Er(i),i!==null&&Qv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,u!==null&&i.indexOf(u)===-1&&i.push(u),t)}function xT(t,i,a,l,u){switch(i){case"focusin":return Ei=Sa(Ei,t,i,a,l,u),!0;case"dragenter":return Si=Sa(Si,t,i,a,l,u),!0;case"mouseover":return Ti=Sa(Ti,t,i,a,l,u),!0;case"pointerover":var f=u.pointerId;return ba.set(f,Sa(ba.get(f)||null,t,i,a,l,u)),!0;case"gotpointercapture":return f=u.pointerId,Ea.set(f,Sa(Ea.get(f)||null,t,i,a,l,u)),!0}return!1}function Kv(t){var i=br(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,CE(t.priority,function(){if(a.tag===13){var l=Zt();l=wc(l);var u=Mr(a,l);u!==null&&Jt(u,a,l),Af(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vl(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=If(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Lc=l,a.target.dispatchEvent(l),Lc=null}else return i=Er(a),i!==null&&Qv(i),t.blockedOn=a,!1;i.shift()}return!0}function Zv(t,i,a){vl(t)&&a.delete(i)}function IT(){kf=!1,Ei!==null&&vl(Ei)&&(Ei=null),Si!==null&&vl(Si)&&(Si=null),Ti!==null&&vl(Ti)&&(Ti=null),ba.forEach(Zv),Ea.forEach(Zv)}function _l(t,i){t.blockedOn===i&&(t.blockedOn=null,kf||(kf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,IT)))}var yl=null;function Jv(t){yl!==t&&(yl=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yl===t&&(yl=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],u=t[i+2];if(typeof l!="function"){if(Mf(l||a)===null)continue;break}var f=Er(a);f!==null&&(t.splice(i,3),i-=3,Iu(f,{pending:!0,data:u,method:a.method,action:l},l,u))}}))}function Ta(t){function i(S){return _l(S,t)}Ei!==null&&_l(Ei,t),Si!==null&&_l(Si,t),Ti!==null&&_l(Ti,t),ba.forEach(i),Ea.forEach(i);for(var a=0;a<Ci.length;a++){var l=Ci[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ci.length&&(a=Ci[0],a.blockedOn===null);)Kv(a),a.blockedOn===null&&Ci.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var u=a[l],f=a[l+1],g=u[jt]||null;if(typeof f=="function")g||Jv(a);else if(g){var v=null;if(f&&f.hasAttribute("formAction")){if(u=f,g=f[jt]||null)v=g.formAction;else if(Mf(u)!==null)continue}else v=g.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),Jv(a)}}}function Lf(t){this._internalRoot=t}bl.prototype.render=Lf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Zt();$v(a,l,t,i,null,null)},bl.prototype.unmount=Lf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;$v(t.current,2,null,t,null,null),tl(),i[yr]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var i=mp();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ci.length&&i!==0&&i<Ci[a].priority;a++);Ci.splice(a,0,t),a===0&&Kv(t)}};var e_=e.version;if(e_!=="19.1.0")throw Error(s(527,e_,"19.1.0"));V.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?m(t):null,t=t===null?null:t.stateNode,t};var MT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{Rs=El.inject(MT),Yt=El}catch{}}return wa.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",u=mm,f=vm,g=_m,v=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(g=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(v=i.unstable_transitionCallbacks)),i=Vv(t,1,!1,null,null,a,l,u,f,g,v,null),t[yr]=i.current,vf(t),new Lf(i)},wa.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,u="",f=mm,g=vm,v=_m,S=null,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks),a.formState!==void 0&&(D=a.formState)),i=Vv(t,1,!0,i,a??null,l,u,f,g,v,S,D),i.context=Yv(null),a=i.current,l=Zt(),l=wc(l),u=oi(l),u.callback=null,li(a,u,l),a=l,i.current.lanes=a,Ns(i,a),Rn(i),t[yr]=i.current,vf(t),new bl(i)},wa.version="19.1.0",wa}var u_;function qT(){if(u_)return Pf.exports;u_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pf.exports=BT(),Pf.exports}var GT=qT();const VT=Wa(GT),YT=()=>{};var f_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(r,e){if(!r)throw _s(e)},_s=function(r){return new Error("Firebase Database ("+jy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},$T=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],h=r[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,h=d?r[o+1]:0,p=o+2<r.length,m=p?r[o+2]:0,_=c>>2,b=(c&3)<<4|h>>4;let T=(h&15)<<2|m>>6,O=m&63;p||(O=64,d||(T=64)),s.push(n[_],n[b],n[T],n[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Py(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):$T(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],h=o<r.length?n[r.charAt(o)]:0;++o;const m=o<r.length?n[r.charAt(o)]:64;++o;const b=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||h==null||m==null||b==null)throw new FT;const T=c<<2|h>>4;if(s.push(T),m!==64){const O=h<<4&240|m>>2;if(s.push(O),b!==64){const N=m<<6&192|b;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class FT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zy=function(r){const e=Py(r);return eh.encodeByteArray(e,!0)},Ml=function(r){return zy(r).replace(/\./g,"")},kl=function(r){try{return eh.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){return Hy(void 0,r)}function Hy(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!WT(n)||(r[n]=Hy(r[n],e[n]));return r}function WT(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=()=>XT().__FIREBASE_DEFAULTS__,ZT=()=>{if(typeof process>"u"||typeof f_>"u")return;const r=f_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},JT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&kl(r[1]);return e&&JSON.parse(e)},th=()=>{try{return YT()||KT()||ZT()||JT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},By=r=>{var e,n;return(n=(e=th())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},eC=r=>{const e=By(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},qy=()=>{var r;return(r=th())===null||r===void 0?void 0:r.config},Gy=r=>{var e;return(e=th())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ml(JSON.stringify(n)),Ml(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function nC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iC(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Vy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rC(){const r=Ut();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function sC(){return jy.NODE_ADMIN===!0}function aC(){try{return typeof indexedDB=="object"}catch{return!1}}function oC(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="FirebaseError";class Bi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=lC,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?cC(c,s):"Error",h=`${this.serviceName}: ${d} (${o}).`;return new Bi(o,h,s)}}function cC(r,e){return r.replace(uC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const uC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(r){return JSON.parse(r)}function gt(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(r){let e={},n={},s={},o="";try{const c=r.split(".");e=Pa(kl(c[0])||""),n=Pa(kl(c[1])||""),o=c[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},fC=function(r){const e=Yy(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},dC=function(r){const e=Yy(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function hs(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function fd(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ll(r,e,n){const s={};for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=e.call(n,r[o],o,r));return s}function ur(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],d=e[o];if(d_(c)&&d_(d)){if(!ur(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function d_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let b=0;b<16;b++)s[b]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let b=0;b<16;b++)s[b]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let b=16;b<80;b++){const T=s[b-3]^s[b-8]^s[b-14]^s[b-16];s[b]=(T<<1|T>>>31)&4294967295}let o=this.chain_[0],c=this.chain_[1],d=this.chain_[2],h=this.chain_[3],p=this.chain_[4],m,_;for(let b=0;b<80;b++){b<40?b<20?(m=h^c&(d^h),_=1518500249):(m=c^d^h,_=1859775393):b<60?(m=c&d|h&(c|d),_=2400959708):(m=c^d^h,_=3395469782);const T=(o<<5|o>>>27)+m+p+_+s[b]&4294967295;p=h,h=d,d=(c<<30|c>>>2)&4294967295,c=o,o=T}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const c=this.buf_;let d=this.inbuf_;for(;o<n;){if(d===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(c[d]=e.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}else for(;o<n;)if(c[d]=e[o],++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let c=24;c>=0;c-=8)e[s]=this.chain_[o]>>c&255,++s;return e}}function pC(r,e){const n=new gC(r,e);return n.subscribe.bind(n)}class gC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");mC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=qf),o.error===void 0&&(o.error=qf),o.complete===void 0&&(o.complete=qf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mC(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function qf(){}function ih(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);if(o>=55296&&o<=56319){const c=o-55296;s++,Y(s<r.length,"Surrogate pair missing trail surrogate.");const d=r.charCodeAt(s)-56320;o=65536+(c<<10)+d}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},ic=function(r){let e=0;for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(r){return r&&r._delegate?r._delegate:r}class fr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new nc;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bC(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ar){return this.instances.has(e)}getOptions(e=ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);s===h&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ar){return this.component?this.component.multipleInstances?e:ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yC(r){return r===ar?void 0:r}function bC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _C(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ye||(Ye={}));const SC={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},TC=Ye.INFO,CC={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},wC=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=CC[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rh{constructor(e){this.name=e,this._logLevel=TC,this._logHandler=wC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const OC=(r,e)=>e.some(n=>r instanceof n);let h_,p_;function RC(){return h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DC(){return p_||(p_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $y=new WeakMap,dd=new WeakMap,Fy=new WeakMap,Gf=new WeakMap,sh=new WeakMap;function NC(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(xi(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&$y.set(n,r)}).catch(()=>{}),sh.set(e,r),e}function AC(r){if(dd.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});dd.set(r,e)}let hd={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return dd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Fy.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function xC(r){hd=r(hd)}function IC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Vf(this),e,...n);return Fy.set(s,e.sort?e.sort():[e]),xi(s)}:DC().includes(r)?function(...e){return r.apply(Vf(this),e),xi($y.get(this))}:function(...e){return xi(r.apply(Vf(this),e))}}function MC(r){return typeof r=="function"?IC(r):(r instanceof IDBTransaction&&AC(r),OC(r,RC())?new Proxy(r,hd):r)}function xi(r){if(r instanceof IDBRequest)return NC(r);if(Gf.has(r))return Gf.get(r);const e=MC(r);return e!==r&&(Gf.set(r,e),sh.set(e,r)),e}const Vf=r=>sh.get(r);function kC(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),h=xi(d);return s&&d.addEventListener("upgradeneeded",p=>{s(xi(d.result),p.oldVersion,p.newVersion,xi(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),h.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const LC=["get","getKey","getAll","getAllKeys","count"],UC=["put","add","delete","clear"],Yf=new Map;function g_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=UC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||LC.includes(n)))return;const c=async function(d,...h){const p=this.transaction(d,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),o&&p.done]))[0]};return Yf.set(e,c),c}xC(r=>({...r,get:(e,n,s)=>g_(e,n)||r.get(e,n,s),has:(e,n)=>!!g_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function PC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pd="@firebase/app",m_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new rh("@firebase/app"),zC="@firebase/app-compat",HC="@firebase/analytics-compat",BC="@firebase/analytics",qC="@firebase/app-check-compat",GC="@firebase/app-check",VC="@firebase/auth",YC="@firebase/auth-compat",$C="@firebase/database",FC="@firebase/data-connect",QC="@firebase/database-compat",WC="@firebase/functions",XC="@firebase/functions-compat",KC="@firebase/installations",ZC="@firebase/installations-compat",JC="@firebase/messaging",ew="@firebase/messaging-compat",tw="@firebase/performance",nw="@firebase/performance-compat",iw="@firebase/remote-config",rw="@firebase/remote-config-compat",sw="@firebase/storage",aw="@firebase/storage-compat",ow="@firebase/firestore",lw="@firebase/vertexai",cw="@firebase/firestore-compat",uw="firebase",fw="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]",dw={[pd]:"fire-core",[zC]:"fire-core-compat",[BC]:"fire-analytics",[HC]:"fire-analytics-compat",[GC]:"fire-app-check",[qC]:"fire-app-check-compat",[VC]:"fire-auth",[YC]:"fire-auth-compat",[$C]:"fire-rtdb",[FC]:"fire-data-connect",[QC]:"fire-rtdb-compat",[WC]:"fire-fn",[XC]:"fire-fn-compat",[KC]:"fire-iid",[ZC]:"fire-iid-compat",[JC]:"fire-fcm",[ew]:"fire-fcm-compat",[tw]:"fire-perf",[nw]:"fire-perf-compat",[iw]:"fire-rc",[rw]:"fire-rc-compat",[sw]:"fire-gcs",[aw]:"fire-gcs-compat",[ow]:"fire-fst",[cw]:"fire-fst-compat",[lw]:"fire-vertex","fire-js":"fire-js",[uw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new Map,hw=new Map,md=new Map;function v_(r,e){try{r.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ps(r){const e=r.name;if(md.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;md.set(e,r);for(const n of Ul.values())v_(n,r);for(const n of hw.values())v_(n,r);return!0}function ah(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function mn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Xa("app","Firebase",pw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=fw;function Qy(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:gd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Ii.create("bad-app-name",{appName:String(o)});if(n||(n=qy()),!n)throw Ii.create("no-options");const c=Ul.get(o);if(c){if(ur(n,c.options)&&ur(s,c.config))return c;throw Ii.create("duplicate-app",{appName:o})}const d=new EC(o);for(const p of md.values())d.addComponent(p);const h=new gw(n,s,d);return Ul.set(o,h),h}function Wy(r=gd){const e=Ul.get(r);if(!e&&r===gd&&qy())return Qy();if(!e)throw Ii.create("no-app",{appName:r});return e}function Mi(r,e,n){var s;let o=(s=dw[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const h=[`Unable to register library "${o}" with version "${e}":`];c&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&h.push("and"),d&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(h.join(" "));return}ps(new fr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="firebase-heartbeat-database",vw=1,za="firebase-heartbeat-store";let $f=null;function Xy(){return $f||($f=kC(mw,vw,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ii.create("idb-open",{originalErrorMessage:r.message})})),$f}async function _w(r){try{const n=(await Xy()).transaction(za),s=await n.objectStore(za).get(Ky(r));return await n.done,s}catch(e){if(e instanceof Bi)Xn.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function __(r,e){try{const s=(await Xy()).transaction(za,"readwrite");await s.objectStore(za).put(e,Ky(r)),await s.done}catch(n){if(n instanceof Bi)Xn.warn(n.message);else{const s=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(s.message)}}}function Ky(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=1024,bw=30;class Ew{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=y_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>bw){const d=Cw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Xn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y_(),{heartbeatsToSend:s,unsentEntries:o}=Sw(this._heartbeatsCache.heartbeats),c=Ml(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Xn.warn(n),""}}}function y_(){return new Date().toISOString().substring(0,10)}function Sw(r,e=yw){const n=[];let s=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),b_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),b_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Tw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aC()?oC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _w(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return __(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return __(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function b_(r){return Ml(JSON.stringify({version:2,heartbeats:r})).length}function Cw(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(r){ps(new fr("platform-logger",e=>new jC(e),"PRIVATE")),ps(new fr("heartbeat",e=>new Ew(e),"PRIVATE")),Mi(pd,m_,r),Mi(pd,m_,"esm2017"),Mi("fire-js","")}ww("");var E_={};const S_="@firebase/database",T_="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zy="";function Ow(r){Zy=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),gt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Pa(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ei(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Rw(e)}}catch{}return new Dw},lr=Jy("localStorage"),Nw=Jy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new rh("@firebase/database"),Aw=function(){let r=1;return function(){return r++}}(),e0=function(r){const e=vC(r),n=new hC;n.update(e);const s=n.digest();return eh.encodeByteArray(s)},Ka=function(...r){let e="";for(let n=0;n<r.length;n++){const s=r[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Ka.apply(null,s):typeof s=="object"?e+=gt(s):e+=s,e+=" "}return e};let Aa=null,C_=!0;const xw=function(r,e){Y(!0,"Can't turn on custom loggers persistently."),ls.logLevel=Ye.VERBOSE,Aa=ls.log.bind(ls)},Mt=function(...r){if(C_===!0&&(C_=!1,Aa===null&&Nw.get("logging_enabled")===!0&&xw()),Aa){const e=Ka.apply(null,r);Aa(e)}},Za=function(r){return function(...e){Mt(r,...e)}},vd=function(...r){const e="FIREBASE INTERNAL ERROR: "+Ka(...r);ls.error(e)},Kn=function(...r){const e=`FIREBASE FATAL ERROR: ${Ka(...r)}`;throw ls.error(e),new Error(e)},Gt=function(...r){const e="FIREBASE WARNING: "+Ka(...r);ls.warn(e)},Iw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},t0=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},Mw=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},gs="[MIN_NAME]",dr="[MAX_NAME]",Es=function(r,e){if(r===e)return 0;if(r===gs||e===dr)return-1;if(e===gs||r===dr)return 1;{const n=w_(r),s=w_(e);return n!==null?s!==null?n-s===0?r.length-e.length:n-s:-1:s!==null?1:r<e?-1:1}},kw=function(r,e){return r===e?0:r<e?-1:1},Oa=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+gt(e))},oh=function(r){if(typeof r!="object"||r===null)return gt(r);const e=[];for(const s in r)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=gt(e[s]),n+=":",n+=oh(r[e[s]]);return n+="}",n},n0=function(r,e){const n=r.length;if(n<=e)return[r];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(r.substring(o,n)):s.push(r.substring(o,o+e));return s};function Vt(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const i0=function(r){Y(!t0(r),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,c,d,h,p;r===0?(c=0,d=0,o=1/r===-1/0?1:0):(o=r<0,r=Math.abs(r),r>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(r)/Math.LN2),s),c=h+s,d=Math.round(r*Math.pow(2,n-h)-Math.pow(2,n))):(c=0,d=Math.round(r/Math.pow(2,1-s-n))));const m=[];for(p=n;p;p-=1)m.push(d%2?1:0),d=Math.floor(d/2);for(p=e;p;p-=1)m.push(c%2?1:0),c=Math.floor(c/2);m.push(o?1:0),m.reverse();const _=m.join("");let b="";for(p=0;p<64;p+=8){let T=parseInt(_.substr(p,8),2).toString(16);T.length===1&&(T="0"+T),b=b+T}return b.toLowerCase()},Lw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Uw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function jw(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const s=new Error(r+" at "+e._path.toString()+": "+n);return s.code=r.toUpperCase(),s}const Pw=new RegExp("^-?(0*)\\d{1,10}$"),zw=-2147483648,Hw=2147483647,w_=function(r){if(Pw.test(r)){const e=Number(r);if(e>=zw&&e<=Hw)return e}return null},Ss=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Gt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Bw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xa=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Gt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gt(e)}}class Rl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="5",r0="v",s0="s",a0="r",o0="f",l0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,c0="ls",u0="p",_d="ac",f0="websocket",d0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n,s,o,c=!1,d="",h=!1,p=!1,m=null){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Vw(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function p0(r,e,n){Y(typeof e=="string","typeof type must == string"),Y(typeof n=="object","typeof params must == object");let s;if(e===f0)s=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===d0)s=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Vw(r)&&(n.ns=r.namespace);const o=[];return Vt(n,(c,d)=>{o.push(c+"="+d)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.counters_={}}incrementCounter(e,n=1){ei(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return QT(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff={},Qf={};function ch(r){const e=r.toString();return Ff[e]||(Ff[e]=new Yw),Ff[e]}function $w(r,e){const n=r.toString();return Qf[n]||(Qf[n]=e()),Qf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Ss(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="start",Qw="close",Ww="pLPCommand",Xw="pRTLPCB",g0="id",m0="pw",v0="ser",Kw="cb",Zw="seg",Jw="ts",eO="d",tO="dframe",_0=1870,y0=30,nO=_0-y0,iO=25e3,rO=3e4;class as{constructor(e,n,s,o,c,d,h){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.transportSessionId=d,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Za(e),this.stats_=ch(n),this.urlFn=p=>(this.appCheckToken&&(p[_d]=this.appCheckToken),p0(n,d0,p))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rO)),Mw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new uh((...c)=>{const[d,h,p,m,_]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===O_)this.id=h,this.password=p;else if(d===Qw)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,h]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[O_]="t",s[v0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Kw]=this.scriptTagHolder.uniqueCallbackIdentifier),s[r0]=lh,this.transportSessionId&&(s[s0]=this.transportSessionId),this.lastSessionId&&(s[c0]=this.lastSessionId),this.applicationId&&(s[u0]=this.applicationId),this.appCheckToken&&(s[_d]=this.appCheckToken),typeof location<"u"&&location.hostname&&l0.test(location.hostname)&&(s[a0]=o0);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){as.forceAllow_=!0}static forceDisallow(){as.forceDisallow_=!0}static isAvailable(){return as.forceAllow_?!0:!as.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Lw()&&!Uw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=gt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=zy(n),o=n0(s,nO);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[tO]="t",s[g0]=e,s[m0]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=gt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class uh{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Aw(),window[Ww+this.uniqueCallbackIdentifier]=e,window[Xw+this.uniqueCallbackIdentifier]=n,this.myIFrame=uh.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(h){Mt("frame writing exception"),h.stack&&Mt(h.stack),Mt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[g0]=this.myID,e[m0]=this.myPW,e[v0]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+y0+s.length<=_0;){const d=this.pendingSegs.shift();s=s+"&"+Zw+o+"="+d.seg+"&"+Jw+o+"="+d.ts+"&"+eO+o+"="+d.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(iO)),c=()=>{clearTimeout(o),s()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=16384,aO=45e3;let jl=null;typeof MozWebSocket<"u"?jl=MozWebSocket:typeof WebSocket<"u"&&(jl=WebSocket);class vn{constructor(e,n,s,o,c,d,h){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Za(this.connId),this.stats_=ch(n),this.connURL=vn.connectionURL_(n,d,h,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,c){const d={};return d[r0]=lh,typeof location<"u"&&location.hostname&&l0.test(location.hostname)&&(d[a0]=o0),n&&(d[s0]=n),s&&(d[c0]=s),o&&(d[_d]=o),c&&(d[u0]=c),p0(e,f0,d)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lr.set("previous_websocket_failure",!0);try{let s;sC(),this.mySock=new jl(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){vn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&jl!==null&&!vn.forceDisallow_}static previouslyFailed(){return lr.isInMemoryStorage||lr.get("previous_websocket_failure")===!0}markConnectionHealthy(){lr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Pa(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Y(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=gt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=n0(n,sO);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aO))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}vn.responsesRequiredToBeHealthy=2;vn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static get ALL_TRANSPORTS(){return[as,vn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=vn&&vn.isAvailable();let s=n&&!vn.previouslyFailed();if(e.webSocketOnly&&(n||Gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[vn];else{const o=this.transports_=[];for(const c of Ha.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);Ha.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ha.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=6e4,lO=5e3,cO=10*1024,uO=100*1024,Wf="t",R_="d",fO="s",D_="r",dO="e",N_="o",A_="a",x_="n",I_="p",hO="h";class pO{constructor(e,n,s,o,c,d,h,p,m,_){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=d,this.onReady_=h,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Za("c:"+this.id+":"),this.transportManager_=new Ha(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=xa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wf in e){const n=e[Wf];n===A_?this.upgradeIfSecondaryHealthy_():n===D_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===N_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Oa("t",e),s=Oa("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:I_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:A_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:x_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Oa("t",e),s=Oa("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Oa(Wf,e);if(R_ in e){const s=e[R_];if(n===hO){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===x_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===fO?this.onConnectionShutdown_(s):n===D_?this.onReset_(s):n===dO?vd("Server Error: "+s):n===N_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),lh!==s&&Gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),xa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(oO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:I_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.allowedEvents_=e,this.listeners_={},Y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let c=0;c<o.length;c++)if(o[c].callback===n&&(!s||s===o[c].context)){o.splice(c,1);return}}validateEventType_(e){Y(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends E0{static getInstance(){return new Pl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=32,k_=768;class Fe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ke(){return new Fe("")}function Se(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function ji(r){return r.pieces_.length-r.pieceNum_}function Xe(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new Fe(r.pieces_,e)}function S0(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function gO(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function T0(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function C0(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new Fe(e,0)}function mt(r,e){const n=[];for(let s=r.pieceNum_;s<r.pieces_.length;s++)n.push(r.pieces_[s]);if(e instanceof Fe)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new Fe(n,0)}function Oe(r){return r.pieceNum_>=r.pieces_.length}function Lt(r,e){const n=Se(r),s=Se(e);if(n===null)return e;if(n===s)return Lt(Xe(r),Xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function fh(r,e){if(ji(r)!==ji(e))return!1;for(let n=r.pieceNum_,s=e.pieceNum_;n<=r.pieces_.length;n++,s++)if(r.pieces_[n]!==e.pieces_[s])return!1;return!0}function yn(r,e){let n=r.pieceNum_,s=e.pieceNum_;if(ji(r)>ji(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class mO{constructor(e,n){this.errorPrefix_=n,this.parts_=T0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=ic(this.parts_[s]);w0(this)}}function vO(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=ic(e),w0(r)}function _O(r){const e=r.parts_.pop();r.byteLength_-=ic(e),r.parts_.length>0&&(r.byteLength_-=1)}function w0(r){if(r.byteLength_>k_)throw new Error(r.errorPrefix_+"has a key path longer than "+k_+" bytes ("+r.byteLength_+").");if(r.parts_.length>M_)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+M_+") or object contains a cycle "+or(r))}function or(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends E0{static getInstance(){return new dh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Y(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=1e3,yO=60*5*1e3,L_=30*1e3,bO=1.3,EO=3e4,SO="server_kill",U_=3;class Wn extends b0{constructor(e,n,s,o,c,d,h,p){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=Wn.nextPersistentConnectionId_++,this.log_=Za("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ra,this.maxReconnectDelay_=yO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Pl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,c={r:o,a:e,b:n};this.log_(gt(c)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new nc,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const h=d.d;d.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,s,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const h={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(d).set(c,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const c={p:s},d="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,h=>{const p=h.d,m=h.s;Wn.warnOnListenWarnings_(p,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(m,p))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ei(e,"w")){const s=hs(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();Gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||dC(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=L_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=fC(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const c={p:e},d="n";o&&(c.q=s,c.t=o),this.sendRequest(d,c)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const c={p:n,d:s};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,c){this.initConnection_();const d={p:n,d:s};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const c=s.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+gt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):vd("Unrecognized action received from server: "+gt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ra,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ra,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>EO&&(this.reconnectDelay_=Ra),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Wn.nextConnectionId_++,c=this.lastSessionId;let d=!1,h=null;const p=function(){h?h.close():(d=!0,s())},m=function(b){Y(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(b)};this.realtime_={close:p,sendRequest:m};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,T]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);d?Mt("getToken() completed but was canceled"):(Mt("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=T&&T.token,h=new pO(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,O=>{Gt(O+" ("+this.repoInfo_.toString()+")"),this.interrupt(SO)},c))}catch(b){this.log_("Failed to get token: "+b),d||(this.repoInfo_.nodeAdmin&&Gt(b),p())}}}interrupt(e){Mt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Mt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],fd(this.interruptReasons_)&&(this.reconnectDelay_=Ra,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(c=>oh(c)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new Fe(e).toString();let o;if(this.listens.has(s)){const c=this.listens.get(s);o=c.get(n),c.delete(n),c.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){Mt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=U_&&(this.reconnectDelay_=L_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Mt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=U_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Zy.replace(/\./g,"-")]=1,nh()?e["framework.cordova"]=1:Vy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Pl.getInstance().currentlyOnline();return fd(this.interruptReasons_)&&e}}Wn.nextPersistentConnectionId_=0;Wn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Te(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Te(gs,e),o=new Te(gs,n);return this.compare(s,o)!==0}minPost(){return Te.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl;class O0 extends rc{static get __EMPTY_NODE(){return Sl}static set __EMPTY_NODE(e){Sl=e}compare(e,n){return Es(e.name,n.name)}isDefinedOn(e){throw _s("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Te.MIN}maxPost(){return new Te(dr,Sl)}makePost(e,n){return Y(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,Sl)}toString(){return".key"}}const cs=new O0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,s,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=n?s(e.key,n):1,o&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class St{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??St.RED,this.left=o??qt.EMPTY_NODE,this.right=c??qt.EMPTY_NODE}copy(e,n,s,o,c){return new St(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return qt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}St.RED=!0;St.BLACK=!1;class TO{copy(e,n,s,o,c){return this}insert(e,n,s){return new St(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class qt{constructor(e,n=qt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new qt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,St.BLACK,null,null))}remove(e){return new qt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,St.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Tl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Tl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Tl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Tl(this.root_,null,this.comparator_,!0,e)}}qt.EMPTY_NODE=new TO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(r,e){return Es(r.name,e.name)}function hh(r,e){return Es(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd;function wO(r){yd=r}const R0=function(r){return typeof r=="number"?"number:"+i0(r):"string:"+r},D0=function(r){if(r.isLeafNode()){const e=r.val();Y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ei(e,".sv"),"Priority must be a string or number.")}else Y(r===yd||r.isEmpty(),"priority of unexpected type.");Y(r===yd||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j_;class Et{static set __childrenNodeConstructor(e){j_=e}static get __childrenNodeConstructor(){return j_}constructor(e,n=Et.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),D0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Et(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Et.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Oe(e)?this:Se(e)===".priority"?this.priorityNode_:Et.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Et.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Se(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(Y(s!==".priority"||ji(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Et.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+R0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=i0(this.value_):e+=this.value_,this.lazyHash_=e0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Et.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Et.__childrenNodeConstructor?-1:(Y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=Et.VALUE_TYPE_ORDER.indexOf(n),c=Et.VALUE_TYPE_ORDER.indexOf(s);return Y(o>=0,"Unknown leaf type: "+n),Y(c>=0,"Unknown leaf type: "+s),o===c?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Et.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0,A0;function OO(r){N0=r}function RO(r){A0=r}class DO extends rc{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),c=s.compareTo(o);return c===0?Es(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(dr,new Et("[PRIORITY-POST]",A0))}makePost(e,n){const s=N0(e);return new Te(n,new Et("[PRIORITY-POST]",s))}toString(){return".priority"}}const st=new DO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=Math.log(2);class AO{constructor(e){const n=c=>parseInt(Math.log(c)/NO,10),s=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zl=function(r,e,n,s){r.sort(e);const o=function(p,m){const _=m-p;let b,T;if(_===0)return null;if(_===1)return b=r[p],T=n?n(b):b,new St(T,b.node,St.BLACK,null,null);{const O=parseInt(_/2,10)+p,N=o(p,O),U=o(O+1,m);return b=r[O],T=n?n(b):b,new St(T,b.node,St.BLACK,N,U)}},c=function(p){let m=null,_=null,b=r.length;const T=function(N,U){const L=b-N,$=b;b-=N;const F=o(L+1,$),Q=r[L],ne=n?n(Q):Q;O(new St(ne,Q.node,U,null,F))},O=function(N){m?(m.left=N,m=N):(_=N,m=N)};for(let N=0;N<p.count;++N){const U=p.nextBitIsOne(),L=Math.pow(2,p.count-(N+1));U?T(L,St.BLACK):(T(L,St.BLACK),T(L,St.RED))}return _},d=new AO(r.length),h=c(d);return new qt(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf;const rs={};class $n{static get Default(){return Y(rs&&st,"ChildrenNode.ts has not been loaded"),Xf=Xf||new $n({".priority":rs},{".priority":st}),Xf}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=hs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof qt?n:null}hasIndex(e){return ei(this.indexSet_,e.toString())}addIndex(e,n){Y(e!==cs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const c=n.getIterator(Te.Wrap);let d=c.getNext();for(;d;)o=o||e.isDefinedOn(d.node),s.push(d),d=c.getNext();let h;o?h=zl(s,e.getCompare()):h=rs;const p=e.toString(),m=Object.assign({},this.indexSet_);m[p]=e;const _=Object.assign({},this.indexes_);return _[p]=h,new $n(_,m)}addToIndexes(e,n){const s=Ll(this.indexes_,(o,c)=>{const d=hs(this.indexSet_,c);if(Y(d,"Missing index implementation for "+c),o===rs)if(d.isDefinedOn(e.node)){const h=[],p=n.getIterator(Te.Wrap);let m=p.getNext();for(;m;)m.name!==e.name&&h.push(m),m=p.getNext();return h.push(e),zl(h,d.getCompare())}else return rs;else{const h=n.get(e.name);let p=o;return h&&(p=p.remove(new Te(e.name,h))),p.insert(e,e.node)}});return new $n(s,this.indexSet_)}removeFromIndexes(e,n){const s=Ll(this.indexes_,o=>{if(o===rs)return o;{const c=n.get(e.name);return c?o.remove(new Te(e.name,c)):o}});return new $n(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da;class ue{static get EMPTY_NODE(){return Da||(Da=new ue(new qt(hh),null,$n.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&D0(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Da}updatePriority(e){return this.children_.isEmpty()?this:new ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Da:n}}getChild(e){const n=Se(e);return n===null?this:this.getImmediateChild(n).getChild(Xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Y(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Te(e,n);let o,c;n.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(s,this.children_));const d=o.isEmpty()?Da:this.priorityNode_;return new ue(o,d,c)}}updateChild(e,n){const s=Se(e);if(s===null)return n;{Y(Se(e)!==".priority"||ji(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(Xe(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,c=!0;if(this.forEachChild(st,(d,h)=>{n[d]=h.val(e),s++,c&&ue.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*s){const d=[];for(const h in n)d[h]=n[h];return d}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+R0(this.getPriority().val())+":"),this.forEachChild(st,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":e0(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const c=o.getPredecessorKey(new Te(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Te(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Te(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Te.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Te.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ja?-1:0}withIndex(e){if(e===cs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===cs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(st),o=n.getIterator(st);let c=s.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=s.getNext(),d=o.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===cs?null:this.indexMap_.get(e.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xO extends ue{constructor(){super(new qt(hh),ue.EMPTY_NODE,$n.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}}const Ja=new xO;Object.defineProperties(Te,{MIN:{value:new Te(gs,ue.EMPTY_NODE)},MAX:{value:new Te(dr,Ja)}});O0.__EMPTY_NODE=ue.EMPTY_NODE;Et.__childrenNodeConstructor=ue;wO(Ja);RO(Ja);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=!0;function Tt(r,e=null){if(r===null)return ue.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),Y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new Et(n,Tt(e))}if(!(r instanceof Array)&&IO){const n=[];let s=!1;if(Vt(r,(d,h)=>{if(d.substring(0,1)!=="."){const p=Tt(h);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),n.push(new Te(d,p)))}}),n.length===0)return ue.EMPTY_NODE;const c=zl(n,CO,d=>d.name,hh);if(s){const d=zl(n,st.getCompare());return new ue(c,Tt(e),new $n({".priority":d},{".priority":st}))}else return new ue(c,Tt(e),$n.Default)}else{let n=ue.EMPTY_NODE;return Vt(r,(s,o)=>{if(ei(r,s)&&s.substring(0,1)!=="."){const c=Tt(o);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(s,c))}}),n.updatePriority(Tt(e))}}OO(Tt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO extends rc{constructor(e){super(),this.indexPath_=e,Y(!Oe(e)&&Se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),c=s.compareTo(o);return c===0?Es(e.name,n.name):c}makePost(e,n){const s=Tt(e),o=ue.EMPTY_NODE.updateChild(this.indexPath_,s);return new Te(n,o)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,Ja);return new Te(dr,e)}toString(){return T0(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO extends rc{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Es(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,n){const s=Tt(e);return new Te(n,s)}toString(){return".value"}}const LO=new kO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){return{type:"value",snapshotNode:r}}function ms(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Ba(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function qa(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function UO(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.index_=e}updateChild(e,n,s,o,c,d){Y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(o).equals(s.getChild(o))&&h.isEmpty()===s.isEmpty()||(d!=null&&(s.isEmpty()?e.hasChild(n)?d.trackChildChange(Ba(n,h)):Y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?d.trackChildChange(ms(n,s)):d.trackChildChange(qa(n,s,h))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(st,(o,c)=>{n.hasChild(o)||s.trackChildChange(Ba(o,c))}),n.isLeafNode()||n.forEachChild(st,(o,c)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(c)||s.trackChildChange(qa(o,c,d))}else s.trackChildChange(ms(o,c))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.indexedFilter_=new ph(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ga.getStartPost_(e),this.endPost_=Ga.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,c,d){return this.matches(new Te(n,s))||(s=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,c,d)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ue.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ue.EMPTY_NODE);const c=this;return n.forEachChild(st,(d,h)=>{c.matches(new Te(d,h))||(o=o.updateImmediateChild(d,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ga(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,c,d){return this.rangedFilter_.matches(new Te(n,s))||(s=ue.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,c,d):this.fullLimitUpdateChild_(e,n,s,c,d)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ue.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const h=c.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))o=o.updateImmediateChild(h.name,h.node),d++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ue.EMPTY_NODE);let c;this.reverse_?c=o.getReverseIterator(this.index_):c=o.getIterator(this.index_);let d=0;for(;c.hasNext();){const h=c.getNext();d<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?d++:o=o.updateImmediateChild(h.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,c){let d;if(this.reverse_){const b=this.index_.getCompare();d=(T,O)=>b(O,T)}else d=this.index_.getCompare();const h=e;Y(h.numChildren()===this.limit_,"");const p=new Te(n,s),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(p);if(h.hasChild(n)){const b=h.getImmediateChild(n);let T=o.getChildAfterChild(this.index_,m,this.reverse_);for(;T!=null&&(T.name===n||h.hasChild(T.name));)T=o.getChildAfterChild(this.index_,T,this.reverse_);const O=T==null?1:d(T,p);if(_&&!s.isEmpty()&&O>=0)return c!=null&&c.trackChildChange(qa(n,s,b)),h.updateImmediateChild(n,s);{c!=null&&c.trackChildChange(Ba(n,b));const U=h.updateImmediateChild(n,ue.EMPTY_NODE);return T!=null&&this.rangedFilter_.matches(T)?(c!=null&&c.trackChildChange(ms(T.name,T.node)),U.updateImmediateChild(T.name,T.node)):U}}else return s.isEmpty()?e:_&&d(m,p)>=0?(c!=null&&(c.trackChildChange(Ba(m.name,m.node)),c.trackChildChange(ms(n,s))),h.updateImmediateChild(n,s).updateImmediateChild(m.name,ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=st}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gs}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:dr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===st}copy(){const e=new gh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function PO(r){return r.loadsAllData()?new ph(r.getIndex()):r.hasLimit()?new jO(r):new Ga(r)}function P_(r){const e={};if(r.isDefault())return e;let n;if(r.index_===st?n="$priority":r.index_===LO?n="$value":r.index_===cs?n="$key":(Y(r.index_ instanceof MO,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=gt(n),r.startSet_){const s=r.startAfterSet_?"startAfter":"startAt";e[s]=gt(r.indexStartValue_),r.startNameSet_&&(e[s]+=","+gt(r.indexStartName_))}if(r.endSet_){const s=r.endBeforeSet_?"endBefore":"endAt";e[s]=gt(r.indexEndValue_),r.endNameSet_&&(e[s]+=","+gt(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function z_(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==st&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends b0{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=Za("p:rest:"),this.listens_={}}listen(e,n,s,o){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=Hl.getListenId_(e,s),h={};this.listens_[d]=h;const p=P_(e._queryParams);this.restRequest_(c+".json",p,(m,_)=>{let b=_;if(m===404&&(b=null,m=null),m===null&&this.onDataUpdate_(c,b,!1,s),hs(this.listens_,d)===h){let T;m?m===401?T="permission_denied":T="rest_error:"+m:T="ok",o(T,null)}})}unlisten(e,n){const s=Hl.getListenId_(e,n);delete this.listens_[s]}get(e){const n=P_(e._queryParams),s=e._path.toString(),o=new nc;return this.restRequest_(s+".json",n,(c,d)=>{let h=d;c===404&&(h=null,c=null),c===null?(this.onDataUpdate_(s,h,!1,null),o.resolve(h)):o.reject(new Error(h))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(n.auth=o.accessToken),c&&c.token&&(n.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ys(n);this.log_("Sending REST request for "+d);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+d+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=Pa(h.responseText)}catch{Gt("Failed to parse JSON response for "+d+": "+h.responseText)}s(null,p)}else h.status!==401&&h.status!==404&&Gt("Got unsuccessful REST response for "+d+" Status: "+h.status),s(h.status);s=null}},h.open("GET",d,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(){return{value:null,children:new Map}}function I0(r,e,n){if(Oe(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const s=Se(e);r.children.has(s)||r.children.set(s,Bl());const o=r.children.get(s);e=Xe(e),I0(o,e,n)}}function bd(r,e,n){r.value!==null?n(e,r.value):HO(r,(s,o)=>{const c=new Fe(e.toString()+"/"+s);bd(o,c,n)})}function HO(r,e){r.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Vt(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=10*1e3,qO=30*1e3,GO=5*60*1e3;class VO{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new BO(e);const s=H_+(qO-H_)*Math.random();xa(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Vt(e,(o,c)=>{c>0&&ei(this.statsToReport_,o)&&(n[o]=c,s=!0)}),s&&this.server_.reportStats(n),xa(this.reportStats_.bind(this),Math.floor(Math.random()*2*GO))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(bn||(bn={}));function M0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vh(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=bn.ACK_USER_WRITE,this.source=M0()}operationForChild(e){if(Oe(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Fe(e));return new ql(ke(),n,this.revert)}}else return Y(Se(this.path)===e,"operationForChild called for unrelated child."),new ql(Xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this.source=e,this.path=n,this.type=bn.LISTEN_COMPLETE}operationForChild(e){return Oe(this.path)?new Va(this.source,ke()):new Va(this.source,Xe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=bn.OVERWRITE}operationForChild(e){return Oe(this.path)?new hr(this.source,ke(),this.snap.getImmediateChild(e)):new hr(this.source,Xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=bn.MERGE}operationForChild(e){if(Oe(this.path)){const n=this.children.subtree(new Fe(e));return n.isEmpty()?null:n.value?new hr(this.source,ke(),n.value):new Ya(this.source,ke(),n)}else return Y(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ya(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Oe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Se(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $O(r,e,n,s){const o=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&r.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(UO(d.childName,d.snapshotNode))}),Na(r,o,"child_removed",e,s,n),Na(r,o,"child_added",e,s,n),Na(r,o,"child_moved",c,s,n),Na(r,o,"child_changed",e,s,n),Na(r,o,"value",e,s,n),o}function Na(r,e,n,s,o,c){const d=s.filter(h=>h.type===n);d.sort((h,p)=>QO(r,h,p)),d.forEach(h=>{const p=FO(r,h,c);o.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(p,r.query_))})})}function FO(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function QO(r,e,n){if(e.childName==null||n.childName==null)throw _s("Should only compare child_ events.");const s=new Te(e.childName,e.snapshotNode),o=new Te(n.childName,n.snapshotNode);return r.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(r,e){return{eventCache:r,serverCache:e}}function Ia(r,e,n,s){return sc(new Pi(e,n,s),r.serverCache)}function k0(r,e,n,s){return sc(r.eventCache,new Pi(e,n,s))}function Gl(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function pr(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf;const WO=()=>(Kf||(Kf=new qt(kw)),Kf);class Ze{static fromObject(e){let n=new Ze(null);return Vt(e,(s,o)=>{n=n.set(new Fe(s),o)}),n}constructor(e,n=WO()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(Oe(e))return null;{const s=Se(e),o=this.children.get(s);if(o!==null){const c=o.findRootMostMatchingPathAndValue(Xe(e),n);return c!=null?{path:mt(new Fe(s),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Oe(e))return this;{const n=Se(e),s=this.children.get(n);return s!==null?s.subtree(Xe(e)):new Ze(null)}}set(e,n){if(Oe(e))return new Ze(n,this.children);{const s=Se(e),c=(this.children.get(s)||new Ze(null)).set(Xe(e),n),d=this.children.insert(s,c);return new Ze(this.value,d)}}remove(e){if(Oe(e))return this.children.isEmpty()?new Ze(null):new Ze(null,this.children);{const n=Se(e),s=this.children.get(n);if(s){const o=s.remove(Xe(e));let c;return o.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,o),this.value===null&&c.isEmpty()?new Ze(null):new Ze(this.value,c)}else return this}}get(e){if(Oe(e))return this.value;{const n=Se(e),s=this.children.get(n);return s?s.get(Xe(e)):null}}setTree(e,n){if(Oe(e))return n;{const s=Se(e),c=(this.children.get(s)||new Ze(null)).setTree(Xe(e),n);let d;return c.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,c),new Ze(this.value,d)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,c)=>{s[o]=c.fold_(mt(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(Oe(e))return null;{const c=Se(e),d=this.children.get(c);return d?d.findOnPath_(Xe(e),mt(n,c),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,s){if(Oe(e))return this;{this.value&&s(n,this.value);const o=Se(e),c=this.children.get(o);return c?c.foreachOnPath_(Xe(e),mt(n,o),s):new Ze(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_(mt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.writeTree_=e}static empty(){return new Sn(new Ze(null))}}function Ma(r,e,n){if(Oe(e))return new Sn(new Ze(n));{const s=r.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let c=s.value;const d=Lt(o,e);return c=c.updateChild(d,n),new Sn(r.writeTree_.set(o,c))}else{const o=new Ze(n),c=r.writeTree_.setTree(e,o);return new Sn(c)}}}function B_(r,e,n){let s=r;return Vt(n,(o,c)=>{s=Ma(s,mt(e,o),c)}),s}function q_(r,e){if(Oe(e))return Sn.empty();{const n=r.writeTree_.setTree(e,new Ze(null));return new Sn(n)}}function Ed(r,e){return vr(r,e)!=null}function vr(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(Lt(n.path,e)):null}function G_(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(st,(s,o)=>{e.push(new Te(s,o))}):r.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new Te(s,o.value))}),e}function ki(r,e){if(Oe(e))return r;{const n=vr(r,e);return n!=null?new Sn(new Ze(n)):new Sn(r.writeTree_.subtree(e))}}function Sd(r){return r.writeTree_.isEmpty()}function vs(r,e){return L0(ke(),r.writeTree_,e)}function L0(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let s=null;return e.children.inorderTraversal((o,c)=>{o===".priority"?(Y(c.value!==null,"Priority writes must always be leaf nodes"),s=c.value):n=L0(mt(r,o),c,n)}),!n.getChild(r).isEmpty()&&s!==null&&(n=n.updateChild(mt(r,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(r,e){return z0(e,r)}function XO(r,e,n,s,o){Y(s>r.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),r.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(r.visibleWrites=Ma(r.visibleWrites,e,n)),r.lastWriteId=s}function KO(r,e){for(let n=0;n<r.allWrites.length;n++){const s=r.allWrites[n];if(s.writeId===e)return s}return null}function ZO(r,e){const n=r.allWrites.findIndex(h=>h.writeId===e);Y(n>=0,"removeWrite called with nonexistent writeId.");const s=r.allWrites[n];r.allWrites.splice(n,1);let o=s.visible,c=!1,d=r.allWrites.length-1;for(;o&&d>=0;){const h=r.allWrites[d];h.visible&&(d>=n&&JO(h,s.path)?o=!1:yn(s.path,h.path)&&(c=!0)),d--}if(o){if(c)return e1(r),!0;if(s.snap)r.visibleWrites=q_(r.visibleWrites,s.path);else{const h=s.children;Vt(h,p=>{r.visibleWrites=q_(r.visibleWrites,mt(s.path,p))})}return!0}else return!1}function JO(r,e){if(r.snap)return yn(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&yn(mt(r.path,n),e))return!0;return!1}function e1(r){r.visibleWrites=U0(r.allWrites,t1,ke()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function t1(r){return r.visible}function U0(r,e,n){let s=Sn.empty();for(let o=0;o<r.length;++o){const c=r[o];if(e(c)){const d=c.path;let h;if(c.snap)yn(n,d)?(h=Lt(n,d),s=Ma(s,h,c.snap)):yn(d,n)&&(h=Lt(d,n),s=Ma(s,ke(),c.snap.getChild(h)));else if(c.children){if(yn(n,d))h=Lt(n,d),s=B_(s,h,c.children);else if(yn(d,n))if(h=Lt(d,n),Oe(h))s=B_(s,ke(),c.children);else{const p=hs(c.children,Se(h));if(p){const m=p.getChild(Xe(h));s=Ma(s,ke(),m)}}}else throw _s("WriteRecord should have .snap or .children")}}return s}function j0(r,e,n,s,o){if(!s&&!o){const c=vr(r.visibleWrites,e);if(c!=null)return c;{const d=ki(r.visibleWrites,e);if(Sd(d))return n;if(n==null&&!Ed(d,ke()))return null;{const h=n||ue.EMPTY_NODE;return vs(d,h)}}}else{const c=ki(r.visibleWrites,e);if(!o&&Sd(c))return n;if(!o&&n==null&&!Ed(c,ke()))return null;{const d=function(m){return(m.visible||o)&&(!s||!~s.indexOf(m.writeId))&&(yn(m.path,e)||yn(e,m.path))},h=U0(r.allWrites,d,e),p=n||ue.EMPTY_NODE;return vs(h,p)}}}function n1(r,e,n){let s=ue.EMPTY_NODE;const o=vr(r.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(st,(c,d)=>{s=s.updateImmediateChild(c,d)}),s;if(n){const c=ki(r.visibleWrites,e);return n.forEachChild(st,(d,h)=>{const p=vs(ki(c,new Fe(d)),h);s=s.updateImmediateChild(d,p)}),G_(c).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}else{const c=ki(r.visibleWrites,e);return G_(c).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}}function i1(r,e,n,s,o){Y(s||o,"Either existingEventSnap or existingServerSnap must exist");const c=mt(e,n);if(Ed(r.visibleWrites,c))return null;{const d=ki(r.visibleWrites,c);return Sd(d)?o.getChild(n):vs(d,o.getChild(n))}}function r1(r,e,n,s){const o=mt(e,n),c=vr(r.visibleWrites,o);if(c!=null)return c;if(s.isCompleteForChild(n)){const d=ki(r.visibleWrites,o);return vs(d,s.getNode().getImmediateChild(n))}else return null}function s1(r,e){return vr(r.visibleWrites,e)}function a1(r,e,n,s,o,c,d){let h;const p=ki(r.visibleWrites,e),m=vr(p,ke());if(m!=null)h=m;else if(n!=null)h=vs(p,n);else return[];if(h=h.withIndex(d),!h.isEmpty()&&!h.isLeafNode()){const _=[],b=d.getCompare(),T=c?h.getReverseIteratorFrom(s,d):h.getIteratorFrom(s,d);let O=T.getNext();for(;O&&_.length<o;)b(O,s)!==0&&_.push(O),O=T.getNext();return _}else return[]}function o1(){return{visibleWrites:Sn.empty(),allWrites:[],lastWriteId:-1}}function Vl(r,e,n,s){return j0(r.writeTree,r.treePath,e,n,s)}function _h(r,e){return n1(r.writeTree,r.treePath,e)}function V_(r,e,n,s){return i1(r.writeTree,r.treePath,e,n,s)}function Yl(r,e){return s1(r.writeTree,mt(r.treePath,e))}function l1(r,e,n,s,o,c){return a1(r.writeTree,r.treePath,e,n,s,o,c)}function yh(r,e,n){return r1(r.writeTree,r.treePath,e,n)}function P0(r,e){return z0(mt(r.treePath,e),r.writeTree)}function z0(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;Y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Y(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const c=o.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(s,qa(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(s,Ba(s,o.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(s,ms(s,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(s,qa(s,e.snapshotNode,o.oldSnap));else throw _s("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const H0=new u1;class bh{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Pi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yh(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:pr(this.viewCache_),c=l1(this.writes_,o,n,1,s,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(r){return{filter:r}}function d1(r,e){Y(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),Y(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function h1(r,e,n,s,o){const c=new c1;let d,h;if(n.type===bn.OVERWRITE){const m=n;m.source.fromUser?d=Td(r,e,m.path,m.snap,s,o,c):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!Oe(m.path),d=$l(r,e,m.path,m.snap,s,o,h,c))}else if(n.type===bn.MERGE){const m=n;m.source.fromUser?d=g1(r,e,m.path,m.children,s,o,c):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),d=Cd(r,e,m.path,m.children,s,o,h,c))}else if(n.type===bn.ACK_USER_WRITE){const m=n;m.revert?d=_1(r,e,m.path,s,o,c):d=m1(r,e,m.path,m.affectedTree,s,o,c)}else if(n.type===bn.LISTEN_COMPLETE)d=v1(r,e,n.path,s,c);else throw _s("Unknown operation type: "+n.type);const p=c.getChanges();return p1(e,d,p),{viewCache:d,changes:p}}function p1(r,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=Gl(r);(n.length>0||!r.eventCache.isFullyInitialized()||o&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&n.push(x0(Gl(e)))}}function B0(r,e,n,s,o,c){const d=e.eventCache;if(Yl(s,n)!=null)return e;{let h,p;if(Oe(n))if(Y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=pr(e),_=m instanceof ue?m:ue.EMPTY_NODE,b=_h(s,_);h=r.filter.updateFullNode(e.eventCache.getNode(),b,c)}else{const m=Vl(s,pr(e));h=r.filter.updateFullNode(e.eventCache.getNode(),m,c)}else{const m=Se(n);if(m===".priority"){Y(ji(n)===1,"Can't have a priority with additional path components");const _=d.getNode();p=e.serverCache.getNode();const b=V_(s,n,_,p);b!=null?h=r.filter.updatePriority(_,b):h=d.getNode()}else{const _=Xe(n);let b;if(d.isCompleteForChild(m)){p=e.serverCache.getNode();const T=V_(s,n,d.getNode(),p);T!=null?b=d.getNode().getImmediateChild(m).updateChild(_,T):b=d.getNode().getImmediateChild(m)}else b=yh(s,m,e.serverCache);b!=null?h=r.filter.updateChild(d.getNode(),m,b,_,o,c):h=d.getNode()}}return Ia(e,h,d.isFullyInitialized()||Oe(n),r.filter.filtersNodes())}}function $l(r,e,n,s,o,c,d,h){const p=e.serverCache;let m;const _=d?r.filter:r.filter.getIndexedFilter();if(Oe(n))m=_.updateFullNode(p.getNode(),s,null);else if(_.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(n,s);m=_.updateFullNode(p.getNode(),O,null)}else{const O=Se(n);if(!p.isCompleteForPath(n)&&ji(n)>1)return e;const N=Xe(n),L=p.getNode().getImmediateChild(O).updateChild(N,s);O===".priority"?m=_.updatePriority(p.getNode(),L):m=_.updateChild(p.getNode(),O,L,N,H0,null)}const b=k0(e,m,p.isFullyInitialized()||Oe(n),_.filtersNodes()),T=new bh(o,b,c);return B0(r,b,n,o,T,h)}function Td(r,e,n,s,o,c,d){const h=e.eventCache;let p,m;const _=new bh(o,e,c);if(Oe(n))m=r.filter.updateFullNode(e.eventCache.getNode(),s,d),p=Ia(e,m,!0,r.filter.filtersNodes());else{const b=Se(n);if(b===".priority")m=r.filter.updatePriority(e.eventCache.getNode(),s),p=Ia(e,m,h.isFullyInitialized(),h.isFiltered());else{const T=Xe(n),O=h.getNode().getImmediateChild(b);let N;if(Oe(T))N=s;else{const U=_.getCompleteChild(b);U!=null?S0(T)===".priority"&&U.getChild(C0(T)).isEmpty()?N=U:N=U.updateChild(T,s):N=ue.EMPTY_NODE}if(O.equals(N))p=e;else{const U=r.filter.updateChild(h.getNode(),b,N,T,_,d);p=Ia(e,U,h.isFullyInitialized(),r.filter.filtersNodes())}}}return p}function Y_(r,e){return r.eventCache.isCompleteForChild(e)}function g1(r,e,n,s,o,c,d){let h=e;return s.foreach((p,m)=>{const _=mt(n,p);Y_(e,Se(_))&&(h=Td(r,h,_,m,o,c,d))}),s.foreach((p,m)=>{const _=mt(n,p);Y_(e,Se(_))||(h=Td(r,h,_,m,o,c,d))}),h}function $_(r,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function Cd(r,e,n,s,o,c,d,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,m;Oe(n)?m=s:m=new Ze(null).setTree(n,s);const _=e.serverCache.getNode();return m.children.inorderTraversal((b,T)=>{if(_.hasChild(b)){const O=e.serverCache.getNode().getImmediateChild(b),N=$_(r,O,T);p=$l(r,p,new Fe(b),N,o,c,d,h)}}),m.children.inorderTraversal((b,T)=>{const O=!e.serverCache.isCompleteForChild(b)&&T.value===null;if(!_.hasChild(b)&&!O){const N=e.serverCache.getNode().getImmediateChild(b),U=$_(r,N,T);p=$l(r,p,new Fe(b),U,o,c,d,h)}}),p}function m1(r,e,n,s,o,c,d){if(Yl(o,n)!=null)return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(s.value!=null){if(Oe(n)&&p.isFullyInitialized()||p.isCompleteForPath(n))return $l(r,e,n,p.getNode().getChild(n),o,c,h,d);if(Oe(n)){let m=new Ze(null);return p.getNode().forEachChild(cs,(_,b)=>{m=m.set(new Fe(_),b)}),Cd(r,e,n,m,o,c,h,d)}else return e}else{let m=new Ze(null);return s.foreach((_,b)=>{const T=mt(n,_);p.isCompleteForPath(T)&&(m=m.set(_,p.getNode().getChild(T)))}),Cd(r,e,n,m,o,c,h,d)}}function v1(r,e,n,s,o){const c=e.serverCache,d=k0(e,c.getNode(),c.isFullyInitialized()||Oe(n),c.isFiltered());return B0(r,d,n,s,H0,o)}function _1(r,e,n,s,o,c){let d;if(Yl(s,n)!=null)return e;{const h=new bh(s,e,o),p=e.eventCache.getNode();let m;if(Oe(n)||Se(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=Vl(s,pr(e));else{const b=e.serverCache.getNode();Y(b instanceof ue,"serverChildren would be complete if leaf node"),_=_h(s,b)}_=_,m=r.filter.updateFullNode(p,_,c)}else{const _=Se(n);let b=yh(s,_,e.serverCache);b==null&&e.serverCache.isCompleteForChild(_)&&(b=p.getImmediateChild(_)),b!=null?m=r.filter.updateChild(p,_,b,Xe(n),h,c):e.eventCache.getNode().hasChild(_)?m=r.filter.updateChild(p,_,ue.EMPTY_NODE,Xe(n),h,c):m=p,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Vl(s,pr(e)),d.isLeafNode()&&(m=r.filter.updateFullNode(m,d,c)))}return d=e.serverCache.isFullyInitialized()||Yl(s,ke())!=null,Ia(e,m,d,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new ph(s.getIndex()),c=PO(s);this.processor_=f1(c);const d=n.serverCache,h=n.eventCache,p=o.updateFullNode(ue.EMPTY_NODE,d.getNode(),null),m=c.updateFullNode(ue.EMPTY_NODE,h.getNode(),null),_=new Pi(p,d.isFullyInitialized(),o.filtersNodes()),b=new Pi(m,h.isFullyInitialized(),c.filtersNodes());this.viewCache_=sc(b,_),this.eventGenerator_=new YO(this.query_)}get query(){return this.query_}}function b1(r){return r.viewCache_.serverCache.getNode()}function E1(r){return Gl(r.viewCache_)}function S1(r,e){const n=pr(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!Oe(e)&&!n.getImmediateChild(Se(e)).isEmpty())?n.getChild(e):null}function F_(r){return r.eventRegistrations_.length===0}function T1(r,e){r.eventRegistrations_.push(e)}function Q_(r,e,n){const s=[];if(n){Y(e==null,"A cancel should cancel all event registrations.");const o=r.query._path;r.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(n,o);d&&s.push(d)})}if(e){let o=[];for(let c=0;c<r.eventRegistrations_.length;++c){const d=r.eventRegistrations_[c];if(!d.matches(e))o.push(d);else if(e.hasAnyCallback()){o=o.concat(r.eventRegistrations_.slice(c+1));break}}r.eventRegistrations_=o}else r.eventRegistrations_=[];return s}function W_(r,e,n,s){e.type===bn.MERGE&&e.source.queryId!==null&&(Y(pr(r.viewCache_),"We should always have a full cache before handling merges"),Y(Gl(r.viewCache_),"Missing event cache, even though we have a server cache"));const o=r.viewCache_,c=h1(r.processor_,o,e,n,s);return d1(r.processor_,c.viewCache),Y(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=c.viewCache,q0(r,c.changes,c.viewCache.eventCache.getNode(),null)}function C1(r,e){const n=r.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(st,(c,d)=>{s.push(ms(c,d))}),n.isFullyInitialized()&&s.push(x0(n.getNode())),q0(r,s,n.getNode(),e)}function q0(r,e,n,s){const o=s?[s]:r.eventRegistrations_;return $O(r.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl;class G0{constructor(){this.views=new Map}}function w1(r){Y(!Fl,"__referenceConstructor has already been defined"),Fl=r}function O1(){return Y(Fl,"Reference.ts has not been loaded"),Fl}function R1(r){return r.views.size===0}function Eh(r,e,n,s){const o=e.source.queryId;if(o!==null){const c=r.views.get(o);return Y(c!=null,"SyncTree gave us an op for an invalid query."),W_(c,e,n,s)}else{let c=[];for(const d of r.views.values())c=c.concat(W_(d,e,n,s));return c}}function V0(r,e,n,s,o){const c=e._queryIdentifier,d=r.views.get(c);if(!d){let h=Vl(n,o?s:null),p=!1;h?p=!0:s instanceof ue?(h=_h(n,s),p=!1):(h=ue.EMPTY_NODE,p=!1);const m=sc(new Pi(h,p,!1),new Pi(s,o,!1));return new y1(e,m)}return d}function D1(r,e,n,s,o,c){const d=V0(r,e,s,o,c);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,d),T1(d,n),C1(d,n)}function N1(r,e,n,s){const o=e._queryIdentifier,c=[];let d=[];const h=zi(r);if(o==="default")for(const[p,m]of r.views.entries())d=d.concat(Q_(m,n,s)),F_(m)&&(r.views.delete(p),m.query._queryParams.loadsAllData()||c.push(m.query));else{const p=r.views.get(o);p&&(d=d.concat(Q_(p,n,s)),F_(p)&&(r.views.delete(o),p.query._queryParams.loadsAllData()||c.push(p.query)))}return h&&!zi(r)&&c.push(new(O1())(e._repo,e._path)),{removed:c,events:d}}function Y0(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Li(r,e){let n=null;for(const s of r.views.values())n=n||S1(s,e);return n}function $0(r,e){if(e._queryParams.loadsAllData())return oc(r);{const s=e._queryIdentifier;return r.views.get(s)}}function F0(r,e){return $0(r,e)!=null}function zi(r){return oc(r)!=null}function oc(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql;function A1(r){Y(!Ql,"__referenceConstructor has already been defined"),Ql=r}function x1(){return Y(Ql,"Reference.ts has not been loaded"),Ql}let I1=1;class X_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ze(null),this.pendingWriteTree_=o1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Q0(r,e,n,s,o){return XO(r.pendingWriteTree_,e,n,s,o),o?to(r,new hr(M0(),e,n)):[]}function cr(r,e,n=!1){const s=KO(r.pendingWriteTree_,e);if(ZO(r.pendingWriteTree_,e)){let c=new Ze(null);return s.snap!=null?c=c.set(ke(),!0):Vt(s.children,d=>{c=c.set(new Fe(d),!0)}),to(r,new ql(s.path,c,n))}else return[]}function eo(r,e,n){return to(r,new hr(mh(),e,n))}function M1(r,e,n){const s=Ze.fromObject(n);return to(r,new Ya(mh(),e,s))}function k1(r,e){return to(r,new Va(mh(),e))}function L1(r,e,n){const s=Th(r,n);if(s){const o=Ch(s),c=o.path,d=o.queryId,h=Lt(c,e),p=new Va(vh(d),h);return wh(r,c,p)}else return[]}function Wl(r,e,n,s,o=!1){const c=e._path,d=r.syncPointTree_.get(c);let h=[];if(d&&(e._queryIdentifier==="default"||F0(d,e))){const p=N1(d,e,n,s);R1(d)&&(r.syncPointTree_=r.syncPointTree_.remove(c));const m=p.removed;if(h=p.events,!o){const _=m.findIndex(T=>T._queryParams.loadsAllData())!==-1,b=r.syncPointTree_.findOnPath(c,(T,O)=>zi(O));if(_&&!b){const T=r.syncPointTree_.subtree(c);if(!T.isEmpty()){const O=P1(T);for(let N=0;N<O.length;++N){const U=O[N],L=U.query,$=Z0(r,U);r.listenProvider_.startListening(ka(L),$a(r,L),$.hashFn,$.onComplete)}}}!b&&m.length>0&&!s&&(_?r.listenProvider_.stopListening(ka(e),null):m.forEach(T=>{const O=r.queryToTagMap.get(lc(T));r.listenProvider_.stopListening(ka(T),O)}))}z1(r,m)}return h}function W0(r,e,n,s){const o=Th(r,s);if(o!=null){const c=Ch(o),d=c.path,h=c.queryId,p=Lt(d,e),m=new hr(vh(h),p,n);return wh(r,d,m)}else return[]}function U1(r,e,n,s){const o=Th(r,s);if(o){const c=Ch(o),d=c.path,h=c.queryId,p=Lt(d,e),m=Ze.fromObject(n),_=new Ya(vh(h),p,m);return wh(r,d,_)}else return[]}function wd(r,e,n,s=!1){const o=e._path;let c=null,d=!1;r.syncPointTree_.foreachOnPath(o,(T,O)=>{const N=Lt(T,o);c=c||Li(O,N),d=d||zi(O)});let h=r.syncPointTree_.get(o);h?(d=d||zi(h),c=c||Li(h,ke())):(h=new G0,r.syncPointTree_=r.syncPointTree_.set(o,h));let p;c!=null?p=!0:(p=!1,c=ue.EMPTY_NODE,r.syncPointTree_.subtree(o).foreachChild((O,N)=>{const U=Li(N,ke());U&&(c=c.updateImmediateChild(O,U))}));const m=F0(h,e);if(!m&&!e._queryParams.loadsAllData()){const T=lc(e);Y(!r.queryToTagMap.has(T),"View does not exist, but we have a tag");const O=H1();r.queryToTagMap.set(T,O),r.tagToQueryMap.set(O,T)}const _=ac(r.pendingWriteTree_,o);let b=D1(h,e,n,_,c,p);if(!m&&!d&&!s){const T=$0(h,e);b=b.concat(B1(r,e,T))}return b}function Sh(r,e,n){const o=r.pendingWriteTree_,c=r.syncPointTree_.findOnPath(e,(d,h)=>{const p=Lt(d,e),m=Li(h,p);if(m)return m});return j0(o,e,c,n,!0)}function j1(r,e){const n=e._path;let s=null;r.syncPointTree_.foreachOnPath(n,(m,_)=>{const b=Lt(m,n);s=s||Li(_,b)});let o=r.syncPointTree_.get(n);o?s=s||Li(o,ke()):(o=new G0,r.syncPointTree_=r.syncPointTree_.set(n,o));const c=s!=null,d=c?new Pi(s,!0,!1):null,h=ac(r.pendingWriteTree_,e._path),p=V0(o,e,h,c?d.getNode():ue.EMPTY_NODE,c);return E1(p)}function to(r,e){return X0(e,r.syncPointTree_,null,ac(r.pendingWriteTree_,ke()))}function X0(r,e,n,s){if(Oe(r.path))return K0(r,e,n,s);{const o=e.get(ke());n==null&&o!=null&&(n=Li(o,ke()));let c=[];const d=Se(r.path),h=r.operationForChild(d),p=e.children.get(d);if(p&&h){const m=n?n.getImmediateChild(d):null,_=P0(s,d);c=c.concat(X0(h,p,m,_))}return o&&(c=c.concat(Eh(o,r,s,n))),c}}function K0(r,e,n,s){const o=e.get(ke());n==null&&o!=null&&(n=Li(o,ke()));let c=[];return e.children.inorderTraversal((d,h)=>{const p=n?n.getImmediateChild(d):null,m=P0(s,d),_=r.operationForChild(d);_&&(c=c.concat(K0(_,h,p,m)))}),o&&(c=c.concat(Eh(o,r,s,n))),c}function Z0(r,e){const n=e.query,s=$a(r,n);return{hashFn:()=>(b1(e)||ue.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?L1(r,n._path,s):k1(r,n._path);{const c=jw(o,n);return Wl(r,n,null,c)}}}}function $a(r,e){const n=lc(e);return r.queryToTagMap.get(n)}function lc(r){return r._path.toString()+"$"+r._queryIdentifier}function Th(r,e){return r.tagToQueryMap.get(e)}function Ch(r){const e=r.indexOf("$");return Y(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new Fe(r.substr(0,e))}}function wh(r,e,n){const s=r.syncPointTree_.get(e);Y(s,"Missing sync point for query tag that we're tracking");const o=ac(r.pendingWriteTree_,e);return Eh(s,n,o,null)}function P1(r){return r.fold((e,n,s)=>{if(n&&zi(n))return[oc(n)];{let o=[];return n&&(o=Y0(n)),Vt(s,(c,d)=>{o=o.concat(d)}),o}})}function ka(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(x1())(r._repo,r._path):r}function z1(r,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=lc(s),c=r.queryToTagMap.get(o);r.queryToTagMap.delete(o),r.tagToQueryMap.delete(c)}}}function H1(){return I1++}function B1(r,e,n){const s=e._path,o=$a(r,e),c=Z0(r,n),d=r.listenProvider_.startListening(ka(e),o,c.hashFn,c.onComplete),h=r.syncPointTree_.subtree(s);if(o)Y(!zi(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((m,_,b)=>{if(!Oe(m)&&_&&zi(_))return[oc(_).query];{let T=[];return _&&(T=T.concat(Y0(_).map(O=>O.query))),Vt(b,(O,N)=>{T=T.concat(N)}),T}});for(let m=0;m<p.length;++m){const _=p[m];r.listenProvider_.stopListening(ka(_),$a(r,_))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Oh(n)}node(){return this.node_}}class Rh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=mt(this.path_,e);return new Rh(this.syncTree_,n)}node(){return Sh(this.syncTree_,this.path_)}}const q1=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},K_=function(r,e,n){if(!r||typeof r!="object")return r;if(Y(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return G1(r[".sv"],e,n);if(typeof r[".sv"]=="object")return V1(r[".sv"],e);Y(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},G1=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:Y(!1,"Unexpected server value: "+r)}},V1=function(r,e,n){r.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const s=r.increment;typeof s!="number"&&Y(!1,"Unexpected increment value: "+s);const o=e.node();if(Y(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const d=o.getValue();return typeof d!="number"?s:d+s},Y1=function(r,e,n,s){return Dh(e,new Rh(n,r),s)},J0=function(r,e,n){return Dh(r,new Oh(e),n)};function Dh(r,e,n){const s=r.getPriority().val(),o=K_(s,e.getImmediateChild(".priority"),n);let c;if(r.isLeafNode()){const d=r,h=K_(d.getValue(),e,n);return h!==d.getValue()||o!==d.getPriority().val()?new Et(h,Tt(o)):r}else{const d=r;return c=d,o!==d.getPriority().val()&&(c=c.updatePriority(new Et(o))),d.forEachChild(st,(h,p)=>{const m=Dh(p,e.getImmediateChild(h),n);m!==p&&(c=c.updateImmediateChild(h,m))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Ah(r,e){let n=e instanceof Fe?e:new Fe(e),s=r,o=Se(n);for(;o!==null;){const c=hs(s.node.children,o)||{children:{},childCount:0};s=new Nh(o,s,c),n=Xe(n),o=Se(n)}return s}function Ts(r){return r.node.value}function eb(r,e){r.node.value=e,Od(r)}function tb(r){return r.node.childCount>0}function $1(r){return Ts(r)===void 0&&!tb(r)}function cc(r,e){Vt(r.node.children,(n,s)=>{e(new Nh(n,r,s))})}function nb(r,e,n,s){n&&e(r),cc(r,o=>{nb(o,e,!0)})}function F1(r,e,n){let s=r.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function no(r){return new Fe(r.parent===null?r.name:no(r.parent)+"/"+r.name)}function Od(r){r.parent!==null&&Q1(r.parent,r.name,r)}function Q1(r,e,n){const s=$1(n),o=ei(r.node.children,e);s&&o?(delete r.node.children[e],r.node.childCount--,Od(r)):!s&&!o&&(r.node.children[e]=n.node,r.node.childCount++,Od(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=/[\[\].#$\/\u0000-\u001F\u007F]/,X1=/[\[\].#$\u0000-\u001F\u007F]/,Zf=10*1024*1024,ib=function(r){return typeof r=="string"&&r.length!==0&&!W1.test(r)},rb=function(r){return typeof r=="string"&&r.length!==0&&!X1.test(r)},K1=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),rb(r)},Z1=function(r,e,n,s){xh(ih(r,"value"),e,n)},xh=function(r,e,n){const s=n instanceof Fe?new mO(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+or(s));if(typeof e=="function")throw new Error(r+"contains a function "+or(s)+" with contents = "+e.toString());if(t0(e))throw new Error(r+"contains "+e.toString()+" "+or(s));if(typeof e=="string"&&e.length>Zf/3&&ic(e)>Zf)throw new Error(r+"contains a string greater than "+Zf+" utf8 bytes "+or(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,c=!1;if(Vt(e,(d,h)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!ib(d)))throw new Error(r+" contains an invalid key ("+d+") "+or(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vO(s,d),xh(r,h,s),_O(s)}),o&&c)throw new Error(r+' contains ".value" child '+or(s)+" in addition to actual children.")}},sb=function(r,e,n,s){if(!rb(n))throw new Error(ih(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},J1=function(r,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sb(r,e,n)},ab=function(r,e){if(Se(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},eR=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ib(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!K1(n))throw new Error(ih(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ih(r,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],c=o.getPath();n!==null&&!fh(c,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(o)}n&&r.eventLists_.push(n)}function ob(r,e,n){Ih(r,n),lb(r,s=>fh(s,e))}function An(r,e,n){Ih(r,n),lb(r,s=>yn(s,e)||yn(e,s))}function lb(r,e){r.recursionDepth_++;let n=!0;for(let s=0;s<r.eventLists_.length;s++){const o=r.eventLists_[s];if(o){const c=o.path;e(c)?(nR(r.eventLists_[s]),r.eventLists_[s]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function nR(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const s=n.getEventRunner();Aa&&Mt("event: "+n.toString()),Ss(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="repo_interrupt",rR=25;class sR{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bl(),this.transactionQueueTree_=new Nh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aR(r,e,n){if(r.stats_=ch(r.repoInfo_),r.forceRestClient_||Bw())r.server_=new Hl(r.repoInfo_,(s,o,c,d)=>{Z_(r,s,o,c,d)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>J_(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}r.persistentConnection_=new Wn(r.repoInfo_,e,(s,o,c,d)=>{Z_(r,s,o,c,d)},s=>{J_(r,s)},s=>{lR(r,s)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(s=>{r.server_.refreshAuthToken(s)}),r.appCheckProvider_.addTokenChangeListener(s=>{r.server_.refreshAppCheckToken(s.token)}),r.statsReporter_=$w(r.repoInfo_,()=>new VO(r.stats_,r.server_)),r.infoData_=new zO,r.infoSyncTree_=new X_({startListening:(s,o,c,d)=>{let h=[];const p=r.infoData_.getNode(s._path);return p.isEmpty()||(h=eo(r.infoSyncTree_,s._path,p),setTimeout(()=>{d("ok")},0)),h},stopListening:()=>{}}),kh(r,"connected",!1),r.serverSyncTree_=new X_({startListening:(s,o,c,d)=>(r.server_.listen(s,c,o,(h,p)=>{const m=d(h,p);An(r.eventQueue_,s._path,m)}),[]),stopListening:(s,o)=>{r.server_.unlisten(s,o)}})}function oR(r){const n=r.infoData_.getNode(new Fe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Mh(r){return q1({timestamp:oR(r)})}function Z_(r,e,n,s,o){r.dataUpdateCount++;const c=new Fe(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let d=[];if(o)if(s){const p=Ll(n,m=>Tt(m));d=U1(r.serverSyncTree_,c,p,o)}else{const p=Tt(n);d=W0(r.serverSyncTree_,c,p,o)}else if(s){const p=Ll(n,m=>Tt(m));d=M1(r.serverSyncTree_,c,p)}else{const p=Tt(n);d=eo(r.serverSyncTree_,c,p)}let h=c;d.length>0&&(h=fc(r,c)),An(r.eventQueue_,h,d)}function J_(r,e){kh(r,"connected",e),e===!1&&fR(r)}function lR(r,e){Vt(e,(n,s)=>{kh(r,n,s)})}function kh(r,e,n){const s=new Fe("/.info/"+e),o=Tt(n);r.infoData_.updateSnapshot(s,o);const c=eo(r.infoSyncTree_,s,o);An(r.eventQueue_,s,c)}function cb(r){return r.nextWriteId_++}function cR(r,e,n){const s=j1(r.serverSyncTree_,e);return s!=null?Promise.resolve(s):r.server_.get(e).then(o=>{const c=Tt(o).withIndex(e._queryParams.getIndex());wd(r.serverSyncTree_,e,n,!0);let d;if(e._queryParams.loadsAllData())d=eo(r.serverSyncTree_,e._path,c);else{const h=$a(r.serverSyncTree_,e);d=W0(r.serverSyncTree_,e._path,c,h)}return An(r.eventQueue_,e._path,d),Wl(r.serverSyncTree_,e,n,null,!0),c},o=>(uc(r,"get for query "+gt(e)+" failed: "+o),Promise.reject(new Error(o))))}function uR(r,e,n,s,o){uc(r,"set",{path:e.toString(),value:n,priority:s});const c=Mh(r),d=Tt(n,s),h=Sh(r.serverSyncTree_,e),p=J0(d,h,c),m=cb(r),_=Q0(r.serverSyncTree_,e,p,m,!0);Ih(r.eventQueue_,_),r.server_.put(e.toString(),d.val(!0),(T,O)=>{const N=T==="ok";N||Gt("set at "+e+" failed: "+T);const U=cr(r.serverSyncTree_,m,!N);An(r.eventQueue_,e,U),pR(r,o,T,O)});const b=gb(r,e);fc(r,b),An(r.eventQueue_,b,[])}function fR(r){uc(r,"onDisconnectEvents");const e=Mh(r),n=Bl();bd(r.onDisconnect_,ke(),(o,c)=>{const d=Y1(o,c,r.serverSyncTree_,e);I0(n,o,d)});let s=[];bd(n,ke(),(o,c)=>{s=s.concat(eo(r.serverSyncTree_,o,c));const d=gb(r,o);fc(r,d)}),r.onDisconnect_=Bl(),An(r.eventQueue_,ke(),s)}function dR(r,e,n){let s;Se(e._path)===".info"?s=wd(r.infoSyncTree_,e,n):s=wd(r.serverSyncTree_,e,n),ob(r.eventQueue_,e._path,s)}function ub(r,e,n){let s;Se(e._path)===".info"?s=Wl(r.infoSyncTree_,e,n):s=Wl(r.serverSyncTree_,e,n),ob(r.eventQueue_,e._path,s)}function hR(r){r.persistentConnection_&&r.persistentConnection_.interrupt(iR)}function uc(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),Mt(n,...e)}function pR(r,e,n,s){e&&Ss(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let c=o;s&&(c+=": "+s);const d=new Error(c);d.code=o,e(d)}})}function fb(r,e,n){return Sh(r.serverSyncTree_,e,n)||ue.EMPTY_NODE}function Lh(r,e=r.transactionQueueTree_){if(e||dc(r,e),Ts(e)){const n=hb(r,e);Y(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&gR(r,no(e),n)}else tb(e)&&cc(e,n=>{Lh(r,n)})}function gR(r,e,n){const s=n.map(m=>m.currentWriteId),o=fb(r,e,s);let c=o;const d=o.hash();for(let m=0;m<n.length;m++){const _=n[m];Y(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const b=Lt(e,_.path);c=c.updateChild(b,_.currentOutputSnapshotRaw)}const h=c.val(!0),p=e;r.server_.put(p.toString(),h,m=>{uc(r,"transaction put response",{path:p.toString(),status:m});let _=[];if(m==="ok"){const b=[];for(let T=0;T<n.length;T++)n[T].status=2,_=_.concat(cr(r.serverSyncTree_,n[T].currentWriteId)),n[T].onComplete&&b.push(()=>n[T].onComplete(null,!0,n[T].currentOutputSnapshotResolved)),n[T].unwatcher();dc(r,Ah(r.transactionQueueTree_,e)),Lh(r,r.transactionQueueTree_),An(r.eventQueue_,e,_);for(let T=0;T<b.length;T++)Ss(b[T])}else{if(m==="datastale")for(let b=0;b<n.length;b++)n[b].status===3?n[b].status=4:n[b].status=0;else{Gt("transaction at "+p.toString()+" failed: "+m);for(let b=0;b<n.length;b++)n[b].status=4,n[b].abortReason=m}fc(r,e)}},d)}function fc(r,e){const n=db(r,e),s=no(n),o=hb(r,n);return mR(r,o,s),s}function mR(r,e,n){if(e.length===0)return;const s=[];let o=[];const d=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],m=Lt(n,p.path);let _=!1,b;if(Y(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)_=!0,b=p.abortReason,o=o.concat(cr(r.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=rR)_=!0,b="maxretry",o=o.concat(cr(r.serverSyncTree_,p.currentWriteId,!0));else{const T=fb(r,p.path,d);p.currentInputSnapshot=T;const O=e[h].update(T.val());if(O!==void 0){xh("transaction failed: Data returned ",O,p.path);let N=Tt(O);typeof O=="object"&&O!=null&&ei(O,".priority")||(N=N.updatePriority(T.getPriority()));const L=p.currentWriteId,$=Mh(r),F=J0(N,T,$);p.currentOutputSnapshotRaw=N,p.currentOutputSnapshotResolved=F,p.currentWriteId=cb(r),d.splice(d.indexOf(L),1),o=o.concat(Q0(r.serverSyncTree_,p.path,F,p.currentWriteId,p.applyLocally)),o=o.concat(cr(r.serverSyncTree_,L,!0))}else _=!0,b="nodata",o=o.concat(cr(r.serverSyncTree_,p.currentWriteId,!0))}An(r.eventQueue_,n,o),o=[],_&&(e[h].status=2,function(T){setTimeout(T,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(b==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(b),!1,null))))}dc(r,r.transactionQueueTree_);for(let h=0;h<s.length;h++)Ss(s[h]);Lh(r,r.transactionQueueTree_)}function db(r,e){let n,s=r.transactionQueueTree_;for(n=Se(e);n!==null&&Ts(s)===void 0;)s=Ah(s,n),e=Xe(e),n=Se(e);return s}function hb(r,e){const n=[];return pb(r,e,n),n.sort((s,o)=>s.order-o.order),n}function pb(r,e,n){const s=Ts(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);cc(e,o=>{pb(r,o,n)})}function dc(r,e){const n=Ts(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,eb(e,n.length>0?n:void 0)}cc(e,s=>{dc(r,s)})}function gb(r,e){const n=no(db(r,e)),s=Ah(r.transactionQueueTree_,e);return F1(s,o=>{Jf(r,o)}),Jf(r,s),nb(s,o=>{Jf(r,o)}),n}function Jf(r,e){const n=Ts(e);if(n){const s=[];let o=[],c=-1;for(let d=0;d<n.length;d++)n[d].status===3||(n[d].status===1?(Y(c===d-1,"All SENT items should be at beginning of queue."),c=d,n[d].status=3,n[d].abortReason="set"):(Y(n[d].status===0,"Unexpected transaction status in abort"),n[d].unwatcher(),o=o.concat(cr(r.serverSyncTree_,n[d].currentWriteId,!0)),n[d].onComplete&&s.push(n[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?eb(e,void 0):n.length=c+1,An(r.eventQueue_,no(e),o);for(let d=0;d<s.length;d++)Ss(s[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r){let e="";const n=r.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function _R(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Gt(`Invalid query segment '${n}' in query '${r}'`)}return e}const ey=function(r,e){const n=yR(r),s=n.namespace;n.domain==="firebase.com"&&Kn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Kn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Iw();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new h0(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new Fe(n.pathString)}},yR=function(r){let e="",n="",s="",o="",c="",d=!0,h="https",p=443;if(typeof r=="string"){let m=r.indexOf("//");m>=0&&(h=r.substring(0,m-1),r=r.substring(m+2));let _=r.indexOf("/");_===-1&&(_=r.length);let b=r.indexOf("?");b===-1&&(b=r.length),e=r.substring(0,Math.min(_,b)),_<b&&(o=vR(r.substring(_,b)));const T=_R(r.substring(Math.min(r.length,b)));m=e.indexOf(":"),m>=0?(d=h==="https"||h==="wss",p=parseInt(e.substring(m+1),10)):m=e.length;const O=e.slice(0,m);if(O.toLowerCase()==="localhost")n="localhost";else if(O.split(".").length<=2)n=O;else{const N=e.indexOf(".");s=e.substring(0,N).toLowerCase(),n=e.substring(N+1),c=s}"ns"in T&&(c=T.ns)}return{host:e,port:p,domain:n,subdomain:s,secure:d,scheme:h,pathString:o,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+gt(this.snapshot.exportVal())}}class ER{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return Oe(this._path)?null:S0(this._path)}get ref(){return new ti(this._repo,this._path)}get _queryIdentifier(){const e=z_(this._queryParams),n=oh(e);return n==="{}"?"default":n}get _queryObject(){return z_(this._queryParams)}isEqual(e){if(e=dn(e),!(e instanceof Uh))return!1;const n=this._repo===e._repo,s=fh(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+gO(this._path)}}class ti extends Uh{constructor(e,n){super(e,n,new gh,!1)}get parent(){const e=C0(this._path);return e===null?null:new ti(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Fa{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Fe(e),s=Rd(this.ref,e);return new Fa(this._node.getChild(n),s,st)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new Fa(o,Rd(this.ref,s),st)))}hasChild(e){const n=new Fe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ne(r,e){return r=dn(r),r._checkNotDeleted("ref"),e!==void 0?Rd(r._root,e):r._root}function Rd(r,e){return r=dn(r),Se(r._path)===null?J1("child","path",e):sb("child","path",e),new ti(r._repo,mt(r._path,e))}function _n(r){return ab("remove",r._path),Be(r,null)}function Be(r,e){r=dn(r),ab("set",r._path),Z1("set",e,r._path);const n=new nc;return uR(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function SR(r){r=dn(r);const e=new mb(()=>{}),n=new hc(e);return cR(r._repo,r,n).then(s=>new Fa(s,new ti(r._repo,r._path),r._queryParams.getIndex()))}class hc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new bR("value",this,new Fa(e.snapshotNode,new ti(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ER(this,e,n):null}matches(e){return e instanceof hc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function TR(r,e,n,s,o){const c=new mb(n,void 0),d=new hc(c);return dR(r._repo,r,d),()=>ub(r._repo,r,d)}function CR(r,e,n,s){return TR(r,"value",e)}function wR(r,e,n){ub(r._repo,r,null)}w1(ti);A1(ti);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="FIREBASE_DATABASE_EMULATOR_HOST",Dd={};let RR=!1;function DR(r,e,n,s){r.repoInfo_=new h0(e,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(r.authTokenProvider_=s)}function NR(r,e,n,s,o){let c=s||r.options.databaseURL;c===void 0&&(r.options.projectId||Kn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mt("Using default host for project ",r.options.projectId),c=`${r.options.projectId}-default-rtdb.firebaseio.com`);let d=ey(c,o),h=d.repoInfo,p;typeof process<"u"&&E_&&(p=E_[OR]),p?(c=`http://${p}?ns=${h.namespace}`,d=ey(c,o),h=d.repoInfo):d.repoInfo.secure;const m=new Gw(r.name,r.options,e);eR("Invalid Firebase Database URL",d),Oe(d.path)||Kn("Database URL must point to the root of a Firebase Database (not including a child path).");const _=xR(h,r,m,new qw(r,n));return new IR(_,r)}function AR(r,e){const n=Dd[e];(!n||n[r.key]!==r)&&Kn(`Database ${e}(${r.repoInfo_}) has already been deleted.`),hR(r),delete n[r.key]}function xR(r,e,n,s){let o=Dd[e.name];o||(o={},Dd[e.name]=o);let c=o[r.toURLString()];return c&&Kn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new sR(r,RR,n,s),o[r.toURLString()]=c,c}class IR{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ti(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(AR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kn("Cannot call "+e+" on a deleted database.")}}function MR(r=Wy(),e){const n=ah(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=eC("database");s&&kR(n,...s)}return n}function kR(r,e,n,s={}){r=dn(r),r._checkNotDeleted("useEmulator");const o=`${e}:${n}`,c=r._repoInternal;if(r._instanceStarted){if(o===r._repoInternal.repoInfo_.host&&ur(s,c.repoInfo_.emulatorOptions))return;Kn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(c.repoInfo_.nodeAdmin)s.mockUserToken&&Kn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Rl(Rl.OWNER);else if(s.mockUserToken){const h=typeof s.mockUserToken=="string"?s.mockUserToken:tC(s.mockUserToken,r.app.options.projectId);d=new Rl(h)}DR(c,o,s,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(r){Ow(bs),ps(new fr("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return NR(s,o,c,n)},"PUBLIC").setMultipleInstances(!0)),Mi(S_,T_,r),Mi(S_,T_,"esm2017")}Wn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Wn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};LR();var UR="firebase",jR="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(UR,jR,"app");function jh(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PR=vb,_b=new Xa("auth","Firebase",vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new rh("@firebase/auth");function zR(r,...e){Xl.logLevel<=Ye.WARN&&Xl.warn(`Auth (${bs}): ${r}`,...e)}function Dl(r,...e){Xl.logLevel<=Ye.ERROR&&Xl.error(`Auth (${bs}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(r,...e){throw Ph(r,...e)}function Dn(r,...e){return Ph(r,...e)}function yb(r,e,n){const s=Object.assign(Object.assign({},PR()),{[e]:n});return new Xa("auth","Firebase",s).create(e,{appName:r.name})}function Ui(r){return yb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ph(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return _b.create(r,...e)}function de(r,e,...n){if(!r)throw Ph(e,...n)}function Fn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Dl(e),new Error(e)}function Jn(r,e){r||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function HR(){return ty()==="http:"||ty()==="https:"}function ty(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HR()||iC()||"connection"in navigator)?navigator.onLine:!0}function qR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=nh()||Vy()}get(){return BR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(r,e){Jn(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YR=new io(3e4,6e4);function pc(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Cs(r,e,n,s,o={}){return Eb(r,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const h=ys(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const m=Object.assign({method:e,headers:p},c);return nC()||(m.referrerPolicy="no-referrer"),bb.fetch()(await Tb(r,r.config.apiHost,n,h),m)})}async function Eb(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},GR),e);try{const o=new $R(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Cl(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const h=c.ok?d.errorMessage:d.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cl(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Cl(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw Cl(r,"user-disabled",d);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw yb(r,_,m);Zn(r,_)}}catch(o){if(o instanceof Bi)throw o;Zn(r,"network-request-failed",{message:String(o)})}}async function Sb(r,e,n,s,o={}){const c=await Cs(r,e,n,s,o);return"mfaPendingCredential"in c&&Zn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Tb(r,e,n,s){const o=`${e}${n}?${s}`,c=r,d=c.config.emulator?zh(r.config,o):`${r.config.apiScheme}://${o}`;return VR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class $R{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Dn(this.auth,"network-request-failed")),YR.get())})}}function Cl(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Dn(r,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(r,e){return Cs(r,"POST","/v1/accounts:delete",e)}async function Kl(r,e){return Cs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QR(r,e=!1){const n=dn(r),s=await n.getIdToken(e),o=Hh(s);de(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:La(ed(o.auth_time)),issuedAtTime:La(ed(o.iat)),expirationTime:La(ed(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function ed(r){return Number(r)*1e3}function Hh(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Dl("JWT malformed, contained fewer than 3 sections"),null;try{const o=kl(n);return o?JSON.parse(o):(Dl("Failed to decode base64 JWT payload"),null)}catch(o){return Dl("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ny(r){const e=Hh(r);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Bi&&WR(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function WR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=La(this.lastLoginAt),this.creationTime=La(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Qa(r,Kl(n,{idToken:s}));de(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];r._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Cb(c.providerUserInfo):[],h=ZR(r.providerData,d),p=r.isAnonymous,m=!(r.email&&c.passwordHash)&&!(h!=null&&h.length),_=p?m:!1,b={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new Ad(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(r,b)}async function KR(r){const e=dn(r);await Zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZR(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Cb(r){return r.map(e=>{var{providerId:n}=e,s=jh(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(r,e){const n=await Eb(r,{},async()=>{const s=ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await Tb(r,o,"/v1/token",`key=${c}`),h=await r._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",bb.fetch()(d,{method:"POST",headers:h,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eD(r,e){return Cs(r,"POST","/v2/accounts:revokeToken",pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=ny(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await JR(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new us;return s&&(de(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(de(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(de(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new us,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(r,e){de(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class En{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,c=jh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Ad(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Qa(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QR(this,e)}reload(){return KR(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new En(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Zl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Ui(this.auth));const e=await this.getIdToken();return await Qa(this,FR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,c,d,h,p,m,_;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,T=(o=n.email)!==null&&o!==void 0?o:void 0,O=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,N=(d=n.photoURL)!==null&&d!==void 0?d:void 0,U=(h=n.tenantId)!==null&&h!==void 0?h:void 0,L=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,$=(m=n.createdAt)!==null&&m!==void 0?m:void 0,F=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Q,emailVerified:ne,isAnonymous:Z,providerData:_e,stsTokenManager:ge}=n;de(Q&&ge,e,"internal-error");const he=us.fromJSON(this.name,ge);de(typeof Q=="string",e,"internal-error"),Oi(b,e.name),Oi(T,e.name),de(typeof ne=="boolean",e,"internal-error"),de(typeof Z=="boolean",e,"internal-error"),Oi(O,e.name),Oi(N,e.name),Oi(U,e.name),Oi(L,e.name),Oi($,e.name),Oi(F,e.name);const je=new En({uid:Q,auth:e,email:T,emailVerified:ne,displayName:b,isAnonymous:Z,photoURL:N,phoneNumber:O,tenantId:U,stsTokenManager:he,createdAt:$,lastLoginAt:F});return _e&&Array.isArray(_e)&&(je.providerData=_e.map(tt=>Object.assign({},tt))),L&&(je._redirectEventId=L),je}static async _fromIdTokenResponse(e,n,s=!1){const o=new us;o.updateFromServerResponse(n);const c=new En({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Zl(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];de(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Cb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),h=new us;h.updateFromIdToken(s);const p=new En({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:d}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ad(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new Map;function Qn(r){Jn(r instanceof Function,"Expected a class definition");let e=iy.get(r);return e?(Jn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,iy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wb.type="NONE";const ry=wb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(r,e,n){return`firebase:${r}:${e}:${n}`}class fs{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Nl(this.userKey,o.apiKey,c),this.fullPersistenceKey=Nl("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kl(this.auth,{idToken:e}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new fs(Qn(ry),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let c=o[0]||Qn(ry);const d=Nl(s,e.config.apiKey,e.name);let h=null;for(const m of n)try{const _=await m._get(d);if(_){let b;if(typeof _=="string"){const T=await Kl(e,{idToken:_}).catch(()=>{});if(!T)break;b=await En._fromGetAccountInfoResponse(e,T,_)}else b=En._fromJSON(e,_);m!==c&&(h=b),c=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new fs(c,e,s):(c=p[0],h&&await c._set(d,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==c)try{await m._remove(d)}catch{}})),new fs(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xb(e))return"Blackberry";if(Ib(e))return"Webos";if(Rb(e))return"Safari";if((e.includes("chrome/")||Db(e))&&!e.includes("edge/"))return"Chrome";if(Ab(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Ob(r=Ut()){return/firefox\//i.test(r)}function Rb(r=Ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Db(r=Ut()){return/crios\//i.test(r)}function Nb(r=Ut()){return/iemobile/i.test(r)}function Ab(r=Ut()){return/android/i.test(r)}function xb(r=Ut()){return/blackberry/i.test(r)}function Ib(r=Ut()){return/webos/i.test(r)}function Bh(r=Ut()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function tD(r=Ut()){var e;return Bh(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nD(){return rC()&&document.documentMode===10}function Mb(r=Ut()){return Bh(r)||Ab(r)||Ib(r)||xb(r)||/windows phone/i.test(r)||Nb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(r,e=[]){let n;switch(r){case"Browser":n=sy(Ut());break;case"Worker":n=`${sy(Ut())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bs}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,h)=>{try{const p=e(c);d(p)}catch(p){h(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(r,e={}){return Cs(r,"GET","/v2/passwordPolicy",pc(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=6;class aD{constructor(e){var n,s,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:sD,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,c,d,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ay(this),this.idTokenSubscription=new ay(this),this.beforeStateQueue=new iD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await fs.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kl(this,{idToken:e}),s=await En._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===h)&&(p!=null&&p.user)&&(o=p.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Ui(this));const n=e?dn(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rD(this),n=new aD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await eD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await fs.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(h,this,"internal-error"),h.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gc(r){return dn(r)}class ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=pC(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lD(r){qh=r}function cD(r){return qh.loadJS(r)}function uD(){return qh.gapiScript}function fD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(r,e){const n=ah(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ur(c,e??{}))return o;Zn(o,"already-initialized")}return n.initialize({options:e})}function hD(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function pD(r,e,n){const s=gc(r);de(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=Lb(e),{host:d,port:h}=gD(e),p=h===null?"":`:${h}`,m={url:`${c}//${d}${p}/`},_=Object.freeze({host:d,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){de(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),de(ur(m,s.config.emulator)&&ur(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,mD()}function Lb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function gD(r){const e=Lb(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:oy(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:oy(d)}}}function oy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function mD(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(r,e){return Sb(r,"POST","/v1/accounts:signInWithIdp",pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="http://localhost";class gr extends Ub{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,c=jh(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new gr(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ds(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ds(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ds(e,n)}buildRequest(){const e={requestUri:vD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ys(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends jb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends ro{constructor(){super("facebook.com")}static credential(e){return gr._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends ro{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gr._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Di.credential(n,s)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends ro{constructor(){super("github.com")}static credential(e){return gr._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends ro{constructor(){super("twitter.com")}static credential(e,n){return gr._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ai.credential(n,s)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(r,e){return Sb(r,"POST","/v1/accounts:signUp",pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await En._fromIdTokenResponse(e,s,o),d=ly(s);return new Hi({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=ly(s);return new Hi({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function ly(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(r){var e;if(mn(r.app))return Promise.reject(Ui(r));const n=gc(r);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Hi({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await _D(n,{returnSecureToken:!0}),o=await Hi._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Bi{constructor(e,n,s,o){var c;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Jl.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Jl(e,n,s,o)}}function Pb(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jl._fromErrorAndOperation(r,c,e,s):c})}async function bD(r,e,n=!1){const s=await Qa(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Hi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(r,e,n=!1){const{auth:s}=r;if(mn(s.app))return Promise.reject(Ui(s));const o="reauthenticate";try{const c=await Qa(r,Pb(s,o,e,r),n);de(c.idToken,s,"internal-error");const d=Hh(c.idToken);de(d,s,"internal-error");const{sub:h}=d;return de(r.uid===h,s,"user-mismatch"),Hi._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Zn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(r,e,n=!1){if(mn(r.app))return Promise.reject(Ui(r));const s="signIn",o=await Pb(r,s,e),c=await Hi._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}function TD(r,e,n,s){return dn(r).onIdTokenChanged(e,n,s)}function CD(r,e,n){return dn(r).beforeAuthStateChanged(e,n)}const ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=1e3,OD=10;class Hb extends zb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,h,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);nD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,OD):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},wD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hb.type="LOCAL";const RD=Hb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends zb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bb.type="SESSION";const qb=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new mc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const h=Array.from(d).map(async m=>m(n.origin,c)),p=await DD(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((h,p)=>{const m=Gh("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(b){const T=b;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),h(T.data.response);break;default:clearTimeout(_),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function AD(r){Nn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function xD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ID(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function MD(){return Gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebaseLocalStorageDb",kD=1,tc="firebaseLocalStorage",Yb="fbase_key";class so{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vc(r,e){return r.transaction([tc],e?"readwrite":"readonly").objectStore(tc)}function LD(){const r=indexedDB.deleteDatabase(Vb);return new so(r).toPromise()}function xd(){const r=indexedDB.open(Vb,kD);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(tc,{keyPath:Yb})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(tc)?e(s):(s.close(),await LD(),e(await xd()))})})}async function cy(r,e,n){const s=vc(r,!0).put({[Yb]:e,value:n});return new so(s).toPromise()}async function UD(r,e){const n=vc(r,!1).get(e),s=await new so(n).toPromise();return s===void 0?null:s.value}function uy(r,e){const n=vc(r,!0).delete(e);return new so(n).toPromise()}const jD=800,PD=3;class $b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>PD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(MD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xD(),!this.activeServiceWorker)return;this.sender=new ND(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ID()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xd();return await cy(e,ec,"1"),await uy(e,ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>cy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>UD(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=vc(o,!1).getAll();return new so(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$b.type="LOCAL";const zD=$b;new io(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(r,e){return e?Qn(e):(de(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Ub{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BD(r){return SD(r.auth,new Vh(r),r.bypassAuthState)}function qD(r){const{auth:e,user:n}=r;return de(n,e,"internal-error"),ED(n,new Vh(r),r.bypassAuthState)}async function GD(r){const{auth:e,user:n}=r;return de(n,e,"internal-error"),bD(n,new Vh(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:h}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BD;case"linkViaPopup":case"linkViaRedirect":return GD;case"reauthViaPopup":case"reauthViaRedirect":return qD;default:Zn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new io(2e3,1e4);class os extends Fb{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,os.currentPopupAction&&os.currentPopupAction.cancel(),os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=Gh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VD.get())};e()}}os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="pendingRedirect",Al=new Map;class $D extends Fb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Al.get(this.auth._key());if(!e){try{const s=await FD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Al.set(this.auth._key(),e)}return this.bypassAuthState||Al.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FD(r,e){const n=XD(e),s=WD(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function QD(r,e){Al.set(r._key(),e)}function WD(r){return Qn(r._redirectPersistence)}function XD(r){return Nl(YD,r.config.apiKey,r.name)}async function KD(r,e,n=!1){if(mn(r.app))return Promise.reject(Ui(r));const s=gc(r),o=HD(s,e),d=await new $D(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=10*60*1e3;class JD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Qb(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Dn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZD&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(e))}saveEventToCache(e){this.cachedEventUids.add(fy(e)),this.lastProcessedEventTime=Date.now()}}function fy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Qb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e={}){return Cs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iN=/^https?/;async function rN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await tN(r);for(const n of e)try{if(sN(n))return}catch{}Zn(r,"unauthorized-domain")}function sN(r){const e=Nd(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!iN.test(n))return!1;if(nN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new io(3e4,6e4);function dy(){const r=Nn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function oN(r){return new Promise((e,n)=>{var s,o,c;function d(){dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dy(),n(Dn(r,"network-request-failed"))},timeout:aN.get()})}if(!((o=(s=Nn().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Nn().gapi)===null||c===void 0)&&c.load)d();else{const h=fD("iframefcb");return Nn()[h]=()=>{gapi.load?d():n(Dn(r,"network-request-failed"))},cD(`${uD()}?onload=${h}`).catch(p=>n(p))}}).catch(e=>{throw xl=null,e})}let xl=null;function lN(r){return xl=xl||oN(r),xl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new io(5e3,15e3),uN="__/auth/iframe",fN="emulator/auth/iframe",dN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pN(r){const e=r.config;de(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?zh(e,fN):`https://${r.config.authDomain}/${uN}`,s={apiKey:e.apiKey,appName:r.name,v:bs},o=hN.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${ys(s).slice(1)}`}async function gN(r){const e=await lN(r),n=Nn().gapi;return de(n,r,"internal-error"),e.open({where:document.body,url:pN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dN,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Dn(r,"network-request-failed"),h=Nn().setTimeout(()=>{c(d)},cN.get());function p(){Nn().clearTimeout(h),o(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vN=500,_N=600,yN="_blank",bN="http://localhost";class hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EN(r,e,n,s=vN,o=_N){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p=Object.assign(Object.assign({},mN),{width:s.toString(),height:o.toString(),top:c,left:d}),m=Ut().toLowerCase();n&&(h=Db(m)?yN:n),Ob(m)&&(e=e||bN,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[O,N])=>`${T}${O}=${N},`,"");if(tD(m)&&h!=="_self")return SN(e||"",h),new hy(null);const b=window.open(e||"",h,_);de(b,r,"popup-blocked");try{b.focus()}catch{}return new hy(b)}function SN(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="__/auth/handler",CN="emulator/auth/handler",wN=encodeURIComponent("fac");async function py(r,e,n,s,o,c){de(r.config.authDomain,r,"auth-domain-config-required"),de(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:bs,eventId:o};if(e instanceof jb){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",fd(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof ro){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}r.tenantId&&(d.tid=r.tenantId);const h=d;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await r._getAppCheckToken(),m=p?`#${wN}=${encodeURIComponent(p)}`:"";return`${ON(r)}?${ys(h).slice(1)}${m}`}function ON({config:r}){return r.emulator?zh(r,CN):`https://${r.authDomain}/${TN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="webStorageSupport";class RN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qb,this._completeRedirectFn=KD,this._overrideRedirectResult=QD}async _openPopup(e,n,s,o){var c;Jn((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await py(e,n,s,Nd(),o);return EN(e,d,Gh())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await py(e,n,s,Nd(),o);return AD(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Jn(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gN(e),s=new JD(e);return n.register("authEvent",o=>(de(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(td,{type:td},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[td];d!==void 0&&n(!!d),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Mb()||Rb()||Bh()}}const DN=RN;var gy="@firebase/auth",my="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xN(r){ps(new fr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=s.options;de(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kb(r)},m=new oD(s,o,c,p);return hD(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ps(new fr("auth-internal",e=>{const n=gc(e.getProvider("auth").getImmediate());return(s=>new NN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(gy,my,AN(r)),Mi(gy,my,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=5*60,MN=Gy("authIdTokenMaxAge")||IN;let vy=null;const kN=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>MN)return;const o=n==null?void 0:n.token;vy!==o&&(vy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function LN(r=Wy()){const e=ah(r,"auth");if(e.isInitialized())return e.getImmediate();const n=dD(r,{popupRedirectResolver:DN,persistence:[zD,RD,qb]}),s=Gy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=kN(c.toString());CD(n,d,()=>d(n.currentUser)),TD(n,h=>d(h))}}const o=By("auth");return o&&pD(n,`http://${o}`),n}function UN(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}lD({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=Dn("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",UN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xN("Browser");const jN={apiKey:"AIzaSyBIAM_tIBqFUYQl5r-f7e78lNPzc0fIDcM",authDomain:"big-orca.firebaseapp.com",projectId:"big-orca",storageBucket:"big-orca.firebasestorage.app",messagingSenderId:"338206440353",appId:"1:338206440353:web:a6af4374836968379d29e0",databaseURL:"https://big-orca-default-rtdb.firebaseio.com"},Wb=Qy(jN),Ae=MR(Wb),_y=LN(Wb);function Ua(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}const PN=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Xb=z.createContext(),ao=()=>{const r=z.useContext(Xb);if(!r)throw new Error("useBoardContext must be used within a BoardProvider");return r},zN=({children:r})=>{const[e,n]=z.useState(null),[s,o]=z.useState(null),[c,d]=z.useState("Untitled Board"),[h,p]=z.useState({}),[m,_]=z.useState(!1),[b,T]=z.useState(!0),[O,N]=z.useState(!0),[U,L]=z.useState(!1),[$,F]=z.useState(!1),[Q,ne]=z.useState(!1),[Z,_e]=z.useState(null),[ge,he]=z.useState(!0);z.useEffect(()=>{const I=_y.onAuthStateChanged(K=>{if(K){console.log("User authenticated:",K.uid),n(K);const J=Ne(Ae,`users/${K.uid}/preferences`);SR(J).then(be=>{if(be.exists()){const Le=be.val();Le.darkMode!==void 0&&he(Le.darkMode)}}).catch(be=>{console.error("Error loading user preferences:",be)})}else console.log("No user, signing in anonymously"),yD(_y).catch(J=>{console.error("Error signing in:",J)})});return()=>I()},[]),z.useEffect(()=>{ge?document.documentElement.classList.remove("light-mode"):document.documentElement.classList.add("light-mode")},[ge]),z.useEffect(()=>{if(s&&e){const I=Ne(Ae,`boards/${s}`);return _e(I),CR(I,K=>{const J=K.val();J&&(J.title&&d(J.title),p(J.columns||{}),J.settings&&(J.settings.votingEnabled!==void 0&&T(J.settings.votingEnabled),J.settings.downvotingEnabled!==void 0&&N(J.settings.downvotingEnabled),J.settings.multipleVotesAllowed!==void 0&&L(J.settings.multipleVotesAllowed),J.settings.revealMode!==void 0&&F(J.settings.revealMode),J.settings.cardsRevealed!==void 0&&ne(J.settings.cardsRevealed)))}),()=>{wR(I)}}},[s,e]);const je=(I=null,K="Untitled Board")=>{if(!e)return null;const J=Ua(),be=Ne(Ae,`boards/${J}`),Le=I||["To Do","In Progress","Done"],Pe={},ve="abcdefghijklmnopqrstuvwxyz";Le.forEach((Dt,Je)=>{const Qe=Je<26?ve[Je]:`col${Je}`;Pe[`${Qe}_${Ua()}`]={title:Dt,cards:{}}});const ot={title:K,created:Date.now(),owner:e.uid,columns:Pe,settings:{votingEnabled:!0,downvotingEnabled:!0,multipleVotesAllowed:!1,revealMode:!1,cardsRevealed:!1}};return Be(be,ot).then(()=>{console.log("New board created with ID:",J),o(J),d("Untitled Board")}).catch(Dt=>{console.error("Error creating board:",Dt)}),J},tt=I=>{console.log("Opening board with ID:",I),o(I)},at=I=>{if(d(I),s&&e){const K=Ne(Ae,`boards/${s}/title`);Be(K,I).then(()=>{console.log("Board title updated")}).catch(J=>{console.error("Error updating board title:",J)})}},Re=I=>{if(s&&e){const K=Ne(Ae,`boards/${s}/settings`),J={votingEnabled:b,downvotingEnabled:O,multipleVotesAllowed:U,revealMode:$,cardsRevealed:Q,...I};Be(K,J).then(()=>{console.log("Board settings updated:",J),I.votingEnabled!==void 0&&T(I.votingEnabled),I.downvotingEnabled!==void 0&&N(I.downvotingEnabled),I.multipleVotesAllowed!==void 0&&L(I.multipleVotesAllowed),I.revealMode!==void 0&&F(I.revealMode),I.cardsRevealed!==void 0&&ne(I.cardsRevealed)}).catch(be=>{console.error("Error updating board settings:",be)})}else{if(I.votingEnabled!==void 0&&T(I.votingEnabled),I.downvotingEnabled!==void 0&&N(I.downvotingEnabled),I.multipleVotesAllowed!==void 0&&L(I.multipleVotesAllowed),I.revealMode!==void 0){const K=I.revealMode;revealModeRef.current!==K?(F(K),ne(!K)):F(K)}I.cardsRevealed!==void 0&&ne(I.cardsRevealed)}},se={user:e,boardId:s,setBoardId:o,boardTitle:c,setBoardTitle:d,columns:h,updateBoardTitle:at,sortByVotes:m,setSortByVotes:_,votingEnabled:b,setVotingEnabled:T,updateVotingEnabled:I=>{Re({votingEnabled:I})},downvotingEnabled:O,setDownvotingEnabled:N,updateDownvotingEnabled:I=>{Re({downvotingEnabled:I})},multipleVotesAllowed:U,setMultipleVotesAllowed:L,updateMultipleVotesAllowed:I=>{Re({multipleVotesAllowed:I})},revealMode:$,setRevealMode:F,updateRevealMode:I=>{Re(I?{revealMode:I}:{revealMode:I,cardsRevealed:!1})},cardsRevealed:Q,setCardsRevealed:ne,revealAllCards:()=>{Re({cardsRevealed:!0})},updateBoardSettings:Re,boardRef:Z,createNewBoard:je,openExistingBoard:tt,moveCard:(I,K,J,be=null)=>{var ot,Dt,Je;if(!s||!e)return;if(K===J){const Qe=h[K];let Nt=null,Ct=null;if((ot=Qe==null?void 0:Qe.cards)!=null&&ot[I]?Ct=Qe.cards[I]:Qe!=null&&Qe.groups&&Object.entries(Qe.groups).forEach(([lt,_r])=>{var Os;(Os=_r.cards)!=null&&Os[I]&&(Nt=lt,Ct=_r.cards[I])}),!Ct){console.error("Card not found");return}if(Nt===be)return;if(Nt){const lt=Ne(Ae,`boards/${s}/columns/${K}/groups/${Nt}/cards/${I}`);_n(lt)}else{const lt=Ne(Ae,`boards/${s}/columns/${K}/cards/${I}`);_n(lt)}if(be){const lt=Ne(Ae,`boards/${s}/columns/${J}/groups/${be}/cards/${I}`);Be(lt,Ct)}else{const lt=Ne(Ae,`boards/${s}/columns/${J}/cards/${I}`);Be(lt,Ct)}return}const Le=Ne(Ae,`boards/${s}/columns/${K}/cards/${I}`),Pe=Ne(Ae,`boards/${s}/columns/${J}/cards/${I}`),ve=(Je=(Dt=h[K])==null?void 0:Dt.cards)==null?void 0:Je[I];if(!ve){console.error("Card not found");return}Be(Pe,ve).then(()=>{_n(Le).then(()=>{console.log(`Card ${I} moved from ${K} to ${J}`)}).catch(Qe=>{console.error("Error removing card from source column:",Qe)})}).catch(Qe=>{console.error("Error adding card to target column:",Qe)})},resetAllVotes:()=>!s||!e||!window.confirm("Are you sure you want to reset all votes to zero? This cannot be undone.")?!1:(Object.entries(h).forEach(([K,J])=>{J.cards&&Object.entries(J.cards).forEach(([be,Le])=>{const Pe=Ne(Ae,`boards/${s}/columns/${K}/cards/${be}`),ve={...Le,votes:0,voters:{}};Be(Pe,ve).catch(ot=>{console.error(`Error resetting votes for card ${be}:`,ot)})}),J.groups&&Object.entries(J.groups).forEach(([be,Le])=>{const Pe=Ne(Ae,`boards/${s}/columns/${K}/groups/${be}`),ve={...Le,votes:0,voters:{}};Be(Pe,ve).catch(ot=>{console.error(`Error resetting votes for group ${be}:`,ot)})})}),!0),darkMode:ge,updateDarkMode:I=>{if(e){const K=Ne(Ae,`users/${e.uid}/preferences`);Be(K,{darkMode:I}).then(()=>{console.log("Dark mode preference updated:",I),he(I)}).catch(J=>{console.error("Error updating dark mode preference:",J)})}else he(I)},createCardGroup:(I,K,J="New Group",be=null)=>{if(!s||!e||!K.length)return;const Le=Ua(),Pe=Ne(Ae,`boards/${s}/columns/${I}/groups/${Le}`),ve={},ot=[];K.forEach(Qe=>{var Ct,lt;const Nt=(lt=(Ct=h[I])==null?void 0:Ct.cards)==null?void 0:lt[Qe];if(Nt){ve[Qe]=Nt;const _r=Ne(Ae,`boards/${s}/columns/${I}/cards/${Qe}`);ot.push(_n(_r))}});const Dt=be||Date.now();Be(Pe,{name:J,created:Dt,expanded:!0,votes:0,voters:{},cards:ve}).then(()=>Promise.all(ot)).then(()=>{console.log(`Group ${Le} created with ${K.length} cards`)}).catch(Qe=>{console.error("Error creating group:",Qe)})},ungroupCards:(I,K)=>{var Pe,ve;if(!s||!e)return;const J=(ve=(Pe=h[I])==null?void 0:Pe.groups)==null?void 0:ve[K];if(!J||!J.cards)return;const be=[];Object.entries(J.cards).forEach(([ot,Dt])=>{const Je=Ne(Ae,`boards/${s}/columns/${I}/cards/${ot}`);be.push(Be(Je,Dt))});const Le=Ne(Ae,`boards/${s}/columns/${I}/groups/${K}`);Promise.all(be).then(()=>_n(Le)).then(()=>{console.log(`Group ${K} ungrouped`)}).catch(ot=>{console.error("Error ungrouping cards:",ot)})},updateGroupName:(I,K,J)=>{if(!s||!e)return;const be=Ne(Ae,`boards/${s}/columns/${I}/groups/${K}/name`);Be(be,J).then(()=>{console.log("Group name updated")}).catch(Le=>{console.error("Error updating group name:",Le)})},toggleGroupExpanded:(I,K,J)=>{if(!s||!e)return;const be=Ne(Ae,`boards/${s}/columns/${I}/groups/${K}/expanded`);Be(be,J).catch(Le=>{console.error("Error updating group expanded state:",Le)})},upvoteGroup:(I,K,J=0,be)=>{var Nt,Ct;if(!s||!e)return;const Le=(Ct=(Nt=h[I])==null?void 0:Nt.groups)==null?void 0:Ct[K];if(!Le)return;const Pe=Le.voters||{},ve=e.uid;if(!U&&Pe[ve]&&Pe[ve]>0){be("You have already voted on this group");return}const ot=J+1,Dt={...Pe,[ve]:(Pe[ve]||0)+1},Je=Ne(Ae,`boards/${s}/columns/${I}/groups/${K}/votes`),Qe=Ne(Ae,`boards/${s}/columns/${I}/groups/${K}/voters`);Promise.all([Be(Je,ot),Be(Qe,Dt)]).catch(lt=>{console.error("Error updating group votes:",lt)})},downvoteGroup:(I,K,J=0,be)=>{var Nt,Ct;if(!s||!e)return;const Le=(Ct=(Nt=h[I])==null?void 0:Nt.groups)==null?void 0:Ct[K];if(!Le)return;const Pe=Le.voters||{},ve=e.uid;if(!U&&Pe[ve]&&Pe[ve]<0){be("You have already voted on this group");return}const ot=J-1,Dt={...Pe,[ve]:(Pe[ve]||0)-1},Je=Ne(Ae,`boards/${s}/columns/${I}/groups/${K}/votes`),Qe=Ne(Ae,`boards/${s}/columns/${I}/groups/${K}/voters`);Promise.all([Be(Je,ot),Be(Qe,Dt)]).catch(lt=>{console.error("Error updating group votes:",lt)})}};return E.jsx(Xb.Provider,{value:se,children:r})},Kb=z.createContext({dragDropManager:void 0});function un(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var yy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),by=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ey={INIT:"@@redux/INIT"+by(),REPLACE:"@@redux/REPLACE"+by()};function HN(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function Zb(r,e,n){var s;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(un(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(un(1));return n(Zb)(r,e)}if(typeof r!="function")throw new Error(un(2));var o=r,c=e,d=[],h=d,p=!1;function m(){h===d&&(h=d.slice())}function _(){if(p)throw new Error(un(3));return c}function b(U){if(typeof U!="function")throw new Error(un(4));if(p)throw new Error(un(5));var L=!0;return m(),h.push(U),function(){if(L){if(p)throw new Error(un(6));L=!1,m();var F=h.indexOf(U);h.splice(F,1),d=null}}}function T(U){if(!HN(U))throw new Error(un(7));if(typeof U.type>"u")throw new Error(un(8));if(p)throw new Error(un(9));try{p=!0,c=o(c,U)}finally{p=!1}for(var L=d=h,$=0;$<L.length;$++){var F=L[$];F()}return U}function O(U){if(typeof U!="function")throw new Error(un(10));o=U,T({type:Ey.REPLACE})}function N(){var U,L=b;return U={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(un(11));function Q(){F.next&&F.next(_())}Q();var ne=L(Q);return{unsubscribe:ne}}},U[yy]=function(){return this},U}return T({type:Ey.INIT}),s={dispatch:T,subscribe:b,getState:_,replaceReducer:O},s[yy]=N,s}function pe(r,e,...n){if(BN()&&e===void 0)throw new Error("invariant requires an error message argument");if(!r){let s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;s=new Error(e.replace(/%s/g,function(){return n[o++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}function BN(){return typeof process<"u"&&!0}function qN(r,e,n){return e.split(".").reduce((s,o)=>s&&s[o]?s[o]:n||null,r)}function GN(r,e){return r.filter(n=>n!==e)}function Jb(r){return typeof r=="object"}function VN(r,e){const n=new Map,s=c=>{n.set(c,n.has(c)?n.get(c)+1:1)};r.forEach(s),e.forEach(s);const o=[];return n.forEach((c,d)=>{c===1&&o.push(d)}),o}function YN(r,e){return r.filter(n=>e.indexOf(n)>-1)}const Yh="dnd-core/INIT_COORDS",_c="dnd-core/BEGIN_DRAG",$h="dnd-core/PUBLISH_DRAG_SOURCE",yc="dnd-core/HOVER",bc="dnd-core/DROP",Ec="dnd-core/END_DRAG";function Sy(r,e){return{type:Yh,payload:{sourceClientOffset:e||null,clientOffset:r||null}}}const $N={type:Yh,payload:{clientOffset:null,sourceClientOffset:null}};function FN(r){return function(n=[],s={publishSource:!0}){const{publishSource:o=!0,clientOffset:c,getSourceClientOffset:d}=s,h=r.getMonitor(),p=r.getRegistry();r.dispatch(Sy(c)),QN(n,h,p);const m=KN(n,h);if(m==null){r.dispatch($N);return}let _=null;if(c){if(!d)throw new Error("getSourceClientOffset must be defined");WN(d),_=d(m)}r.dispatch(Sy(c,_));const T=p.getSource(m).beginDrag(h,m);if(T==null)return;XN(T),p.pinSource(m);const O=p.getSourceType(m);return{type:_c,payload:{itemType:O,item:T,sourceId:m,clientOffset:c||null,sourceClientOffset:_||null,isSourcePublic:!!o}}}}function QN(r,e,n){pe(!e.isDragging(),"Cannot call beginDrag while dragging."),r.forEach(function(s){pe(n.getSource(s),"Expected sourceIds to be registered.")})}function WN(r){pe(typeof r=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function XN(r){pe(Jb(r),"Item must be an object.")}function KN(r,e){let n=null;for(let s=r.length-1;s>=0;s--)if(e.canDragSource(r[s])){n=r[s];break}return n}function ZN(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function JN(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){ZN(r,o,n[o])})}return r}function eA(r){return function(n={}){const s=r.getMonitor(),o=r.getRegistry();tA(s),rA(s).forEach((d,h)=>{const p=nA(d,h,o,s),m={type:bc,payload:{dropResult:JN({},n,p)}};r.dispatch(m)})}}function tA(r){pe(r.isDragging(),"Cannot call drop while not dragging."),pe(!r.didDrop(),"Cannot call drop twice during one drag operation.")}function nA(r,e,n,s){const o=n.getTarget(r);let c=o?o.drop(s,r):void 0;return iA(c),typeof c>"u"&&(c=e===0?{}:s.getDropResult()),c}function iA(r){pe(typeof r>"u"||Jb(r),"Drop result must either be an object or undefined.")}function rA(r){const e=r.getTargetIds().filter(r.canDropOnTarget,r);return e.reverse(),e}function sA(r){return function(){const n=r.getMonitor(),s=r.getRegistry();aA(n);const o=n.getSourceId();return o!=null&&(s.getSource(o,!0).endDrag(n,o),s.unpinSource()),{type:Ec}}}function aA(r){pe(r.isDragging(),"Cannot call endDrag while not dragging.")}function Id(r,e){return e===null?r===null:Array.isArray(r)?r.some(n=>n===e):r===e}function oA(r){return function(n,{clientOffset:s}={}){lA(n);const o=n.slice(0),c=r.getMonitor(),d=r.getRegistry(),h=c.getItemType();return uA(o,d,h),cA(o,c,d),fA(o,c,d),{type:yc,payload:{targetIds:o,clientOffset:s||null}}}}function lA(r){pe(Array.isArray(r),"Expected targetIds to be an array.")}function cA(r,e,n){pe(e.isDragging(),"Cannot call hover while not dragging."),pe(!e.didDrop(),"Cannot call hover after drop.");for(let s=0;s<r.length;s++){const o=r[s];pe(r.lastIndexOf(o)===s,"Expected targetIds to be unique in the passed array.");const c=n.getTarget(o);pe(c,"Expected targetIds to be registered.")}}function uA(r,e,n){for(let s=r.length-1;s>=0;s--){const o=r[s],c=e.getTargetType(o);Id(c,n)||r.splice(s,1)}}function fA(r,e,n){r.forEach(function(s){n.getTarget(s).hover(e,s)})}function dA(r){return function(){if(r.getMonitor().isDragging())return{type:$h}}}function hA(r){return{beginDrag:FN(r),publishDragSource:dA(r),hover:oA(r),drop:eA(r),endDrag:sA(r)}}class pA{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function s(c){return(...d)=>{const h=c.apply(e,d);typeof h<"u"&&n(h)}}const o=hA(this);return Object.keys(o).reduce((c,d)=>{const h=o[d];return c[d]=s(h),c},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const s=this.store.getState().refCount>0;this.backend&&(s&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!s&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function gA(r,e){return{x:r.x+e.x,y:r.y+e.y}}function eE(r,e){return{x:r.x-e.x,y:r.y-e.y}}function mA(r){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:s}=r;return!e||!n||!s?null:eE(gA(e,s),n)}function vA(r){const{clientOffset:e,initialClientOffset:n}=r;return!e||!n?null:eE(e,n)}const ja=[],Fh=[];ja.__IS_NONE__=!0;Fh.__IS_ALL__=!0;function _A(r,e){return r===ja?!1:r===Fh||typeof e>"u"?!0:YN(e,r).length>0}class yA{subscribeToStateChange(e,n={}){const{handlerIds:s}=n;pe(typeof e=="function","listener must be a function."),pe(typeof s>"u"||Array.isArray(s),"handlerIds, when specified, must be an array of strings.");let o=this.store.getState().stateId;const c=()=>{const d=this.store.getState(),h=d.stateId;try{h===o||h===o+1&&!_A(d.dirtyHandlerIds,s)||e()}finally{o=h}};return this.store.subscribe(c)}subscribeToOffsetChange(e){pe(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const s=()=>{const o=this.store.getState().dragOffset;o!==n&&(n=o,e())};return this.store.subscribe(s)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return pe(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(pe(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();return Id(s,o)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(pe(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const s=this.registry.getSourceType(e),o=this.getItemType();return s!==o?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:s}=n;if(!this.isDragging())return!1;const o=this.registry.getTargetType(e),c=this.getItemType();if(c&&!Id(o,c))return!1;const d=this.getTargetIds();if(!d.length)return!1;const h=d.indexOf(e);return s?h===d.length-1:h>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return mA(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return vA(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const Ty=typeof global<"u"?global:self,tE=Ty.MutationObserver||Ty.WebKitMutationObserver;function nE(r){return function(){const n=setTimeout(o,0),s=setInterval(o,50);function o(){clearTimeout(n),clearInterval(s),r()}}}function bA(r){let e=1;const n=new tE(r),s=document.createTextNode("");return n.observe(s,{characterData:!0}),function(){e=-e,s.data=e}}const EA=typeof tE=="function"?bA:nE;class SA{enqueueTask(e){const{queue:n,requestFlush:s}=this;n.length||(s(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let s=0,o=e.length-this.index;s<o;s++)e[s]=e[s+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=EA(this.flush),this.requestErrorThrow=nE(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class TA{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class CA{create(e){const n=this.freeTasks,s=n.length?n.pop():new TA(this.onError,o=>n[n.length]=o);return s.task=e,s}constructor(e){this.onError=e,this.freeTasks=[]}}const iE=new SA,wA=new CA(iE.registerPendingError);function OA(r){iE.enqueueTask(wA.create(r))}const Qh="dnd-core/ADD_SOURCE",Wh="dnd-core/ADD_TARGET",Xh="dnd-core/REMOVE_SOURCE",Sc="dnd-core/REMOVE_TARGET";function RA(r){return{type:Qh,payload:{sourceId:r}}}function DA(r){return{type:Wh,payload:{targetId:r}}}function NA(r){return{type:Xh,payload:{sourceId:r}}}function AA(r){return{type:Sc,payload:{targetId:r}}}function xA(r){pe(typeof r.canDrag=="function","Expected canDrag to be a function."),pe(typeof r.beginDrag=="function","Expected beginDrag to be a function."),pe(typeof r.endDrag=="function","Expected endDrag to be a function.")}function IA(r){pe(typeof r.canDrop=="function","Expected canDrop to be a function."),pe(typeof r.hover=="function","Expected hover to be a function."),pe(typeof r.drop=="function","Expected beginDrag to be a function.")}function Md(r,e){if(e&&Array.isArray(r)){r.forEach(n=>Md(n,!1));return}pe(typeof r=="string"||typeof r=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var fn;(function(r){r.SOURCE="SOURCE",r.TARGET="TARGET"})(fn||(fn={}));let MA=0;function kA(){return MA++}function LA(r){const e=kA().toString();switch(r){case fn.SOURCE:return`S${e}`;case fn.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${r}`)}}function Cy(r){switch(r[0]){case"S":return fn.SOURCE;case"T":return fn.TARGET;default:throw new Error(`Cannot parse handler ID: ${r}`)}}function wy(r,e){const n=r.entries();let s=!1;do{const{done:o,value:[,c]}=n.next();if(c===e)return!0;s=!!o}while(!s);return!1}class UA{addSource(e,n){Md(e),xA(n);const s=this.addHandler(fn.SOURCE,e,n);return this.store.dispatch(RA(s)),s}addTarget(e,n){Md(e,!0),IA(n);const s=this.addHandler(fn.TARGET,e,n);return this.store.dispatch(DA(s)),s}containsHandler(e){return wy(this.dragSources,e)||wy(this.dropTargets,e)}getSource(e,n=!1){return pe(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return pe(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return pe(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return pe(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Cy(e)===fn.SOURCE}isTargetId(e){return Cy(e)===fn.TARGET}removeSource(e){pe(this.getSource(e),"Expected an existing source."),this.store.dispatch(NA(e)),OA(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){pe(this.getTarget(e),"Expected an existing target."),this.store.dispatch(AA(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);pe(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){pe(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,s){const o=LA(e);return this.types.set(o,n),e===fn.SOURCE?this.dragSources.set(o,s):e===fn.TARGET&&this.dropTargets.set(o,s),o}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const jA=(r,e)=>r===e;function PA(r,e){return!r&&!e?!0:!r||!e?!1:r.x===e.x&&r.y===e.y}function zA(r,e,n=jA){if(r.length!==e.length)return!1;for(let s=0;s<r.length;++s)if(!n(r[s],e[s]))return!1;return!0}function HA(r=ja,e){switch(e.type){case yc:break;case Qh:case Wh:case Sc:case Xh:return ja;case _c:case $h:case Ec:case bc:default:return Fh}const{targetIds:n=[],prevTargetIds:s=[]}=e.payload,o=VN(n,s);if(!(o.length>0||!zA(n,s)))return ja;const d=s[s.length-1],h=n[n.length-1];return d!==h&&(d&&o.push(d),h&&o.push(h)),o}function BA(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function qA(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){BA(r,o,n[o])})}return r}const Oy={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function GA(r=Oy,e){const{payload:n}=e;switch(e.type){case Yh:case _c:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case yc:return PA(r.clientOffset,n.clientOffset)?r:qA({},r,{clientOffset:n.clientOffset});case Ec:case bc:return Oy;default:return r}}function VA(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ss(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){VA(r,o,n[o])})}return r}const YA={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function $A(r=YA,e){const{payload:n}=e;switch(e.type){case _c:return ss({},r,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case $h:return ss({},r,{isSourcePublic:!0});case yc:return ss({},r,{targetIds:n.targetIds});case Sc:return r.targetIds.indexOf(n.targetId)===-1?r:ss({},r,{targetIds:GN(r.targetIds,n.targetId)});case bc:return ss({},r,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Ec:return ss({},r,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return r}}function FA(r=0,e){switch(e.type){case Qh:case Wh:return r+1;case Xh:case Sc:return r-1;default:return r}}function QA(r=0){return r+1}function WA(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function XA(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){WA(r,o,n[o])})}return r}function KA(r={},e){return{dirtyHandlerIds:HA(r.dirtyHandlerIds,{type:e.type,payload:XA({},e.payload,{prevTargetIds:qN(r,"dragOperation.targetIds",[])})}),dragOffset:GA(r.dragOffset,e),refCount:FA(r.refCount,e),dragOperation:$A(r.dragOperation,e),stateId:QA(r.stateId)}}function ZA(r,e=void 0,n={},s=!1){const o=JA(s),c=new yA(o,new UA(o)),d=new pA(o,c),h=r(d,e,n);return d.receiveBackend(h),d}function JA(r){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Zb(KA,r&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function ex(r,e){if(r==null)return{};var n=tx(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function tx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}let Ry=0;const Il=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var nx=z.memo(function(e){var{children:n}=e,s=ex(e,["children"]);const[o,c]=ix(s);return z.useEffect(()=>{if(c){const d=rE();return++Ry,()=>{--Ry===0&&(d[Il]=null)}}},[]),E.jsx(Kb.Provider,{value:o,children:n})});function ix(r){if("manager"in r)return[{dragDropManager:r.manager},!1];const e=rx(r.backend,r.context,r.options,r.debugMode),n=!r.context;return[e,n]}function rx(r,e=rE(),n,s){const o=e;return o[Il]||(o[Il]={dragDropManager:ZA(r,e,n,s)}),o[Il]}function rE(){return typeof global<"u"?global:window}var nd,Dy;function sx(){return Dy||(Dy=1,nd=function r(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,o,c;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(o=s;o--!==0;)if(!r(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(c=Object.keys(e),s=c.length,s!==Object.keys(n).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[o]))return!1;for(o=s;o--!==0;){var d=c[o];if(!r(e[d],n[d]))return!1}return!0}return e!==e&&n!==n}),nd}var ax=sx();const ox=Wa(ax),mr=typeof window<"u"?z.useLayoutEffect:z.useEffect;function lx(r,e,n){const[s,o]=z.useState(()=>e(r)),c=z.useCallback(()=>{const d=e(r);ox(s,d)||(o(d),n&&n())},[s,r,n]);return mr(c),[s,c]}function cx(r,e,n){const[s,o]=lx(r,e,n);return mr(function(){const d=r.getHandlerId();if(d!=null)return r.subscribeToStateChange(o,{handlerIds:[d]})},[r,o]),s}function sE(r,e,n){return cx(e,r||(()=>({})),()=>n.reconnect())}function aE(r,e){const n=[...e||[]];return e==null&&typeof r!="function"&&n.push(r),z.useMemo(()=>typeof r=="function"?r():r,n)}function ux(r){return z.useMemo(()=>r.hooks.dragSource(),[r])}function fx(r){return z.useMemo(()=>r.hooks.dragPreview(),[r])}let id=!1,rd=!1;class dx{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){pe(!id,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return id=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{id=!1}}isDragging(){if(!this.sourceId)return!1;pe(!rd,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return rd=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{rd=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let sd=!1;class hx{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;pe(!sd,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return sd=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{sd=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function px(r,e,n){const s=n.getRegistry(),o=s.addTarget(r,e);return[o,()=>s.removeTarget(o)]}function gx(r,e,n){const s=n.getRegistry(),o=s.addSource(r,e);return[o,()=>s.removeSource(o)]}function kd(r,e,n,s){let o;if(o!==void 0)return!!o;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const c=Object.keys(r),d=Object.keys(e);if(c.length!==d.length)return!1;const h=Object.prototype.hasOwnProperty.bind(e);for(let p=0;p<c.length;p++){const m=c[p];if(!h(m))return!1;const _=r[m],b=e[m];if(o=void 0,o===!1||o===void 0&&_!==b)return!1}return!0}function Ld(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function mx(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function vx(r){return(e=null,n=null)=>{if(!z.isValidElement(e)){const c=e;return r(c,n),c}const s=e;return mx(s),_x(s,n?c=>r(c,n):r)}}function oE(r){const e={};return Object.keys(r).forEach(n=>{const s=r[n];if(n.endsWith("Ref"))e[n]=r[n];else{const o=vx(s);e[n]=()=>o}}),e}function Ny(r,e){typeof r=="function"?r(e):r.current=e}function _x(r,e){const n=r.ref;return pe(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?z.cloneElement(r,{ref:s=>{Ny(n,s),Ny(e,s)}}):z.cloneElement(r,{ref:e})}class yx{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,s=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(s&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!kd(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!kd(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=oE({dragSource:(n,s)=>{this.clearDragSource(),this.dragSourceOptions=s||null,Ld(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,s)=>{this.clearDragPreview(),this.dragPreviewOptions=s||null,Ld(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class bx{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!kd(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=oE({dropTarget:(n,s)=>{this.clearDropTarget(),this.dropTargetOptions=s,Ld(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function ws(){const{dragDropManager:r}=z.useContext(Kb);return pe(r!=null,"Expected drag drop context"),r}function Ex(r,e){const n=ws(),s=z.useMemo(()=>new yx(n.getBackend()),[n]);return mr(()=>(s.dragSourceOptions=r||null,s.reconnect(),()=>s.disconnectDragSource()),[s,r]),mr(()=>(s.dragPreviewOptions=e||null,s.reconnect(),()=>s.disconnectDragPreview()),[s,e]),s}function Sx(){const r=ws();return z.useMemo(()=>new dx(r),[r])}class Tx{beginDrag(){const e=this.spec,n=this.monitor;let s=null;return typeof e.item=="object"?s=e.item:typeof e.item=="function"?s=e.item(n):s={},s??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const s=this.spec,o=this.monitor,{isDragging:c}=s;return c?c(o):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,s=this.connector,{end:o}=e;o&&o(n.getItem(),n),s.reconnect()}constructor(e,n,s){this.spec=e,this.monitor=n,this.connector=s}}function Cx(r,e,n){const s=z.useMemo(()=>new Tx(r,e,n),[e,n]);return z.useEffect(()=>{s.spec=r},[r]),s}function wx(r){return z.useMemo(()=>{const e=r.type;return pe(e!=null,"spec.type must be defined"),e},[r])}function Ox(r,e,n){const s=ws(),o=Cx(r,e,n),c=wx(r);mr(function(){if(c!=null){const[h,p]=gx(c,o,s);return e.receiveHandlerId(h),n.receiveHandlerId(h),p}},[s,e,n,o,c])}function Rx(r,e){const n=aE(r,e);pe(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const s=Sx(),o=Ex(n.options,n.previewOptions);return Ox(n,s,o),[sE(n.collect,s,o),ux(o),fx(o)]}function Dx(r){return z.useMemo(()=>r.hooks.dropTarget(),[r])}function Nx(r){const e=ws(),n=z.useMemo(()=>new bx(e.getBackend()),[e]);return mr(()=>(n.dropTargetOptions=r||null,n.reconnect(),()=>n.disconnectDropTarget()),[r]),n}function Ax(){const r=ws();return z.useMemo(()=>new hx(r),[r])}function xx(r){const{accept:e}=r;return z.useMemo(()=>(pe(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Ix{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function Mx(r,e){const n=z.useMemo(()=>new Ix(r,e),[e]);return z.useEffect(()=>{n.spec=r},[r]),n}function kx(r,e,n){const s=ws(),o=Mx(r,e),c=xx(r);mr(function(){const[h,p]=px(c,o,s);return e.receiveHandlerId(h),n.receiveHandlerId(h),p},[s,e,o,n,c.map(d=>d.toString()).join("|")])}function Kh(r,e){const n=aE(r,e),s=Ax(),o=Nx(n.options);return kx(n,s,o),[sE(n.collect,s,o),Dx(o)]}function Lx({boardId:r,columnId:e,cardId:n,cardData:s,user:o,showNotification:c,multipleVotesAllowed:d=!1}){const[h,p]=z.useState(!1),[m,_]=z.useState(s.content||""),[b,T]=z.useState(!1),[O,N]=z.useState(!1),[U,L]=z.useState(""),[$,F]=z.useState({top:0,left:0}),Q=z.useMemo(()=>Ne(Ae,`boards/${r}/columns/${e}/cards/${n}`),[r,e,n]),ne=z.useCallback(y=>{y&&y.stopPropagation(),p(!h),_(s.content||"")},[h,s.content]),Z=z.useCallback(async()=>{if(!r)return;const y=m.trim();try{if(!y){await _n(Q),c("Card deleted");return}await Be(Q,{...s,content:y}),c("Card saved"),p(!1)}catch(k){console.error("Error saving card:",k)}},[r,Q,s,m,c]),_e=z.useCallback(async y=>{if(y.stopPropagation(),!!r&&window.confirm("Are you sure you want to delete this card?"))try{await _n(Q),c("Card deleted")}catch(k){console.error("Error deleting card:",k)}},[r,Q,c]),ge=z.useCallback(y=>{y.key==="Enter"&&!y.shiftKey?(y.preventDefault(),Z()):y.key==="Escape"&&(p(!1),_(s.content||""))},[Z,s.content]),he=z.useCallback(async(y,k,G)=>{if(k.stopPropagation(),!r||!o)return;const q=s.votes||0;if(y<0&&q<=0){c("Can't have negative votes");return}const W=s.voters&&s.voters[o.uid]?s.voters[o.uid]:0;if(!d){if(W===y){c("You've already voted");return}W!==0&&(y=-W)}try{const ae=q+y,B=Ne(Ae,`boards/${r}/columns/${e}/cards/${n}/votes`);await Be(B,ae);const se=Ne(Ae,`boards/${r}/columns/${e}/cards/${n}/voters/${o.uid}`);let I;d?I=W+y:I=W!==0&&y===-W?0:y,I===0?await _n(se):await Be(se,I),!d&&W!==0&&y===-W?c("Vote removed"):c(G)}catch(ae){console.error("Error updating votes:",ae)}},[r,e,n,s.votes,c]),je=z.useCallback(y=>{he(1,y,"Upvoted card")},[he]),tt=z.useCallback(y=>{he(-1,y,"Downvoted card")},[he]),at=z.useCallback(y=>y?y.split(`
`).map((k,G)=>E.jsxs(X.Fragment,{children:[k,G<y.split(`
`).length-1&&E.jsx("br",{})]},G)):"",[]),Re=z.useCallback(y=>!!(s.reactions&&s.reactions[y]&&s.reactions[y].users&&s.reactions[y].users[o==null?void 0:o.uid]),[s.reactions,o==null?void 0:o.uid]),Ke=z.useCallback(y=>s.reactions&&s.reactions[y]&&s.reactions[y].count||0,[s.reactions]),le=z.useCallback(y=>{const k=`boards/${r}/columns/${e}/cards/${n}/reactions/${y}`;return{userRef:Ne(Ae,`${k}/users/${o==null?void 0:o.uid}`),countRef:Ne(Ae,`${k}/count`)}},[r,e,n,o==null?void 0:o.uid]),xe=z.useCallback(async(y,k)=>{if(y.stopPropagation(),!r||!o)return;const{userRef:G,countRef:q}=le(k),W=Re(k);try{if(W){await _n(G);const ae=Math.max(0,Ke(k)-1);await Be(q,ae),c("Your reaction removed")}else{await Be(G,!0);const ae=Ke(k)+1;await Be(q,ae),c("Reaction added")}}catch(ae){console.error("Error managing reaction:",ae)}},[r,o,le,Re,Ke,c]),M=z.useCallback(async()=>{if(!(!r||!U.trim()))try{const y=`comment_${Date.now()}`,k={content:U,timestamp:Date.now()},G=Ne(Ae,`boards/${r}/columns/${e}/cards/${n}/comments/${y}`);await Be(G,k),c("Comment added"),L("")}catch(y){console.error("Error adding comment:",y)}},[r,e,n,U,c]),V=z.useCallback(async(y,k)=>{var G;if(!(!r||!y||!k.trim()))try{const q=Ne(Ae,`boards/${r}/columns/${e}/cards/${n}/comments/${y}`),W=(G=s.comments)==null?void 0:G[y];if(!W)return;await Be(q,{...W,content:k.trim()}),c("Comment updated")}catch(q){console.error("Error updating comment:",q)}},[r,e,n,s.comments,c]),ie=z.useCallback(async y=>{if(!(!r||!y))try{const k=Ne(Ae,`boards/${r}/columns/${e}/cards/${n}/comments/${y}`);await _n(k),c("Comment deleted")}catch(k){console.error("Error deleting comment:",k)}},[r,e,n,c]),De=z.useCallback(()=>{N(!O),T(!1)},[O]);return z.useEffect(()=>{if(!b)return;const y=k=>{const G=document.querySelector(".emoji-picker");G&&!G.contains(k.target)&&!k.target.closest(".add-reaction-button")&&T(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[b]),{isEditing:h,editedContent:m,showEmojiPicker:b,showComments:O,newComment:U,emojiPickerPosition:$,setIsEditing:p,setEditedContent:_,setShowEmojiPicker:T,setShowComments:N,setNewComment:L,setEmojiPickerPosition:F,toggleEditMode:ne,saveCardChanges:Z,deleteCard:_e,handleKeyPress:ge,upvoteCard:je,downvoteCard:tt,formatContentWithEmojis:at,hasUserReactedWithEmoji:Re,addReaction:xe,addComment:M,editComment:V,deleteComment:ie,toggleComments:De}}const Ux=({editedComment:r,setEditedComment:e,saveComment:n,cancelEdit:s,deleteComment:o})=>E.jsxs("div",{className:"comment-edit",onClick:c=>c.stopPropagation(),children:[E.jsx("input",{type:"text",value:r,onChange:c=>e(c.target.value),className:"comment-edit-input",autoFocus:!0,onKeyPress:c=>{c.key==="Enter"&&r.trim()?n():c.key==="Escape"&&s()}}),E.jsxs("div",{className:"comment-edit-actions",children:[E.jsx("button",{className:"btn primary-btn btn-sm",onClick:n,children:"Save"}),E.jsx("button",{className:"btn secondary-btn btn-sm",onClick:s,children:"Cancel"}),E.jsx("button",{className:"btn danger-btn btn-sm",onClick:o,children:"Delete"})]})]}),jx=X.memo(({comments:r,onAddComment:e,newComment:n,onCommentChange:s,onEditComment:o,onDeleteComment:c})=>{const[d,h]=z.useState(null),[p,m]=z.useState(""),_=(N,U)=>{h(N),m(U)},b=()=>{h(null),m("")},T=()=>{p.trim()&&(o(d,p),b())},O=N=>{window.confirm("Are you sure you want to delete this comment?")&&c(N)};return E.jsxs("div",{className:"comments-section",children:[E.jsx("h4",{children:"Comments"}),r&&Object.entries(r).length>0?Object.entries(r).map(([N,U])=>E.jsx("div",{className:"comment",children:d===N?E.jsx(Ux,{editedComment:p,setEditedComment:m,saveComment:T,cancelEdit:b,deleteComment:()=>O(N)}):E.jsx("div",{className:"comment-content",onClick:L=>{L.stopPropagation(),_(N,U.content)},children:U.content})},N)):E.jsx("p",{className:"no-comments",children:"No comments yet"}),E.jsx("div",{className:"comment-form",children:E.jsx("input",{type:"text",placeholder:"Add a comment...",className:"comment-input",value:n,onChange:N=>s(N.target.value),onClick:N=>N.stopPropagation(),onKeyPress:N=>{N.key==="Enter"&&n.trim()&&(N.preventDefault(),e())}})})]})});var ad={exports:{}},od,Ay;function Px(){if(Ay)return od;Ay=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return od=r,od}var ld,xy;function zx(){if(xy)return ld;xy=1;var r=Px();function e(){}function n(){}return n.resetWarningCache=e,ld=function(){function s(d,h,p,m,_,b){if(b!==r){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}s.isRequired=s;function o(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:e};return c.PropTypes=c,c},ld}var Iy;function Hx(){return Iy||(Iy=1,ad.exports=zx()()),ad.exports}var Bx=Hx();const te=Wa(Bx);function Ud(){return Ud=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Ud.apply(this,arguments)}function qx(r,e){if(r==null)return{};var n=Gx(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function Gx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var Zh=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=qx(r,["color","size"]);return X.createElement("svg",Ud({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),X.createElement("polyline",{points:"19 12 12 19 5 12"}))});Zh.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};Zh.displayName="ArrowDown";function jd(){return jd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},jd.apply(this,arguments)}function Vx(r,e){if(r==null)return{};var n=Yx(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function Yx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var oo=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=Vx(r,["color","size"]);return X.createElement("svg",jd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"6 9 12 15 18 9"}))});oo.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};oo.displayName="ChevronDown";function Pd(){return Pd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Pd.apply(this,arguments)}function $x(r,e){if(r==null)return{};var n=Fx(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function Fx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var Jh=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=$x(r,["color","size"]);return X.createElement("svg",Pd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"9 18 15 12 9 6"}))});Jh.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};Jh.displayName="ChevronRight";function zd(){return zd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},zd.apply(this,arguments)}function Qx(r,e){if(r==null)return{};var n=Wx(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function Wx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var ep=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=Qx(r,["color","size"]);return X.createElement("svg",zd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"18 15 12 9 6 15"}))});ep.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};ep.displayName="ChevronUp";function Hd(){return Hd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Hd.apply(this,arguments)}function Xx(r,e){if(r==null)return{};var n=Kx(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function Kx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var tp=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=Xx(r,["color","size"]);return X.createElement("svg",Hd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),X.createElement("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}))});tp.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};tp.displayName="Clipboard";function Bd(){return Bd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Bd.apply(this,arguments)}function Zx(r,e){if(r==null)return{};var n=Jx(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function Jx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var np=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=Zx(r,["color","size"]);return X.createElement("svg",Bd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),X.createElement("polyline",{points:"14 2 14 8 20 8"}),X.createElement("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),X.createElement("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),X.createElement("polyline",{points:"10 9 9 9 8 9"}))});np.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};np.displayName="FileText";function qd(){return qd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},qd.apply(this,arguments)}function eI(r,e){if(r==null)return{};var n=tI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function tI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var ip=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=eI(r,["color","size"]);return X.createElement("svg",qd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),X.createElement("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}))});ip.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};ip.displayName="Link";function Gd(){return Gd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Gd.apply(this,arguments)}function nI(r,e){if(r==null)return{};var n=iI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function iI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var rp=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=nI(r,["color","size"]);return X.createElement("svg",Gd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}))});rp.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};rp.displayName="MessageSquare";function Vd(){return Vd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Vd.apply(this,arguments)}function rI(r,e){if(r==null)return{};var n=sI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function sI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var sp=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=rI(r,["color","size"]);return X.createElement("svg",Vd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}))});sp.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};sp.displayName="Moon";function Yd(){return Yd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Yd.apply(this,arguments)}function aI(r,e){if(r==null)return{};var n=oI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function oI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var ap=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=aI(r,["color","size"]);return X.createElement("svg",Yd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),X.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),X.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))});ap.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};ap.displayName="PlusSquare";function $d(){return $d=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},$d.apply(this,arguments)}function lI(r,e){if(r==null)return{};var n=cI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function cI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var Tc=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=lI(r,["color","size"]);return X.createElement("svg",$d({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),X.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});Tc.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};Tc.displayName="Plus";function Fd(){return Fd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Fd.apply(this,arguments)}function uI(r,e){if(r==null)return{};var n=fI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function fI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var op=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=uI(r,["color","size"]);return X.createElement("svg",Fd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"6",cy:"6",r:"3"}),X.createElement("circle",{cx:"6",cy:"18",r:"3"}),X.createElement("line",{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}),X.createElement("line",{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}),X.createElement("line",{x1:"8.12",y1:"8.12",x2:"12",y2:"12"}))});op.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};op.displayName="Scissors";function Qd(){return Qd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Qd.apply(this,arguments)}function dI(r,e){if(r==null)return{};var n=hI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function hI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var lp=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=dI(r,["color","size"]);return X.createElement("svg",Qd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"12",r:"3"}),X.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))});lp.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};lp.displayName="Settings";function Wd(){return Wd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Wd.apply(this,arguments)}function pI(r,e){if(r==null)return{};var n=gI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function gI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var cp=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=pI(r,["color","size"]);return X.createElement("svg",Wd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"12",r:"5"}),X.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),X.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),X.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),X.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),X.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),X.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),X.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),X.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}))});cp.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};cp.displayName="Sun";function Xd(){return Xd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Xd.apply(this,arguments)}function mI(r,e){if(r==null)return{};var n=vI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function vI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var up=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=mI(r,["color","size"]);return X.createElement("svg",Xd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});up.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};up.displayName="ThumbsUp";function Kd(){return Kd=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Kd.apply(this,arguments)}function _I(r,e){if(r==null)return{};var n=yI(r,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function yI(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}var fp=z.forwardRef(function(r,e){var n=r.color,s=n===void 0?"currentColor":n,o=r.size,c=o===void 0?24:o,d=_I(r,["color","size"]);return X.createElement("svg",Kd({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"3 6 5 6 21 6"}),X.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),X.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),X.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});fp.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};fp.displayName="Trash2";const lE=X.memo(({votes:r,onUpvote:e,onDownvote:n,showDownvoteButton:s=!0,disabled:o=!1})=>E.jsxs("div",{className:"votes",children:[E.jsx("button",{className:`vote-button ${o?"disabled":""}`,onClick:o?void 0:e,title:o?"Voting disabled until cards are revealed":"Upvote",disabled:o,children:E.jsx(ep,{size:16})}),E.jsx("span",{className:"vote-count",children:r||0}),s&&E.jsx("button",{className:`vote-button ${o?"disabled":""}`,onClick:o?void 0:n,title:o?"Voting disabled until cards are revealed":"Downvote",disabled:o,children:E.jsx(oo,{size:16})})]}));var bI=Uy();const EI=Wa(bI),SI=X.memo(({position:r,onEmojiSelect:e,onClose:n,hasUserReactedWithEmoji:s})=>EI.createPortal(E.jsx("div",{className:"emoji-picker",onClick:o=>o.stopPropagation(),"data-testid":"emoji-picker",style:{top:r.top,left:r.left},children:PN.map(o=>E.jsx("button",{className:`emoji-option ${s(o)?"selected":""}`,"data-testid":"emoji-option",onClick:c=>{c.stopPropagation(),e(c,o),n()},children:o},o))}),document.body)),TI=X.memo(({reactions:r,userId:e,showEmojiPicker:n,setShowEmojiPicker:s,setShowComments:o,addReaction:c,hasUserReactedWithEmoji:d,commentCount:h,toggleComments:p,emojiPickerPosition:m,setEmojiPickerPosition:_,disabled:b=!1})=>{const T=z.useRef(null);return E.jsxs("div",{className:"emoji-reactions",children:[E.jsxs("div",{className:"reactions-left",children:[r&&Object.entries(r).map(([O,N])=>{if(N.count<=0)return null;const U=N.users&&N.users[e];return E.jsxs("div",{className:`emoji-reaction ${U?"active":""} ${b?"disabled":""}`,"data-testid":"emoji-reaction",onClick:b?void 0:L=>c(L,O),title:b?"Reactions disabled until cards are revealed":U?"Click to remove your reaction":"Click to add your reaction",children:[E.jsx("span",{className:"emoji",children:O}),E.jsx("span",{className:"count",children:N.count})]},O)}),n&&E.jsx(SI,{position:m,onEmojiSelect:c,onClose:()=>s(!1),hasUserReactedWithEmoji:d}),E.jsx("button",{className:`add-reaction-button ${b?"disabled":""}`,onClick:b?void 0:O=>{if(O.stopPropagation(),T.current){const N=T.current.getBoundingClientRect();_({top:N.bottom+window.scrollY+5,left:N.left+window.scrollX})}s(!n),o(!1)},title:b?"Reactions disabled until cards are revealed":"Add reaction",ref:T,disabled:b,children:"+"})]}),E.jsx("div",{className:"reactions-right",children:E.jsxs("button",{className:"comments-btn",onClick:O=>{O.stopPropagation(),p()},title:"Toggle comments",children:[E.jsx(rp,{size:16}),E.jsx("span",{children:h||0})]})})]})}),CI=({editedContent:r,setEditedContent:e,handleKeyPress:n,saveCardChanges:s,toggleEditMode:o,deleteCard:c})=>E.jsxs("div",{className:"card-edit",onClick:d=>d.stopPropagation(),children:[E.jsx("textarea",{value:r,onChange:d=>e(d.target.value),onKeyDown:n,className:"card-edit-textarea",autoFocus:!0}),E.jsxs("div",{className:"card-edit-actions",children:[E.jsx("button",{className:"btn primary-btn",onClick:s,children:"Save"}),E.jsx("button",{className:"btn secondary-btn",onClick:o,children:"Cancel"}),E.jsx("button",{className:"btn danger-btn",onClick:c,children:"Delete"})]})]}),wI=({cardData:r,formatContentWithEmojis:e,upvoteCard:n,downvoteCard:s,votingEnabled:o,downvotingEnabled:c,userId:d,revealMode:h,cardsRevealed:p,groupId:m})=>{const _=r.voters&&d&&r.voters[d]||0,b=c||_>0,T=F=>F?F.split("").map(Q=>Q===" "?" ":Q===`
`?`
`:"").join(""):"",O=h&&!p,N=r.createdBy&&d&&r.createdBy===d,U=O&&!N,L=O,$=U?T(r.content):e(r.content);return E.jsxs("div",{className:"card-header",children:[o&&!m&&E.jsx(lE,{votes:r.votes,onUpvote:L?()=>{}:n,onDownvote:L?()=>{}:s,showDownvoteButton:b,disabled:L}),E.jsx("div",{className:`card-content ${!o||m?"full-width":""} ${U?"obfuscated":""}`,"data-testid":"card-content",children:$})]})};function cE({cardId:r,cardData:e,columnId:n,groupId:s=null,showNotification:o,onCardDropOnCard:c=null}){const{boardId:d,user:h,votingEnabled:p,downvotingEnabled:m,multipleVotesAllowed:_,revealMode:b,cardsRevealed:T}=ao(),O=z.useRef(null),{isEditing:N,editedContent:U,showEmojiPicker:L,showComments:$,newComment:F,emojiPickerPosition:Q,setEditedContent:ne,setShowEmojiPicker:Z,setShowComments:_e,setNewComment:ge,setEmojiPickerPosition:he,toggleEditMode:je,saveCardChanges:tt,deleteCard:at,handleKeyPress:Re,upvoteCard:Ke,downvoteCard:le,formatContentWithEmojis:xe,hasUserReactedWithEmoji:M,addReaction:V,addComment:ie,editComment:De,deleteComment:y,toggleComments:k}=Lx({boardId:d,columnId:n,cardId:r,cardData:e,user:h,showNotification:o,multipleVotesAllowed:_}),G=e.comments?Object.keys(e.comments).length:0,q=b&&!T,W=e.createdBy&&(h==null?void 0:h.uid)&&e.createdBy===(h==null?void 0:h.uid),ae=q&&!W,B=q&&!W,se=b&&T,[{isDragging:I},K]=Rx(()=>({type:"CARD",item:{cardId:r,columnId:n,cardData:e,groupId:s},canDrag:!B||se,collect:ve=>({isDragging:ve.isDragging()})}),[r,n,e,B,s,se]),[{isOver:J},be]=Kh(()=>({accept:"CARD",drop:ve=>{se&&c&&ve.cardId!==r&&c(ve.cardId,r)},canDrop:()=>se,collect:ve=>({isOver:!!ve.isOver()&&!!ve.canDrop()})}),[se,c,r]),Le=()=>{!N&&!ae&&!se&&je()},Pe=ve=>{O.current=ve,(!B||se)&&K(ve),se&&be(ve)};return E.jsx("div",{ref:Pe,className:`card ${I?"dragging":""} ${ae?"editing-disabled":""} ${B&&!se?"drag-disabled":""} ${J?"drop-target":""} ${se?"groupable":""}`,onClick:Le,style:{opacity:I?.5:1,cursor:se?"grab":B?"not-allowed":N?"default":"pointer"},children:N?E.jsx(CI,{editedContent:U,setEditedContent:ne,handleKeyPress:Re,saveCardChanges:tt,toggleEditMode:je,deleteCard:at}):E.jsxs(E.Fragment,{children:[E.jsx(wI,{cardData:e,formatContentWithEmojis:xe,upvoteCard:Ke,downvoteCard:le,votingEnabled:p,downvotingEnabled:m,userId:h==null?void 0:h.uid,revealMode:b,cardsRevealed:T,groupId:s}),E.jsx(TI,{reactions:e.reactions,userId:h==null?void 0:h.uid,showEmojiPicker:L,setShowEmojiPicker:Z,setShowComments:_e,addReaction:V,hasUserReactedWithEmoji:M,commentCount:G,toggleComments:k,emojiPickerPosition:Q,setEmojiPickerPosition:he,disabled:b&&!T}),$&&E.jsx(jx,{comments:e.comments,onAddComment:ie,newComment:F,onCommentChange:ge,onEditComment:De,onDeleteComment:y})]})})}function OI({groupId:r,groupData:e,columnId:n,showNotification:s,sortByVotes:o}){const{boardId:c,moveCard:d,ungroupCards:h,updateGroupName:p,votingEnabled:m,downvotingEnabled:_,upvoteGroup:b,downvoteGroup:T}=ao(),[O,N]=z.useState(e.expanded!==!1),[U,L]=z.useState(!1),[$,F]=z.useState(e.name||"Unnamed Group"),Q=z.useRef(null),[{isOver:ne},Z]=Kh(()=>({accept:"CARD",drop:le=>{le.columnId===n&&!e.cards[le.cardId]&&(d(le.cardId,le.columnId,n,r),s("Card added to group"))},collect:le=>({isOver:!!le.isOver()})}),[n,r,e.cards,d,s]);Z(Q);const _e=le=>{le.stopPropagation(),b(n,r,e.votes||0,s)},ge=le=>{le.stopPropagation(),T(n,r,e.votes||0,s)},he=()=>{if(!e.cards)return[];const le=Object.entries(e.cards).map(([xe,M])=>({id:xe,...M}));return o?le.sort((xe,M)=>(M.votes||0)-(xe.votes||0)):le.sort((xe,M)=>(xe.created||0)-(M.created||0))},je=le=>{F(le.target.value)},tt=()=>{c&&$.trim()&&(p(n,r,$.trim()),L(!1))},at=le=>{le.key==="Enter"?tt():le.key==="Escape"&&(L(!1),F(e.name||"Unnamed Group"))},Re=()=>{window.confirm("Are you sure you want to ungroup these cards?")&&(h(n,r),s("Cards ungrouped"))},Ke=Object.keys(e.cards||{}).length;return E.jsxs("div",{ref:Q,className:`card-group ${ne?"drag-over":""}`,children:[E.jsxs("div",{className:"card-group-header",onClick:()=>N(!O),children:[E.jsxs("div",{className:"card-group-title-section",children:[O?E.jsx(oo,{size:16,className:"expand-icon"}):E.jsx(Jh,{size:16,className:"expand-icon"}),U?E.jsx("input",{type:"text",value:$,onChange:je,onBlur:tt,onKeyDown:at,className:"group-name-input",autoFocus:!0,onClick:le=>le.stopPropagation()}):E.jsx("h3",{className:"card-group-name",onClick:le=>{le.stopPropagation(),L(!0)},children:e.name||"Unnamed Group"})]}),E.jsxs("div",{className:"card-group-actions",children:[m&&E.jsx(lE,{votes:e.votes||0,onUpvote:_e,onDownvote:ge,showDownvoteButton:_,disabled:!1}),E.jsxs("div",{className:"card-group-info",children:[E.jsxs("span",{className:"card-count",children:[Ke," card",Ke!==1?"s":""]}),E.jsx("button",{className:"group-action-btn",onClick:le=>{le.stopPropagation(),Re()},title:"Ungroup cards",children:E.jsx(op,{size:14})})]})]})]}),O&&E.jsx("div",{className:"card-group-content",children:he().length===0?E.jsxs("div",{className:"empty-group-placeholder",children:[E.jsx("span",{children:"No cards in this group"}),E.jsx("span",{children:"Drag cards here to add them"})]}):he().map(le=>E.jsx(cE,{cardId:le.id,cardData:le,columnId:n,groupId:r,showNotification:s},le.id))}),!O&&Ke>0&&E.jsxs("div",{className:"card-group-preview",children:[he().slice(0,3).map((le,xe)=>{var M,V;return E.jsx("div",{className:"card-preview",style:{transform:`translateX(${xe*4}px) translateY(${xe*2}px)`,zIndex:3-xe},children:E.jsxs("div",{className:"card-preview-content",children:[(M=le.content)==null?void 0:M.substring(0,30),((V=le.content)==null?void 0:V.length)>30?"...":""]})},le.id)}),Ke>3&&E.jsxs("div",{className:"more-cards-indicator",children:["+",Ke-3," more"]})]})]})}function RI(r,e="New Column"){if(!r)return Promise.reject(new Error("Board ID is required"));const n=Ua(),s={title:e,cards:{}},o=Ne(Ae,`boards/${r}/columns/${n}`);return Be(o,s)}function DI(r,e,n,s=null){if(!r)return Promise.reject(new Error("Board ID is required"));if(!e)return Promise.reject(new Error("Column ID is required"));if(!n||!n.trim())return Promise.reject(new Error("Card content is required"));const o=Ua(),c={content:n.trim(),votes:0,created:Date.now(),createdBy:s?s.uid:null},d=Ne(Ae,`boards/${r}/columns/${e}/cards/${o}`);return Be(d,c)}function NI({columnId:r,columnData:e,sortByVotes:n,showNotification:s}){const{boardId:o,moveCard:c,votingEnabled:d,user:h,createCardGroup:p,revealMode:m,cardsRevealed:_}=ao(),[b,T]=z.useState(e.title||"New Column"),[O,N]=z.useState(!1),[U,L]=z.useState(""),[$,F]=z.useState(!1),[Q,ne]=z.useState(!1),[Z,_e]=z.useState(""),[ge,he]=z.useState(null),je=z.useRef(null);z.useEffect(()=>{e&&e.title!==b&&!O&&T(e.title)},[e,O,b]),z.useEffect(()=>{_&&$&&(F(!1),L(""))},[_,$]);const[{isOver:tt},at]=Kh(()=>({accept:"CARD",drop:B=>{B.columnId!==r?(c(B.cardId,B.columnId,r),s("Card moved successfully")):B.groupId&&(c(B.cardId,B.columnId,r,null),s("Card removed from group"))},collect:B=>({isOver:!!B.isOver()})}),[r,c,s]);at(je);const Re=B=>{T(B.target.value)},Ke=()=>{if(o){const B=`boards/${o}/columns/${r}/title`,se=Ne(Ae,B);Be(se,b).then(()=>{console.log("Column title updated"),N(!1)}).catch(I=>{console.error("Error updating column title:",I)})}},le=B=>{B.key==="Enter"&&Ke()},xe=()=>{if(o&&window.confirm("Are you sure you want to delete this column and all its cards?")){const B=Ne(Ae,`boards/${o}/columns/${r}`);_n(B).then(()=>{s("Column deleted")}).catch(se=>{console.error("Error deleting column:",se)})}},M=()=>{F(!0),L("")},V=()=>{F(!1),L("")},ie=()=>{o&&U.trim()?DI(o,r,U,h).then(()=>{s("Card added"),V()}).catch(B=>{console.error("Error adding card:",B),B.message==="Card content is required"&&(V(),s("Empty cards are not allowed"))}):(V(),s("Empty cards are not allowed"))},De=B=>{B.key==="Enter"&&!B.shiftKey?(B.preventDefault(),ie()):B.key==="Escape"&&V()},y=()=>{if(!e.cards)return[];const B=Object.entries(e.cards).map(([se,I])=>({id:se,...I}));return n?B.sort((se,I)=>(I.votes||0)-(se.votes||0)):B.sort((se,I)=>(se.created||0)-(I.created||0))},k=()=>{if(!e.groups)return[];const B=Object.entries(e.groups).map(([se,I])=>({id:se,...I}));return n?B.sort((se,I)=>(I.votes||0)-(se.votes||0)):B.sort((se,I)=>(se.created||0)-(I.created||0))},G=()=>{const B=y().map(I=>({type:"card",data:I})),se=k().map(I=>({type:"group",data:I}));return n?[...B,...se].sort((I,K)=>(K.data.votes||0)-(I.data.votes||0)):[...se,...B].sort((K,J)=>(K.data.created||0)-(J.data.created||0))},q=(B,se)=>{!m||!_||B!==se&&(he({draggedCardId:B,targetCardId:se}),ne(!0),_e(""))},W=()=>{var B;if(!Z.trim()){s("Please enter a group name");return}if(ge){const{draggedCardId:se,targetCardId:I}=ge,K=(B=e.cards)==null?void 0:B[I],J=K==null?void 0:K.created;p(r,[se,I],Z.trim(),J),s(`Group "${Z.trim()}" created`)}ne(!1),_e(""),he(null)},ae=()=>{ne(!1),_e(""),he(null)};return E.jsxs("div",{className:"column",children:[E.jsxs("div",{className:"column-header",children:[O?E.jsx("input",{type:"text",value:b,onChange:Re,onBlur:Ke,onKeyPress:le,className:"column-title-input",autoFocus:!0}):E.jsx("h2",{className:"column-title",onClick:()=>N(!0),children:b}),E.jsx("div",{className:"column-actions",children:!_&&E.jsx("button",{className:"icon-button",title:"Delete Column",onClick:xe,children:E.jsx(fp,{})})})]}),E.jsxs("div",{ref:je,className:`column-content ${tt?"drag-over":""}`,children:[k().length===0&&y().length===0&&E.jsxs("div",{className:"empty-column-placeholder",children:[E.jsx("span",{children:"No cards yet"}),E.jsx("span",{children:"Add a card to get started"})]}),G().map(B=>B.type==="group"?E.jsx(OI,{groupId:B.data.id,groupData:B.data,columnId:r,sortByVotes:n,showNotification:s},B.data.id):E.jsx(cE,{cardId:B.data.id,cardData:B.data,columnId:r,showNotification:s,onCardDropOnCard:q},B.data.id)),$?E.jsxs("div",{className:"inline-card-form",children:[E.jsx("textarea",{placeholder:"Enter card content...",value:U,onChange:B=>L(B.target.value),onKeyDown:De,className:"inline-card-textarea",autoFocus:!0}),E.jsxs("div",{className:"inline-card-actions",children:[E.jsx("button",{className:"btn primary-btn",onClick:ie,children:"Add"}),E.jsx("button",{className:"btn secondary-btn",onClick:V,children:"Cancel"})]})]}):!_&&E.jsxs("button",{className:"add-card",onClick:M,children:[E.jsx(Tc,{}),"Add Card"]}),Q&&E.jsx("div",{className:"group-modal-overlay",onClick:ae,children:E.jsxs("div",{className:"group-modal",onClick:B=>B.stopPropagation(),children:[E.jsx("h3",{children:"Create Card Group"}),E.jsx("p",{children:"Creating a group with 2 cards"}),E.jsx("input",{type:"text",placeholder:"Enter group name...",value:Z,onChange:B=>_e(B.target.value),onKeyDown:B=>{B.key==="Enter"&&W(),B.key==="Escape"&&ae()},className:"group-name-input",autoFocus:!0}),E.jsxs("div",{className:"group-modal-actions",children:[E.jsx("button",{className:"btn primary-btn",onClick:W,children:"Create Group"}),E.jsx("button",{className:"btn secondary-btn",onClick:ae,children:"Cancel"})]})]})})]})]})}const AI=({isOpen:r,onClose:e,showNotification:n})=>{const[s,o]=z.useState("markdown"),[c,d]=z.useState(""),{boardTitle:h,columns:p}=ao();z.useEffect(()=>{if(r)try{_(s)}catch(N){console.error("Error generating export:",N),d("Error generating export. Please try again.")}},[r,s,p,h]);const m=()=>{const N={title:h||"Untitled Board",columns:[]};return!p||Object.keys(p).length===0||Object.entries(p).sort((L,$)=>L[0].localeCompare($[0])).forEach(([L,$])=>{if(!$)return;const F={title:$.title||"Untitled Column",cards:[]};$.cards&&Object.entries($.cards).forEach(([Q,ne])=>{const Z={content:ne.content||"Empty Card",votes:ne.votes||0,comments:[],reactions:[]};ne.comments&&Object.keys(ne.comments).length>0&&Object.entries(ne.comments).forEach(([_e,ge])=>{ge&&ge.content&&Z.comments.push(ge.content)}),ne.reactions&&Object.keys(ne.reactions).length>0&&Object.entries(ne.reactions).filter(([ge,he])=>((he==null?void 0:he.count)||0)>0).forEach(([ge,he])=>{if(ge){const je=(he==null?void 0:he.count)||0;Z.reactions.push({emoji:ge,count:je})}}),F.cards.push(Z)}),N.columns.push(F)}),N},_=N=>{d(N==="markdown"?b():T())},b=()=>{const N=m();let U=`# ${N.title}

`;return N.columns.length===0?U+"No columns found.":(N.columns.forEach(L=>{U+=`## ${L.title}

`,L.cards.forEach($=>{const F=$.votes;U+=`### ${$.content} ${F>0?`(${F} votes)`:""}

`,$.comments.length>0&&(U+=`**Comments:**

`,$.comments.forEach(Q=>{U+=`- ${Q}
`}),U+=`
`),$.reactions.length>0&&(U+="**Reactions:** ",$.reactions.forEach((Q,ne,Z)=>{U+=`${Q.emoji} (${Q.count})${ne<Z.length-1?", ":""}`}),U+=`

`)}),U+=`
`}),U)},T=()=>{const N=m();let U=`${N.title}

`;return N.columns.length===0?U+"No columns found.":(N.columns.forEach(L=>{const $=L.title;U+=`${$}
${"=".repeat($.length)}

`,L.cards.forEach(F=>{const Q=F.votes,ne=F.content;U+=`${ne} ${Q>0?`(${Q} votes)`:""}
${"-".repeat(ne.length)}

`,F.comments.length>0&&(U+=`Comments:
`,F.comments.forEach(Z=>{U+=`- ${Z}
`}),U+=`
`),F.reactions.length>0&&(U+="Reactions: ",F.reactions.forEach((Z,_e,ge)=>{U+=`${Z.emoji} (${Z.count})${_e<ge.length-1?", ":""}`}),U+=`

`)}),U+=`
`}),U)},O=()=>{navigator.clipboard.writeText(c).then(()=>{n&&n("Copied to clipboard"),e()}).catch(N=>{console.error("Could not copy text: ",N)})};return r?E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-container",children:[E.jsxs("div",{className:"modal-header",children:[E.jsx("h2",{children:"Export Board"}),E.jsx("button",{className:"close-button",onClick:e,children:""})]}),E.jsxs("div",{className:"modal-body",children:[E.jsxs("div",{className:"format-selector",children:[E.jsx("div",{className:"format-option",children:E.jsxs("label",{className:`format-label ${s==="markdown"?"selected":""}`,children:[E.jsx("input",{type:"radio",value:"markdown",checked:s==="markdown",onChange:()=>o("markdown"),className:"format-radio"}),E.jsx("span",{className:"format-name",children:"Markdown"})]})}),E.jsx("div",{className:"format-option",children:E.jsxs("label",{className:`format-label ${s==="plaintext"?"selected":""}`,children:[E.jsx("input",{type:"radio",value:"plaintext",checked:s==="plaintext",onChange:()=>o("plaintext"),className:"format-radio"}),E.jsx("span",{className:"format-name",children:"Plain Text"})]})})]}),E.jsx("div",{className:"export-preview",children:E.jsx("textarea",{readOnly:!0,value:c,className:"export-content"})})]}),E.jsxs("div",{className:"modal-footer",children:[E.jsxs("button",{className:"primary-button",onClick:O,children:[E.jsx(tp,{size:16}),"Copy to Clipboard"]}),E.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})}):null},wl=[{id:"default",name:"Default",description:"Simple task tracking for any project",columns:["To Do","In Progress","Done"],icon:"",tags:["workflow","kanban","basic"]},{id:"custom",name:"Custom",description:"Create your own board structure from scratch",columns:["Untitled"],icon:"",tags:["custom","blank","flexible"]},{id:"lean-coffee",name:"Lean Coffee",description:"Democratically driven meeting agenda format",columns:["Topics","Discussing","Done"],icon:"",tags:["discussion","meeting","agenda"]},{id:"retro",name:"Retrospective",description:"Reflect on past work and plan improvements",columns:["Went Well","Could Improve","Action Items"],icon:"",tags:["agile","reflection","team"]},{id:"feelings-improvements",name:"Feelings / Improvements",description:"Focus on emotional impact and concrete solutions",columns:["Feelings","Improvements"],icon:"",tags:["feedback","emotions","solutions"]},{id:"daki",name:"DAKI",description:"Evaluate current processes and identify changes",columns:["Drop","Add","Keep","Improve"],icon:"",tags:["reflection","processes","practices"]},{id:"glad-sad-mad",name:"Glad Sad Mad",description:"Categorize feedback by emotional response",columns:["Glad","Sad","Mad"],icon:"",tags:["emotions","reflection","feedback"]},{id:"start-stop-continue",name:"Start Stop Continue",description:"Focus on actionable changes to team behavior",columns:["Start","Stop","Continue"],icon:"",tags:["action","feedback","improvement"]},{id:"4ls",name:"4 Ls",description:"Comprehensive retrospective with learning focus",columns:["Liked","Learned","Lacked","Longed For"],icon:"",tags:["reflection","learning","retrospective"]},{id:"swot",name:"SWOT",description:"Analyze internal and external factors for planning",columns:["Strengths","Weaknesses","Opportunities","Threats"],icon:"",tags:["strategy","planning","analysis"]},{id:"six-thinking-hats",name:"Six Thinking Hats",description:"Examine ideas from multiple mental perspectives",columns:["Facts","Emotions","Critical","Optimistic","Creative","Process"],icon:"",tags:["thinking","perspectives","discussion"]},{id:"moscow",name:"MoSCoW",description:"Categorize features by implementation priority",columns:["Must Have","Should Have","Could Have","Won't Have"],icon:"",tags:["prioritization","planning","requirements"]},{id:"five-whys",name:"Five Whys",description:"Iteratively identify the underlying causes of issues",columns:["Problem","Why 1","Why 2","Why 3","Why 4","Why 5","Root Cause"],icon:"",tags:["problem solving","analysis","causes"]},{id:"eisenhower",name:"Eisenhower Matrix",description:"Prioritize tasks based on urgency and importance",columns:["Urgent & Important","Important & Not Urgent","Urgent & Not Important","Neither"],icon:"",tags:["decision","prioritization","time management"]},{id:"sailboat",name:"Sailboat Retrospective",description:"Visualize team progress with nautical metaphors",columns:["Wind (Helps)","Anchors (Hinders)","Rocks (Risks)","Island (Goals)"],icon:"",tags:["retrospective","visual","team"]},{id:"fishbone",name:"Fishbone",description:"Identify causes across different categories",columns:["People","Process","Equipment","Materials","Environment","Management"],icon:"",tags:["analysis","causes","problem solving"]},{id:"feedback-grid",name:"Feedback Grid",description:"Balanced approach to feedback with action items",columns:["What Went Well","What Could Be Improved","Questions","Ideas"],icon:"",tags:["feedback","collection","reflection"]},{id:"starfish",name:"Starfish Retrospective",description:"Detailed action-oriented team improvement model",columns:["Keep Doing","Less Of","More Of","Start Doing","Stop Doing"],icon:"",tags:["retrospective","actions","team"]},{id:"kpt",name:"KPT",description:"Concise approach for identifying issues and solutions",columns:["Keep","Problem","Try"],icon:"",tags:["retrospective","simple","actions"]},{id:"pro-con",name:"Pros & Cons",description:"Evaluate options and make informed decisions",columns:["Pros","Cons","Decisions"],icon:"",tags:["decision","evaluation","analysis"]},{id:"user-journey",name:"User Journey Map",description:"Map out each stage of the user experience",columns:["Awareness","Consideration","Decision","Onboarding","Retention","Advocacy"],icon:"",tags:["ux","design","customer"]},{id:"three-horizons",name:"Three Horizons",description:"Strategic planning across different time frames",columns:["Horizon 1 (Now)","Horizon 2 (Next)","Horizon 3 (Future)"],icon:"",tags:["strategy","planning","innovation"]},{id:"impact-effort",name:"Impact/Effort Matrix",description:"Prioritize tasks based on impact and required effort",columns:["High Impact/Low Effort","High Impact/High Effort","Low Impact/Low Effort","Low Impact/High Effort"],icon:"",tags:["prioritization","planning","efficiency"]},{id:"assumption-mapping",name:"Assumption Mapping",description:"Identify and test critical business assumptions",columns:["Known Knowns","Known Unknowns","Unknown Knowns","Unknown Unknowns"],icon:"",tags:["strategy","risk","planning"]},{id:"customer-problem-solution",name:"Customer-Problem-Solution",description:"Framework for validating business model assumptions",columns:["Customer Segments","Problems","Solutions","Value Propositions"],icon:"",tags:["business","startup","validation"]},{id:"work-breakdown",name:"Work Breakdown Structure",description:"Hierarchical decomposition of project deliverables",columns:["Project","Major Deliverables","Sub-deliverables","Work Packages","Tasks"],icon:"",tags:["project management","planning","organization"]},{id:"five-stage-design",name:"Five Stage Design Thinking",description:"Human-centered approach to innovation",columns:["Empathize","Define","Ideate","Prototype","Test"],icon:"",tags:["design","innovation","process"]},{id:"rose-thorn-bud",name:"Rose, Thorn, Bud",description:"Review positives, challenges, and opportunities",columns:["Rose (Positive)","Thorn (Challenge)","Bud (Opportunity)"],icon:"",tags:["feedback","reflection","opportunity"]},{id:"four-quadrant-feedback",name:"Four Quadrant Feedback",description:"Balanced personal or project feedback",columns:["Continue","Consider","Start","Stop"],icon:"",tags:["feedback","personal","development"]}],xI=({isOpen:r,onClose:e,onSelectTemplate:n})=>{const[s,o]=z.useState("default"),[c,d]=z.useState(""),[h,p]=z.useState(wl);z.useEffect(()=>{if(!c.trim()){p(wl);return}const L=c.toLowerCase().trim(),$=wl.filter(F=>F.name.toLowerCase().includes(L)||F.description.toLowerCase().includes(L)||F.tags.some(Q=>Q.toLowerCase().includes(L))||F.columns.some(Q=>Q.toLowerCase().includes(L)));p($)},[c]);const m=L=>{o(L)},_=()=>{const L=wl.find($=>$.id===s);L&&n(L.columns,L.name)},b=L=>{d(L.target.value)},T=X.useRef(null),O=X.useRef(null),N=L=>{L.key==="Enter"&&L.target.classList.contains("template-search-input")?h.length>0&&(o(h[0].id),L.preventDefault()):L.key==="Enter"&&!L.target.classList.contains("template-search-input")?(_(),L.preventDefault()):L.key==="Escape"?c?(d(""),T.current&&T.current.focus(),L.preventDefault()):e():L.key==="/"&&!L.target.classList.contains("template-search-input")&&T.current&&(T.current.focus(),L.preventDefault())};if(X.useEffect(()=>{r&&T.current&&setTimeout(()=>{T.current.focus()},100)},[r]),X.useEffect(()=>{if(r)return document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}},[r,s,c,h]),!r)return null;const U=(L,$)=>{if(!$.trim())return L;try{const F=new RegExp(`(${$.trim()})`,"gi");return L.replace(F,"<mark>$1</mark>")}catch{return L}};return E.jsx("div",{className:"modal-overlay",children:E.jsxs("div",{className:"modal-container template-modal",children:[E.jsxs("div",{className:"modal-header",children:[E.jsx("h2",{children:"Choose a Board Template"}),E.jsx("button",{className:"close-button",onClick:e,children:""})]}),E.jsxs("div",{className:"modal-body template-selector",children:[E.jsxs("div",{className:"template-search",children:[E.jsxs("div",{className:"search-input-container",children:[E.jsx("input",{type:"text",placeholder:"Search templates by name, description, or columns... (Press / to focus)",value:c,onChange:b,className:"template-search-input",autoFocus:!0,ref:T}),c&&E.jsx("button",{className:"clear-search",onClick:()=>d(""),title:"Clear search",children:""})]}),E.jsx("div",{className:"search-results-count",children:c?h.length===0?E.jsx("div",{className:"no-results",children:"No templates match your search"}):E.jsxs("div",{className:"results-count",children:["Found ",h.length," template",h.length!==1?"s":""]}):null})]}),E.jsx("div",{className:"template-grid",children:h.map(L=>{const $=c?E.jsx("span",{dangerouslySetInnerHTML:{__html:U(L.name,c)}}):L.name,F=c?E.jsx("span",{dangerouslySetInnerHTML:{__html:U(L.description,c)}}):L.description;return E.jsxs("div",{className:`template-card ${s===L.id?"selected":""} ${c?"search-active":""}`,onClick:()=>m(L.id),children:[E.jsx("div",{className:"template-icon",children:L.icon}),E.jsxs("div",{className:"template-info",children:[E.jsx("h3",{children:$}),E.jsx("p",{children:F})]}),E.jsxs("div",{className:"template-details",children:[E.jsx("div",{className:"template-columns",children:L.columns.map((Q,ne)=>E.jsx("span",{className:"template-column-pill",children:c?E.jsx("span",{dangerouslySetInnerHTML:{__html:U(Q,c)}}):Q},ne))}),E.jsx("div",{className:"template-tags",children:L.tags.map((Q,ne)=>E.jsx("span",{className:`template-tag ${c&&Q.toLowerCase().includes(c.toLowerCase())?"highlight":""}`,children:Q},ne))})]})]},L.id)})})]}),E.jsxs("div",{className:"modal-footer",children:[E.jsx("button",{className:"primary-button",onClick:_,ref:O,children:"Create Board"}),E.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})})},II=({boardTitle:r,handleBoardTitleChange:e,handleBoardTitleBlur:n,copyShareUrl:s,handleExportBoard:o})=>E.jsxs("div",{className:"board-title-container",children:[E.jsx("input",{type:"text",id:"board-title",placeholder:"Untitled Board",value:r,onChange:e,onBlur:n,className:"header-input"}),E.jsxs("div",{className:"action-buttons",children:[E.jsxs("button",{id:"copy-share-url",className:"btn secondary-btn",title:"Copy Share URL",onClick:s,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px"},children:[E.jsx(ip,{size:16}),"Share"]}),E.jsxs("button",{id:"export-board",className:"btn secondary-btn",onClick:o,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px"},children:[E.jsx(np,{size:16}),"Export"]})]})]}),MI=({handleCreateNewBoard:r,sortByVotes:e,setSortByVotes:n,votingEnabled:s,updateVotingEnabled:o,downvotingEnabled:c,updateDownvotingEnabled:d,multipleVotesAllowed:h,updateMultipleVotesAllowed:p,revealMode:m,updateRevealMode:_,cardsRevealed:b,revealAllCards:T,sortDropdownOpen:O,setSortDropdownOpen:N,resetAllVotes:U,showNotification:L,darkMode:$,updateDarkMode:F})=>{const Q=X.useRef(null);return X.useEffect(()=>{const ne=Z=>{Q.current&&!Q.current.contains(Z.target)&&N(!1)};return document.addEventListener("mousedown",ne),()=>{document.removeEventListener("mousedown",ne)}},[N]),E.jsxs("div",{className:"action-buttons",children:[m&&E.jsx("button",{id:"reveal-cards",className:"btn primary-btn reveal-button",onClick:()=>{b||(T(),L("All cards revealed!"))},style:{display:"flex",alignItems:"center",gap:"6px",backgroundColor:b?"var(--success)":"var(--accent)",color:"white",fontWeight:"600",animation:b?"none":"pulse 2s infinite",cursor:b?"default":"pointer",opacity:b?"0.9":"1"},disabled:b,children:b?" Cards Revealed":" Reveal All Cards"}),E.jsxs("button",{id:"create-board",className:"btn",onClick:r,style:{display:"flex",alignItems:"center",gap:"6px"},children:[E.jsx(ap,{size:16}),"New Board"]}),E.jsxs("div",{className:"sort-dropdown-container",ref:Q,children:[E.jsxs("button",{id:"settings-dropdown-button",className:"btn sort-dropdown-button",onClick:()=>N(!O),"aria-expanded":O,"aria-haspopup":"true",title:"Board settings and preferences",children:[E.jsx(lp,{size:16}),"Settings",E.jsx(oo,{size:12,className:O?"dropdown-arrow rotated":"dropdown-arrow"})]}),O&&E.jsxs("div",{className:"sort-dropdown-menu",children:[E.jsxs("div",{className:"settings-section",children:[E.jsx("h4",{className:"settings-section-title",children:"Sort Cards"}),E.jsxs("button",{className:`sort-option ${e?"":"selected"}`,onClick:()=>{n(!1)},children:[E.jsx(Zh,{size:14}),"Chronological",!e&&E.jsx("span",{className:"checkmark",children:""})]}),E.jsxs("button",{className:`sort-option ${e?"selected":""}`,onClick:()=>{n(!0)},children:[E.jsx(up,{size:14}),"By Votes",e&&E.jsx("span",{className:"checkmark",children:""})]})]}),E.jsx("div",{className:"settings-divider"}),E.jsxs("div",{className:"settings-section",children:[E.jsx("h4",{className:"settings-section-title",children:"Allow voting?"}),E.jsxs("div",{className:"settings-boolean-option",children:[E.jsx("button",{className:`boolean-option ${s?"selected":""}`,onClick:()=>{o(!0)},children:"Yes"}),E.jsx("button",{className:`boolean-option ${s?"":"selected"}`,onClick:()=>{o(!1)},children:"No"})]})]}),s&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"settings-divider"}),E.jsxs("div",{className:"settings-section",children:[E.jsx("h4",{className:"settings-section-title",children:"Allow downvoting?"}),E.jsxs("div",{className:"settings-boolean-option",children:[E.jsx("button",{className:`boolean-option ${c?"selected":""}`,onClick:()=>{d(!0)},children:"Yes"}),E.jsx("button",{className:`boolean-option ${c?"":"selected"}`,onClick:()=>{d(!1)},children:"No"})]})]}),E.jsx("div",{className:"settings-divider"}),E.jsxs("div",{className:"settings-section",children:[E.jsx("h4",{className:"settings-section-title",children:"Allow users to vote multiple times on the same card?"}),E.jsxs("div",{className:"settings-boolean-option",children:[E.jsx("button",{className:`boolean-option ${h?"selected":""}`,onClick:()=>{p(!0)},children:"Yes"}),E.jsx("button",{className:`boolean-option ${h?"":"selected"}`,onClick:()=>{p(!1)},children:"No"})]})]}),E.jsx("div",{className:"settings-divider"}),E.jsxs("div",{className:"settings-section",children:[E.jsx("h4",{className:"settings-section-title",children:"Reveal Mode (for retrospectives)"}),E.jsxs("div",{className:"settings-boolean-option",children:[E.jsx("button",{className:`boolean-option ${m?"selected":""}`,onClick:()=>{_(!0)},children:"On"}),E.jsx("button",{className:`boolean-option ${m?"":"selected"}`,onClick:()=>{_(!1)},children:"Off"})]}),E.jsx("p",{className:"settings-hint",style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:"When enabled, new cards appear with hidden text until revealed"})]}),E.jsx("div",{className:"settings-divider"}),E.jsx("div",{className:"settings-section",style:{padding:"0 var(--space-sm)"},children:E.jsx("button",{className:"btn danger-btn",style:{width:"100%",margin:"var(--space-xs) 0"},onClick:()=>{U()&&L("All votes reset to zero")},children:"Reset all votes"})})]})]})]}),E.jsx("button",{id:"theme-toggle",className:"btn icon-btn",onClick:()=>{F(!$)},title:$?"Switch to light mode":"Switch to dark mode",children:$?E.jsx(cp,{size:16}):E.jsx(sp,{size:16})})]})},kI=({columns:r,sortByVotes:e,showNotification:n,addNewColumn:s,cardsRevealed:o})=>{const c=()=>Object.entries(r||{}).sort((d,h)=>d[0].localeCompare(h[0]));return E.jsx("div",{className:"board-container",children:E.jsxs("div",{id:"board",className:"board",children:[c().map(([d,h])=>E.jsx(NI,{columnId:d,columnData:h,sortByVotes:e,showNotification:n},d)),!o&&E.jsx("div",{className:"add-column-container",children:E.jsxs("button",{id:"add-column",className:"add-column",onClick:s,children:[E.jsx(Tc,{size:16}),"Add Column"]})})]})})};function LI({showNotification:r}){const[e,n]=z.useState(!1),[s,o]=z.useState(!1),{boardId:c,boardRef:d,boardTitle:h,setBoardTitle:p,columns:m,sortByVotes:_,setSortByVotes:b,votingEnabled:T,updateVotingEnabled:O,downvotingEnabled:N,updateDownvotingEnabled:U,multipleVotesAllowed:L,updateMultipleVotesAllowed:$,revealMode:F,updateRevealMode:Q,cardsRevealed:ne,revealAllCards:Z,createNewBoard:_e,openExistingBoard:ge,resetAllVotes:he,updateBoardTitle:je,user:tt,darkMode:at,updateDarkMode:Re}=ao(),[Ke,le]=z.useState(!1);z.useEffect(()=>{const q=new URLSearchParams(window.location.search).get("board");q?ge(q):tt&&o(!0)},[tt]),z.useEffect(()=>{document.title=h?`${h} - Kanbanish`:"Kanbanish"},[h]);const xe=G=>{const q=G.target.value;p(q)},M=()=>{je(h)},V=()=>{o(!0)},ie=(G,q=null)=>{const W=q?`${q} Board`:"Untitled Board",ae=_e(G,W);ae?(window.history.pushState({},"",`?board=${ae}`),r("New board created"),o(!1)):console.error("Failed to create new board - user may not be authenticated yet")},De=()=>{!d||!c||RI(c).then(()=>{r("Column added")}).catch(G=>{console.error("Error adding column:",G)})},y=()=>{if(c){const G=`${window.location.origin}${window.location.pathname}?board=${c}`;navigator.clipboard.writeText(G).then(()=>{r("Share URL copied to clipboard")}).catch(q=>{console.error("Could not copy text: ",q)})}},k=()=>{n(!0),r("Preparing board export...")};return E.jsxs(E.Fragment,{children:[E.jsx("header",{children:E.jsxs("div",{className:"header-content",children:[E.jsx(II,{boardTitle:h,handleBoardTitleChange:xe,handleBoardTitleBlur:M,copyShareUrl:y,handleExportBoard:k}),E.jsx(MI,{handleCreateNewBoard:V,sortByVotes:_,setSortByVotes:b,votingEnabled:T,updateVotingEnabled:O,downvotingEnabled:N,updateDownvotingEnabled:U,multipleVotesAllowed:L,updateMultipleVotesAllowed:$,revealMode:F,updateRevealMode:Q,cardsRevealed:ne,revealAllCards:Z,sortDropdownOpen:Ke,setSortDropdownOpen:le,resetAllVotes:he,showNotification:r,darkMode:at,updateDarkMode:Re})]})}),E.jsx("main",{children:E.jsx(kI,{columns:m,sortByVotes:_,showNotification:r,addNewColumn:De,cardsRevealed:ne})}),E.jsx(AI,{isOpen:e,onClose:()=>{n(!1)},showNotification:r}),E.jsx(xI,{isOpen:s,onClose:()=>{c?o(!1):tt&&ie(["To Do","In Progress","Done"],"Default")},onSelectTemplate:ie})]})}function uE(r){let e=null;return()=>(e==null&&(e=r()),e)}function UI(r,e){return r.filter(n=>n!==e)}function jI(r,e){const n=new Set,s=c=>n.add(c);r.forEach(s),e.forEach(s);const o=[];return n.forEach(c=>o.push(c)),o}class PI{enter(e){const n=this.entered.length,s=o=>this.isNodeInDocument(o)&&(!o.contains||o.contains(e));return this.entered=jI(this.entered.filter(s),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=UI(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class zI{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(s=>{const o=this.config.exposeProperties[s];o!=null&&(n[s]={value:o(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const fE="__NATIVE_FILE__",dE="__NATIVE_URL__",hE="__NATIVE_TEXT__",pE="__NATIVE_HTML__",My=Object.freeze(Object.defineProperty({__proto__:null,FILE:fE,HTML:pE,TEXT:hE,URL:dE},Symbol.toStringTag,{value:"Module"}));function cd(r,e,n){const s=e.reduce((o,c)=>o||r.getData(c),"");return s??n}const Zd={[fE]:{exposeProperties:{files:r=>Array.prototype.slice.call(r.files),items:r=>r.items,dataTransfer:r=>r},matchesTypes:["Files"]},[pE]:{exposeProperties:{html:(r,e)=>cd(r,e,""),dataTransfer:r=>r},matchesTypes:["Html","text/html"]},[dE]:{exposeProperties:{urls:(r,e)=>cd(r,e,"").split(`
`),dataTransfer:r=>r},matchesTypes:["Url","text/uri-list"]},[hE]:{exposeProperties:{text:(r,e)=>cd(r,e,""),dataTransfer:r=>r},matchesTypes:["Text","text/plain"]}};function HI(r,e){const n=Zd[r];if(!n)throw new Error(`native type ${r} has no configuration`);const s=new zI(n);return s.loadDataTransfer(e),s}function ud(r){if(!r)return null;const e=Array.prototype.slice.call(r.types||[]);return Object.keys(Zd).filter(n=>{const s=Zd[n];return s!=null&&s.matchesTypes?s.matchesTypes.some(o=>e.indexOf(o)>-1):!1})[0]||null}const BI=uE(()=>/firefox/i.test(navigator.userAgent)),gE=uE(()=>!!window.safari);class ky{interpolate(e){const{xs:n,ys:s,c1s:o,c2s:c,c3s:d}=this;let h=n.length-1;if(e===n[h])return s[h];let p=0,m=d.length-1,_;for(;p<=m;){_=Math.floor(.5*(p+m));const O=n[_];if(O<e)p=_+1;else if(O>e)m=_-1;else return s[_]}h=Math.max(0,m);const b=e-n[h],T=b*b;return s[h]+o[h]*b+c[h]*T+d[h]*b*T}constructor(e,n){const{length:s}=e,o=[];for(let O=0;O<s;O++)o.push(O);o.sort((O,N)=>e[O]<e[N]?-1:1);const c=[],d=[];let h,p;for(let O=0;O<s-1;O++)h=e[O+1]-e[O],p=n[O+1]-n[O],c.push(h),d.push(p/h);const m=[d[0]];for(let O=0;O<c.length-1;O++){const N=d[O],U=d[O+1];if(N*U<=0)m.push(0);else{h=c[O];const L=c[O+1],$=h+L;m.push(3*$/(($+L)/N+($+h)/U))}}m.push(d[d.length-1]);const _=[],b=[];let T;for(let O=0;O<m.length-1;O++){T=d[O];const N=m[O],U=1/c[O],L=N+m[O+1]-T-T;_.push((T-N-L)*U),b.push(L*U*U)}this.xs=e,this.ys=n,this.c1s=m,this.c2s=_,this.c3s=b}}const qI=1;function mE(r){const e=r.nodeType===qI?r:r.parentElement;if(!e)return null;const{top:n,left:s}=e.getBoundingClientRect();return{x:s,y:n}}function Ol(r){return{x:r.clientX,y:r.clientY}}function GI(r){var e;return r.nodeName==="IMG"&&(BI()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(r)))}function VI(r,e,n,s){let o=r?e.width:n,c=r?e.height:s;return gE()&&r&&(c/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:c}}function YI(r,e,n,s,o){const c=GI(e),h=mE(c?r:e),p={x:n.x-h.x,y:n.y-h.y},{offsetWidth:m,offsetHeight:_}=r,{anchorX:b,anchorY:T}=s,{dragPreviewWidth:O,dragPreviewHeight:N}=VI(c,e,m,_),U=()=>{let _e=new ky([0,.5,1],[p.y,p.y/_*N,p.y+N-_]).interpolate(T);return gE()&&c&&(_e+=(window.devicePixelRatio-1)*N),_e},L=()=>new ky([0,.5,1],[p.x,p.x/m*O,p.x+O-m]).interpolate(b),{offsetX:$,offsetY:F}=o,Q=$===0||$,ne=F===0||F;return{x:Q?$:L(),y:ne?F:U()}}class $I{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}}function FI(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ly(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){FI(r,o,n[o])})}return r}class QI{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,s){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,s);const o=d=>this.handleDragStart(d,e),c=d=>this.handleSelectStart(d);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",o),n.addEventListener("selectstart",c),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",o),n.removeEventListener("selectstart",c),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const s=d=>this.handleDragEnter(d,e),o=d=>this.handleDragOver(d,e),c=d=>this.handleDrop(d,e);return n.addEventListener("dragenter",s),n.addEventListener("dragover",o),n.addEventListener("drop",c),()=>{n.removeEventListener("dragenter",s),n.removeEventListener("dragover",o),n.removeEventListener("drop",c)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return Ly({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return Ly({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(My).some(n=>My[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=HI(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var s;return(s=this.rootElement)===null||s===void 0?void 0:s.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,s){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=o=>{const c=this.sourceNodes.get(o);return c&&mE(c)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=o=>!!(o&&this.document&&this.document.body&&this.document.body.contains(o)),this.endDragIfSourceWasRemovedFromDOM=()=>{const o=this.currentDragSourceNode;o==null||this.isNodeInDocument(o)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=o=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(o||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=o=>{if(o.defaultPrevented)return;const{dragStartSourceIds:c}=this;this.dragStartSourceIds=null;const d=Ol(o);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(c||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:d});const{dataTransfer:h}=o,p=ud(h);if(this.monitor.isDragging()){if(h&&typeof h.setDragImage=="function"){const _=this.monitor.getSourceId(),b=this.sourceNodes.get(_),T=this.sourcePreviewNodes.get(_)||b;if(T){const{anchorX:O,anchorY:N,offsetX:U,offsetY:L}=this.getCurrentSourcePreviewNodeOptions(),Q=YI(b,T,d,{anchorX:O,anchorY:N},{offsetX:U,offsetY:L});h.setDragImage(T,Q.x,Q.y)}}try{h==null||h.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(o.target);const{captureDraggingState:m}=this.getCurrentSourcePreviewNodeOptions();m?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(p)this.beginDragNativeItem(p);else{if(h&&!h.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=o=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}if(!this.enterLeaveCounter.enter(o.target)||this.monitor.isDragging())return;const{dataTransfer:h}=o,p=ud(h);p&&this.beginDragNativeItem(p,h)},this.handleTopDragEnter=o=>{const{dragEnterTargetIds:c}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=o.altKey,c.length>0&&this.actions.hover(c,{clientOffset:Ol(o)}),c.some(h=>this.monitor.canDropOnTarget(h))&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=o=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}},this.handleTopDragOver=o=>{const{dragOverTargetIds:c}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}this.altKeyPressed=o.altKey,this.lastClientOffset=Ol(o),this.scheduleHover(c),(c||[]).some(h=>this.monitor.canDropOnTarget(h))?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=o=>{this.isDraggingNativeItem()&&o.preventDefault(),this.enterLeaveCounter.leave(o.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=o=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var c;o.preventDefault(),(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}else ud(o.dataTransfer)&&o.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=o=>{const{dropTargetIds:c}=this;this.dropTargetIds=[],this.actions.hover(c,{clientOffset:Ol(o)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=o=>{const c=o.target;typeof c.dragDrop=="function"&&(c.tagName==="INPUT"||c.tagName==="SELECT"||c.tagName==="TEXTAREA"||c.isContentEditable||(o.preventDefault(),c.dragDrop()))},this.options=new $I(n,s),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new PI(this.isNodeInDocument)}}const WI=function(e,n,s){return new QI(e,n,s)};function XI(){const[r,e]=z.useState({message:"",show:!1}),n=z.useRef(null);X.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]);const s=o=>{n.current&&clearTimeout(n.current),e({message:o,show:!0}),n.current=setTimeout(()=>{e({message:"",show:!1}),n.current=null},3e3)};return E.jsx(nx,{backend:WI,children:E.jsx(zN,{children:E.jsxs("div",{className:"App","data-testid":"app-container",children:[E.jsx(LI,{showNotification:s}),E.jsx("div",{id:"notification",className:`notification ${r.show?"show":""}`,children:E.jsx("span",{id:"notification-message",children:r.message})})]})})})}const KI=VT.createRoot(document.getElementById("root"));KI.render(E.jsx(X.StrictMode,{children:E.jsx(XI,{})}));
